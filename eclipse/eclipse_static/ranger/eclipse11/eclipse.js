!function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){n(1),e.exports=n(41)},function(e,t,n){function r(e,t){if(a.pauseStart)return void setTimeout(function(){r(e,t)},100);console.log("ranger/main: Loading Ranger library components");var i=n(4);i.canvas=e;var o=n(5);i.scene=n(9),i.update=n(18).update,i.graphics=n(40);try{i.app=new o}catch(s){console.exception("ranger/main: Failed to initialize Ranger: ",s),i.app&&i.app.quit("ranger/main: Failed to initialize a library component",!0)}t&&t()}n(2).set();var a=n(3);console.verbose=a.verbose,console.verboseLog=function(){console.verbose&&console.log.apply(null,arguments)},console.verboseInfo=function(){console.verbose&&console.info.apply(null,arguments)},console.verboseWarn=function(){console.verbose&&console.warn.apply(null,arguments)},console.verboseError=function(){console.verbose&&console.error.apply(null,arguments)},console.exception=function(e,t){console.error(e),console.error(t),t.stack&&console.error(t.stack)},e.exports={init:r}},function(e,t,n){function r(e){return e||(e=u),{stereo:!1,vr:!1,mobile:!1,ios:!1,high:!1,medium:!1,low:!1,profile:!1,profileMemory:!1,timeMemory:!1,pauseStart:!1,verbose:!1,debug:!1,profileInstances:!1,usePainters:!1,canvasDivisor:1,path:{document:"rpath://./",image:"rpath://./",server:"rpath://./",animation:"rpath://./",imageproxy:"rpath://../../..",module:"rpath://../../dist",scene:"data://scene"},scene:{servers:"$RANGER.MODULE/\\tag.json",tags:""},log:{shader:!1},camera:{time:0,rate:0,type:"Orbit",target:"",radius:6e8,position:[0,0,0],orientation:[0,0,0,1]},virtual:e.high?{physical:[4096,4096],mipLimit:13,uploads:512,pending:128,sampleShift:2}:e.medium?{physical:[2048,2048],mipLimit:12,uploads:64,pending:32,sampleShift:3}:e.low?{physical:[1024,1024],mipLimit:8,uploads:8,pending:8,sampleShift:5}:e.mobile?{physical:[1024,1024],mipLimit:10,uploads:16,pending:16,sampleShift:5}:{physical:[2048,2048],mipLimit:11,uploads:64,pending:32,sampleShift:3}}}function a(e){return!!+e||"undefined"!=typeof e&&("string"==typeof e&&("true"===e.toLowerCase()||"yes"===e.toLowerCase()||"on"===e.toLowerCase()||"enabled"===e.toLowerCase()))}function i(e,t){for(var n in t){var r=e[n];if("undefined"!=typeof r){var o=t[n];"boolean"==typeof r?t[n]=a(o):"number"==typeof r?t[n]=Number(o):r.constructor===Array&&(t[n]=Object.keys(o).map(function(e){return o[e]})),"string"!=typeof r&&"boolean"!=typeof r&&"number"!=typeof r&&i(r,t[n])}}}function o(e,t){for(var n in e){var r=e[n];n in t?"string"!=typeof r&&"boolean"!=typeof r&&"number"!=typeof r&&o(r,t[n]):t[n]=r}}function s(){i(r(),u),o(r(),u)}var u=n(3);e.exports={defaults:r,set:s}},function(e,t){(function(t){if(!("settings"in t.window.__ranger))throw Error("Could not find settings!");e.exports=t.window.__ranger.settings}).call(t,function(){return this}())},function(e,t){(function(t){if(!t.window||!t.window.__ranger)throw Error("Could not find Eyes.js");this.__ranger=window.__ranger,window.performance||(console.warn("ERROR: window.performance does not exist, likely due to using Safari < 8 on Mac OS or using iOS < 8 or iOS >= 8.1.1"),window.performance={now:function(){return+new Date}}),e.exports=this.__ranger}).call(t,function(){return this}())},function(e,t,n){function r(){v="START_FRAME"}function a(){if("INITALIZING"!==v)do x&&N.app.renderEventProfiler(v),b[v]();while("START_FRAME"!==v)}function i(e){var t=JSON.stringify(N.app.profiler.report,null,2),n=new XMLHttpRequest;n.open("POST",window.location.origin+"/report/"+e),n.setRequestHeader("Content-type","application/json"),n.setRequestHeader("Content-length",t.length),n.onreadystatechange=function(){200!=n.status&&console.log("Problem connecting to server")},n.send(t),console.log("Wrote report to server at: "+window.location.origin+"/report/"+e)}function o(e){e.callback.apply(this,e.params)}function s(){if(w)return!0;for(var e=window.performance.now(),t=e+1,n=[];j.length;){var r=j.dequeue();if(r.start&&this.core.frame<r.start)n.push(r);else{switch(r.type){case"CPPCALLBACK":this.handleCPPCallbackEvent(r.params);break;case"CALLBACK":o(r.params);break;case"DOWNLOAD":this.handleDownloadEvent(r.params);break;case"QUIT":return!1;case"NONE":}if(window.performance.now()>=t)break}}return n.forEach(function(e){j.queue(e)}),a(),!0}function u(e,t){j.queue({type:"CPPCALLBACK",params:e,start:t})}function c(e){j.queue({type:"DOWNLOAD",params:e})}function l(e){j.queue({type:"CALLBACK",params:e})}function d(e){j.queue({type:"QUIT",params:e})}function M(e,t,n,r,a){var i=this.aux.newWindow(e,t,n,r,a);return i?(E.push(i),i):null}function g(e,t){t.offsetLeft="",t.offsetTop="",t.currentElement="",t.mousePressed=!1;var n=t.div=document.createElement("div");n.className="pip",n.id="pip"+t.id,n.style.bottom="0 px",n.style.right="0 px",e.appendChild(n);var r=0,a=0;return t.resize=function(){r=Math.abs(e.offsetWidth-e.clientWidth)/2,a=Math.abs(e.offsetHeight-e.clientHeight)/2,t.left=Math.max(0,r+e.offsetLeft+n.offsetLeft),t.top=Math.max(0,N.canvas.offsetHeight-(a+e.offsetTop+n.offsetTop+n.offsetHeight)),t.width=Math.max(1,n.offsetWidth),t.height=Math.max(1,n.offsetHeight)},T.addResizeListener(n,t.resize),window.addEventListener("resize",t.resize),t.addResizeListener=function(e){T.addResizeListener(n,e),window.addEventListener("resize",e)},t}function p(e,t,n,r,a,i){var o=e.subWindow(t,n,r,a);return o?(E.push(o),N.scene.cameraData[o.camera.id]={},i||(i=N.canvas.parentElement),g(i,o)):null}function A(){this.__parent.__construct.call(this),this.downloadManager.addReplacement("RANGER",h.path.server),this.downloadManager.addReplacement("RANGER.DOCUMENT",h.path.document),this.downloadManager.addReplacement("RANGER.IMAGE",h.path.image),this.downloadManager.addReplacement("RANGER.IMAGES",h.path.image),this.downloadManager.addReplacement("RANGER.IMAGE.PROXY",h.path.imageproxy),this.downloadManager.addReplacement("RANGER.MODULE",h.path.module),this.downloadManager.addReplacement("RANGER.ANIMATION",h.path.animation),this.downloadManager.addReplacement("RANGER.SCENE",h.path.scene)}var m,f,D,N=n(4),h=n(3),T=n(6),y=0,L=0,v="INITALIZING",w=!1,E=[],I=n(7),j=I.createQueue(),x=!1,b={INITALIZING:function(){},START_FRAME:function(){var e=window.performance.now()/1e3;y=e-L,L=e,N.app.core.startFrame(),v="JS_START_FRAME"},JS_START_FRAME:function(){var e=N.startFrame;"function"==typeof e&&e(y),N.scene.clearFrameData(),v="MAINTAIN_BUFFERS"},MAINTAIN_BUFFERS:function(){N.app.core.maintainBuffers(),v="WINDOW_UPDATE"},WINDOW_UPDATE:function(){for(var e in E)E[e].update(D.getCorrectedCursorPosition(),D.touchDown);m=0,v="UPDATE_STATE"},UPDATE_STATE:function(){if(m==E.length)m=0,v="RENDER_WINDOW";else{var e=E[m].windowUpdate;"function"==typeof e&&e(y,E[m]),f=E[m].camera,v="UPDATE_CAMERA"}},UPDATE_CAMERA:function(){if(f){f.update()||console.warn("Application: Failed to update the camera");var e;N.scene.cameraData[f.id]&&(e=N.scene.cameraData[f.id].attachedNode),e&&!e.loaded&&e.triggerLoad(f.clock),v="UPDATE_FRAMES"}else m++,v="UPDATE_STATE"},UPDATE_FRAMES:function(){var e;N.scene.cameraData[f.id]&&(e=N.scene.cameraData[f.id].attachedNode),e&&e.updateFrames(f),v="TRANSFORM_SCENE"},TRANSFORM_SCENE:function(){var e;if(N.scene.cameraData[f.id]&&(e=N.scene.cameraData[f.id].attachedNode),e){var t={parent:e,position:[0,0,0],orientation:[0,0,0,1],time:f.clock.time.value};e.transformToFrame(t,f)}m++,v="UPDATE_STATE"},RENDER_WINDOW:function(){m==E.length?(v="SWAP_BUFFERS",m=0):(f=E[m].camera,v="JS_POST_TRANSFORM")},JS_POST_TRANSFORM:function(){var e=E[m].postTransformUpdate;"function"==typeof e&&e(y,E[m],f),v="POST_CAMERA_UPDATE"},POST_CAMERA_UPDATE:function(){var e;N.scene.cameraData[f.id]&&(e=N.scene.cameraData[f.id].attachedNode),e&&e.postCameraUpdate(f),f.postUpdate(),v="JS_POST_CAMERA_UPDATE"},JS_POST_CAMERA_UPDATE:function(){var e=E[m].postCameraUpdate;"function"==typeof e&&e(y,E[m],f),v="RENDER_CAMERA"},RENDER_CAMERA:function(){x=!0,f.render(N.scene.getRenderableObjects(f)),v="RENDER_WINDOW",f=null,m++},SWAP_BUFFERS:function(){E[m]&&E[m].swapBuffers(),h.vr&&D.vrDevice.isPresenting&&D.vrDevice.submitFrame(),v="JS_END_FRAME"},JS_END_FRAME:function(){var e=N.endFrame;"function"==typeof e?e(y):Array.isArray(e)&&e.forEach(function(e){e(y)}),v="END_FRAME"},END_FRAME:function(){N.app.core.endFrame(),v="START_FRAME"}};e.exports=N.Application.extend("Application",{__construct:A,startDrawing:r,loop:s,addDownloadEvent:c,addCallbackEvent:l,addCPPCallbackEvent:u,addQuitEvent:d,newWindow:M,subWindow:p,windows:E,profileReport:i,setWin:function(e){if(D=e,N.endFrame){var t=N.endFrame;N.endFrame=function(e){t(e),D.endFrame(e)}}else N.endFrame=D.endFrame},getWin:function(){return D},pause:function(){w=!0},unpause:function(){w=!1}})},function(e,t){function n(e){var t=e.__resizeTriggers__,n=t.firstElementChild,r=t.lastElementChild,a=n.firstElementChild;r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight,a.style.width=n.offsetWidth+2+"px",a.style.height=n.offsetHeight+2+"px",n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight}function r(e){return e.offsetWidth!=e.__resizeLast__.width||e.offsetHeight!=e.__resizeLast__.height}function a(e){var t=this;n(this),this.__resizeRAF__&&c(this.__resizeRAF__),this.__resizeRAF__=u(function(){r(t)&&(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,t.__resizeListeners__.forEach(function(n){n.call(t,e)}))})}function i(){if(!s){var e=(h?h:"")+".resize-triggers { "+(T?T:"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),t.appendChild(n),s=!0}}var o=document.attachEvent,s=!1;if(!o){var u=function(){var e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return window.setTimeout(e,20)};return function(t){return e(t)}}(),c=function(){var e=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout;return function(t){return e(t)}}(),l=!1,d="animation",M="",g="animationstart",p="Webkit Moz O ms".split(" "),A="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),m="",f=document.createElement("fakeelement");if(void 0!==f.style.animationName&&(l=!0),l===!1)for(var D=0;D<p.length;D++)if(void 0!==f.style[p[D]+"AnimationName"]){m=p[D],d=m+"Animation",M="-"+m.toLowerCase()+"-",g=A[D],l=!0;break}var N="resizeanim",h="@"+M+"keyframes "+N+" { from { opacity: 0; } to { opacity: 0; } } ",T=M+"animation: 1ms "+N+"; "}e.exports={addResizeListener:function(e,t){o?e.attachEvent("onresize",t):(e.__resizeTriggers__||("static"==getComputedStyle(e).position&&(e.style.position="relative"),i(),e.__resizeLast__={},e.__resizeListeners__=[],(e.__resizeTriggers__=document.createElement("div")).className="resize-triggers",e.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',e.appendChild(e.__resizeTriggers__),n(e),e.addEventListener("scroll",a,!0),g&&e.__resizeTriggers__.addEventListener(g,function(t){t.animationName==N&&n(e)})),e.__resizeListeners__.push(t))},removeResizeListener:function(e,t){o?e.detachEvent("onresize",t):(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),e.__resizeListeners__.length||(e.removeEventListener("scroll",a),e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)))}}},function(e,t,n){function r(e,t){if(e.type&&t.type){var n=e.type,r=t.type;if(n in s&&r in s)return n=s[n],r=s[r],2==n&&n==r?i.app.downloadManager.getPriority(t.params)-i.app.downloadManager.getPriority(e.params):r-n}}function a(){return new o({comparator:r})}var i=n(4),o=n(8),s={NONE:0,RENDER:1,DOWNLOAD:2,CPPCALLBACK:3,CALLBACK:4,QUIT:5};e.exports={createQueue:a}},function(e,t){!function(n){if("object"==typeof t&&"undefined"!=typeof e)e.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var r;r="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,r.PriorityQueue=n()}}(function(){return function e(t,n,r){function a(o,s){if(!n[o]){if(!t[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(i)return i(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return a(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)a(r[o]);return a}({1:[function(e,t,n){var r,a,i,o,s,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;r=e("./PriorityQueue/AbstractPriorityQueue"),a=e("./PriorityQueue/ArrayStrategy"),o=e("./PriorityQueue/BinaryHeapStrategy"),i=e("./PriorityQueue/BHeapStrategy"),s=function(e){function t(e){e||(e={}),e.strategy||(e.strategy=o),e.comparator||(e.comparator=function(e,t){return(e||0)-(t||0)}),t.__super__.constructor.call(this,e)}return u(t,e),t}(r),s.ArrayStrategy=a,s.BinaryHeapStrategy=o,s.BHeapStrategy=i,t.exports=s},{"./PriorityQueue/AbstractPriorityQueue":2,"./PriorityQueue/ArrayStrategy":3,"./PriorityQueue/BHeapStrategy":4,"./PriorityQueue/BinaryHeapStrategy":5}],2:[function(e,t,n){var r;t.exports=r=function(){function e(e){var t;if(null==(null!=e?e.strategy:void 0))throw"Must pass options.strategy, a strategy";if(null==(null!=e?e.comparator:void 0))throw"Must pass options.comparator, a comparator";this.priv=new e.strategy(e),this.length=(null!=e&&null!=(t=e.initialValues)?t.length:void 0)||0}return e.prototype.queue=function(e){this.length++,this.priv.queue(e)},e.prototype.dequeue=function(e){if(!this.length)throw"Empty queue";return this.length--,this.priv.dequeue()},e.prototype.peek=function(e){if(!this.length)throw"Empty queue";return this.priv.peek()},e.prototype.clear=function(){return this.length=0,this.priv.clear()},e}()},{}],3:[function(e,t,n){var r,a;a=function(e,t,n){var r,a,i;for(a=0,r=e.length;a<r;)i=a+r>>>1,n(e[i],t)>=0?a=i+1:r=i;return a},t.exports=r=function(){function e(e){var t;this.options=e,this.comparator=this.options.comparator,this.data=(null!=(t=this.options.initialValues)?t.slice(0):void 0)||[],this.data.sort(this.comparator).reverse()}return e.prototype.queue=function(e){var t;t=a(this.data,e,this.comparator),this.data.splice(t,0,e)},e.prototype.dequeue=function(){return this.data.pop()},e.prototype.peek=function(){return this.data[this.data.length-1]},e.prototype.clear=function(){this.data.length=0},e}()},{}],4:[function(e,t,n){var r;t.exports=r=function(){function e(e){var t,n,r,a,i,o,s,u,c;for(this.comparator=(null!=e?e.comparator:void 0)||function(e,t){return e-t},this.pageSize=(null!=e?e.pageSize:void 0)||512,this.length=0,u=0;1<<u<this.pageSize;)u+=1;if(1<<u!==this.pageSize)throw"pageSize must be a power of two";for(this._shift=u,this._emptyMemoryPageTemplate=t=[],n=r=0,o=this.pageSize;0<=o?r<o:r>o;n=0<=o?++r:--r)t.push(null);if(this._memory=[],this._mask=this.pageSize-1,e.initialValues)for(s=e.initialValues,a=0,i=s.length;a<i;a++)c=s[a],this.queue(c)}return e.prototype.queue=function(e){this.length+=1,this._write(this.length,e),this._bubbleUp(this.length,e)},e.prototype.dequeue=function(){var e,t;return e=this._read(1),t=this._read(this.length),this.length-=1,this.length>0&&(this._write(1,t),this._bubbleDown(1,t)),e},e.prototype.peek=function(){return this._read(1)},e.prototype.clear=function(){this.length=0,this._memory.length=0},e.prototype._write=function(e,t){var n;for(n=e>>this._shift;n>=this._memory.length;)this._memory.push(this._emptyMemoryPageTemplate.slice(0));return this._memory[n][e&this._mask]=t},e.prototype._read=function(e){return this._memory[e>>this._shift][e&this._mask]},e.prototype._bubbleUp=function(e,t){var n,r,a,i;for(n=this.comparator;e>1&&(r=e&this._mask,e<this.pageSize||r>3?a=e&~this._mask|r>>1:r<2?(a=e-this.pageSize>>this._shift,a+=a&~(this._mask>>1),a|=this.pageSize>>1):a=e-2,i=this._read(a),!(n(i,t)<0));)this._write(a,t),this._write(e,i),e=a},e.prototype._bubbleDown=function(e,t){var n,r,a,i,o;for(o=this.comparator;e<this.length;)if(e>this._mask&&!(e&this._mask-1)?n=r=e+2:e&this.pageSize>>1?(n=(e&~this._mask)>>1,n|=e&this._mask>>1,n=n+1<<this._shift,r=n+1):(n=e+(e&this._mask),r=n+1),n!==r&&r<=this.length)if(a=this._read(n),i=this._read(r),o(a,t)<0&&o(a,i)<=0)this._write(n,t),this._write(e,a),e=n;else{if(!(o(i,t)<0))break;this._write(r,t),this._write(e,i),e=r}else{if(!(n<=this.length))break;if(a=this._read(n),!(o(a,t)<0))break;this._write(n,t),this._write(e,a),e=n}},e}()},{}],5:[function(e,t,n){var r;t.exports=r=function(){function e(e){var t;this.comparator=(null!=e?e.comparator:void 0)||function(e,t){return e-t},this.length=0,this.data=(null!=(t=e.initialValues)?t.slice(0):void 0)||[],this._heapify()}return e.prototype._heapify=function(){var e,t,n;if(this.data.length>0)for(e=t=1,n=this.data.length;1<=n?t<n:t>n;e=1<=n?++t:--t)this._bubbleUp(e)},e.prototype.queue=function(e){this.data.push(e),this._bubbleUp(this.data.length-1)},e.prototype.dequeue=function(){var e,t;return t=this.data[0],e=this.data.pop(),this.data.length>0&&(this.data[0]=e,this._bubbleDown(0)),t},e.prototype.peek=function(){return this.data[0]},e.prototype.clear=function(){this.length=0,this.data.length=0},e.prototype._bubbleUp=function(e){for(var t,n;e>0&&(t=e-1>>>1,this.comparator(this.data[e],this.data[t])<0);)n=this.data[t],this.data[t]=this.data[e],this.data[e]=n,e=t},e.prototype._bubbleDown=function(e){var t,n,r,a,i;for(t=this.data.length-1;;){if(n=(e<<1)+1,a=n+1,r=e,n<=t&&this.comparator(this.data[n],this.data[r])<0&&(r=n),a<=t&&this.comparator(this.data[a],this.data[r])<0&&(r=a),r===e)break;i=this.data[r],this.data[r]=this.data[e],this.data[e]=i,e=r}},e}()},{}]},{},[1])(1)})},function(e,t,n){function r(e){return"string"!=typeof e?e:e in y?y[e]:(y[e]=new m(e),y[e])}function a(e){return e in y}function i(){}function o(e){for(var t in e){var n=r(t);try{n.load(e[t])}catch(a){console.exception('scene/Scene.load: Failed to load "'+t+'": ',a)}}}function s(t,n){if(!n){if(w.indexOf(t.name)>-1)return;w.push(t.name)}e.exports.hooks.every(function(n){return!T[n].hook(t,e.exports.tags)})&&console.error("scene/Scene: Request '"+t.name+"': failed to find a hook to satisfy request")}function u(e){for(var t in y)y[t].frame.LCA={},e?y[t].frame.rootData[e.id]={}:y[t].frame.rootData={},y[t].frame.last={},y[t].frame.lastUpdate={value:NaN}}function c(e,t){var n=E[e.id];if(n&&n.rendered)for(var r in n.rendered){var a=n.rendered[r],i=a.drawn;if(t(a.node,a.projectedPosition,i,a.visible))return}}function l(e,t){var n=E[e.id],r=e.frame;for(var a in I)if(I[a].enabled&&(!(e.name&&I[a].cameras&&e.name in I[a].cameras)||I[a].cameras[e.name])){var i=D.math.inverse(r.orientation),o=D.math.qMulV(i,r.position),s=D.math.vAdd(o,I[a].transform.position);I[a].transform.parent=e.attachedNode;var u=D.math.getMatrix(D.frame.getTransform(I[a].transform));u[3][0]=s[0],u[3][1]=s[1],u[3][2]=s[2],n.attachedNode.name in n.rendered||(n.rendered[n.attachedNode.name]={node:n.attachedNode,position:s,projectedPosition:e.projectPosition(s),drawn:[]}),n.rendered[n.attachedNode.name].drawn.push({renderable:I[a].renderable,position:s}),t.push({renderable:I[a].renderable,matrix:u,id:{node:n.attachedNode}})}}function d(e,t){var n=D.math.getMatrix(e),r=D.math.getTranslation(e);if("rotate"in t)if(4===t.rotate.length)for(var a=D.math.qNormalized(t.rotate),i=0;i<4;i++)n[3][i]=a[i];else console.warn("Failed to rotate renderable, rotate must be a quaternion");if("translate"in t){r=D.math.vAdd(r,D.math.qMulV(D.math.getRotation(e),t.translate));for(var o=0;o<3;o++)n[3][o]=r[o]}if("scale"in t)if(3===t.scale.length)for(var s=0;s<3;s++)for(var u=0;u<3;u++)n[s][u]*=t.scale[s];else for(var c=0;c<3;c++)for(var l=0;l<3;l++)n[c][l]*=t.scale;return{matrix:n,position:r}}function M(e,t,n,r){var a=E[n.id];if(e.renderables){var i=e.renderables.get(n);i&&i.renderables.length&&i.renderables.forEach(function(i){if(i&&(!(n.name&&i.cameras&&n.name in i.cameras)||i.cameras[n.name])){var o=void 0,s=void 0;if("enabled"in i.transform&&i.transform.enabled){var u=void 0;if("relativeToParent"in i.transform&&i.transform.relativeToParent){var c=null;if(null!==t&&void 0!==t&&t.frame.rootData[n.id]&&(c=t.frame.rootData[n.id].thisToRoot),!c)return void console.error("No parent transform to be relative to parent in",e.name);u=d(c,i.transform)}else u=d(e.frame.rootData[n.id].thisToRoot,i.transform);o=u.matrix,s=u.position}else o=D.math.getMatrix(e.frame.rootData[n.id].thisToRoot),s=D.math.getTranslation(e.frame.rootData[n.id].thisToRoot);if(s=D.math.qMulV(D.math.conjugate(n.frame.orientation),D.math.vSub(s,n.frame.position)),o=D.math.toM4(D.math.qMulM3(D.math.conjugate(n.frame.orientation),D.math.toM3(o)),s),!(e.name in a.rendered)){var l=D.math.getTranslation(e.frame.rootData[n.id].thisToRoot),M="enabled"in e.renderables.transform&&e.renderables.transform.enabled;if(M&&"translate"in e.renderables.transform){var g=D.math.getRotation(e.frame.rootData[n.id].thisToRoot),p=D.math.qMulV(g,e.renderables.transform.translate);l=D.math.vAdd(l,p)}l=D.math.qMulV(D.math.conjugate(n.frame.orientation),D.math.vSub(l,n.frame.position)),a.rendered[e.name]={node:e,position:l,projectedPosition:n.projectPosition(l),drawn:[]}}var A=a.rendered[e.name].position;"Label"===i.type&&(i.data.projectedPosition=n.projectPosition(s),A=s),a.rendered[e.name].drawn.push({renderable:i,position:A}),r.push({renderable:i,matrix:o,id:{node:e}})}})}}function g(e,t){return e.near<t.near&&(t.far=t.far),!0}function p(e,t,n,r){for(var a in t.relationship.children){var i=t.relationship.children[a];i!==n&&(M(i,t,e,r),p(e,i,null,r))}}function p(e,t,n,r){for(var a in t.relationship.children){var i=t.relationship.children[a];i!==n&&(M(i,t,e,r),p(e,i,null,r))}}function A(e){E[e.id]||(E[e.id]={});var t=E[e.id],n=t.attachedNode,r=null,a=[];for(t.rendered={};n;)n.loaded?(M(n,n.relationship.parent,e,a),p(e,n,r,a),r=n,n=n.relationship.parent):n=null;var i={},o=function(n){var r=t.rendered[n];return r.node.ellipsoid||r.drawn.length?(i[n]={ellipsoid:r.node.ellipsoid||[0,0,0],rootToThis:r.node.frame.rootData[e.id].rootToThis,drawn:[]},void r.drawn.forEach(function(e){if("Label"===e.renderable.type){var t="Label"===e.renderable.type&&"labelType"in e.renderable.data&&("Surface"===e.renderable.data.labelType||"Marker"===e.renderable.data.labelType);i[n].drawn.push({real:e,position:"position"in e?e.position:r.position,self:t})}})):"continue"};for(var s in t.rendered){o(s)}D.math.ellipsoidVisibilityCheck(i,e.frame.position,e.frame.orientation);for(var u in i)t.rendered[u].visible=i.visible,i[u].drawn.forEach(function(e){e.real.visible=e.visible});return l(e,a),D.settings.usePainters&&(a=this.paintersSort(a,e)),h.updateLabelSystem(e),a}var m=n(10),f=n(3),D=n(4),N=n(18),h=n(19),T={fetch:n(36),"static":n(39)},y={},L=[];f.scene.tags&&(L=L.concat(f.scene.tags.split(",")));var v=[];f.scene.hooks&&(v=v.concat(f.scene.hooks.split(","))),0===v.length&&(v=["static","fetch"]),N.components.scene=function(e){for(var t in e)switch(t){case"load":o(e[t]);break;default:console.error("scene/Scene update hook: Unknown value",t)}};var w=[],E={},I={},j=function(e,t){var n=[],r=[],a=[];for(var i in e){var o=!1,s=[0,0,0],u=!1;if("boundingEllipsoid"in e[i].renderable?(o=!0,s=e[i].renderable.boundingEllipsoid):"ellipsoid"in e[i].id.node&&(o=!0,s=e[i].id.node.ellipsoid),o&&"Light"!==e[i].renderable.type)if("isOrbit"in e[i].renderable)u=e[i].renderable.isOrbit;else{var c=D.math.getTranslation(e[i].id.node.frame.rootData[t.id].thisToRoot);n.push({position:e[i].matrix[3].slice(0,3),printPosition:c,ellipsoid:s,renderable:e[i],isOrbit:u})}else r.push([e[i]]),a.push({near:t.near,far:t.far})}for(var l=0;l<n.length;l++)if(Math.max.apply(null,n[l].ellipsoid)>D.math.vNorm(n[l].position))n[l].near=t.near,n[l].far=Math.max.apply(null,n[l].ellipsoid);else{var d=D.math.surfacePointJS(n[l].ellipsoid,n[l].position),M=D.math.vSub(d,n[l].position);n[l].near=M[2],M=D.math.vMul(n[l].position,-1);var p=D.math.surfacePointJS(n[l].ellipsoid,M),A=D.math.vSub(p,M);M=D.math.vMul(M,2),A=D.math.vAdd(A,M),n[l].far=A[2],n[l].far<0&&(n[l].far=n[l].near,n[l].near=t.near)}for(var m=n.length-1;m>=0;m--)for(var f=1;f<=m;f++)if(n[f-1].near<n[f].near){var N=n[f-1];n[f-1]=n[f],n[f]=N}for(var h=0;h<n.length;h++)n[h].far<t.near||n[h].near>t.far?(n.splice(h,1),h--):(n[h].near<t.near&&(n[h].near=t.near),n[h].far>t.far&&(n[h].far=t.far));for(var T=[],y=0;y<n.length;y++){var L=[];L.push(n[y]),y--;for(var v=0;v<L.length;v++)for(var w=y+1;w<n.length;w++){var E=L[v].near<=n[w].far&&L[v].near>=n[w].near,I=L[v].far<=n[w].far&&L[v].far>=n[w].near,j=n[w].near<=L[v].far&&n[w].near>=L[v].near;(E||I||j)&&g(L[v],n[w])&&(L.push(n[w]),n.splice(w,1),w--)}T.push(L)}for(var x=0;x<T.length;x++){for(var b=T[x][0].near,C=T[x][0].far,S=0;S<T[x].length;S++)T[x][S].near<b&&(b=T[x][S].near),T[x][S].far>C&&(C=T[x][S].far);a.push({near:b,far:C})}for(var z=0;z<T.length;z++){for(var O=[],k=0;k<T[z].length;k++)O.push(T[z][k].renderable);r.push(O)}return r.push(a),r};e.exports={scene:y,tags:L,hooks:v,modules:T,request:s,get:r,has:a,load:o,update:i,clearFrameData:u,cameraData:E,walk:c,getRenderableObjects:A,fixedRenderables:I,paintersSort:j}},function(e,t,n){var r=n(11),a=n(4),i=n(16);e.exports=function(e){var t={name:e,contents:{}};for(var n in r)t[n]=new r[n](t);return t.triggers=[],t.handlingTriggers=!1,t.addTrigger=function(e,n){t.loaded&&n(t,e),t.triggers.push({callback:n,time:e})},t.handleTriggers=function(){t.handlingTriggers||(t.handlingTriggers=!0,t.triggers.forEach(function(e){e.callback(t,e.time)}),t.triggers=[],t.handlingTriggers=!1)},t.triggerLoad=function(){a.scene.request(t)},t.updateFrames=function(e,n){if(!t.loaded)return void t.triggerLoad(e.clock);var r=t.frame.update(e.clock);if(t.relationship.parent&&t.relationship.parent!==n&&t.relationship.parent.updateFrames(e,t),r)for(var a in t.relationship.children){var i=t.relationship.children[a];i!==n&&i.updateFrames(e,t)}},t.transformToFrame=function(e,n,r){if(t.loaded&&t.frame.updateRootData(e,n)){t.relationship.parent&&t.relationship.parent!==r&&t.relationship.parent.transformToFrame(e,n,t);for(var a in t.relationship.children){var i=t.relationship.children[a];i!==r&&i.transformToFrame(e,n,t)}}},t.postCameraUpdate=function(e,n){if(t.loaded){t.renderables&&t.renderables.update(e),t.relationship.parent&&t.relationship.parent!==n&&t.relationship.parent.postCameraUpdate(e,t);for(var r in t.relationship.children){var a=t.relationship.children[r];a!==n&&a.postCameraUpdate(e,t)}}},t.load=function(e){e=i.replace(e),console.verboseInfo("scene/Node.load: loading "+t.name);for(var n in e)try{n in t&&t[n].load?t[n].load(e[n]):n in r?(t[n]=new r[n](t),t[n].load(e[n])):(console.warn("Node.load: In node",t.name,"unknown component",n,"should it be moved to the static section?"),t[n]=JSON.parse(JSON.stringify(e[n])))}catch(a){console.exception("Node.load: In node "+t.name+" failed to load component "+n,a)}return t.loaded?void console.verboseInfo("scene/Node.load: updated "+t.name):(console.verboseInfo("scene/Node.load: initial load for "+t.name),t.loaded=!0,t.contents=e,void t.handleTriggers())},t}},function(e,t,n){var r=e.exports;r.relationship=n(12),r.renderables=n(13),r.context=n(14),r.frame=n(15),r["static"]=function(e){var t={node:e};return t.load=function(e){for(var n in e)t.node[n]=JSON.parse(JSON.stringify(e[n]))},t}},function(e,t,n){var r=n(4),a={};e.exports=function(e){var t={node:e,children:{}};return Object.defineProperty(t,"parent",{get:function(){return a[t.node.name]},set:function(e){var n=t.node.name;if(a[n]){var i=a[n];i.relationship.children[n]&&delete i.relationship.children[n]}a[n]=e,e&&(e.relationship.children[n]=t.node),r.scene.clearFrameData()}}),t.load=function(e){for(var n in t.children)e.children.indexOf(n)==-1&&delete t.children[n];if("children"in e&&e.children.constructor===Array&&e.children.forEach(function(e){var n=r.scene.get(e);t.children[e]=n,a[e]=t.node}),e.parent){var i=r.scene.get(e.parent);i.addTrigger(null,function(){t.parent=i}),i.triggerLoad()}},t}},function(e,t,n){function r(e,t){var n={enabled:!("enabled"in e)||e.enabled,json:{},ranges:[],renderables:{},name:t};return n.addRenderable=function(e,t,r){return t in n.json&&(t.match(/(\d+)+$/)?t=t.replace(/(\d+)+$/,function(e,t){return parseInt(t)+1}):t+="0"),n.json[t]=JSON.parse(JSON.stringify(e)),r.renderables.push(t),t},n.emplaceRenderable=function(e,t,r,a){return r in n.json&&(r.match(/(\d+)+$/)?r=r.replace(/(\d+)+$/,function(e,t){return parseInt(t)+1}):r+="0"),n.json[r]=JSON.parse(JSON.stringify(e)),a.renderables.push(r),n.renderables[r]=t,r},n.removeRenderable=function(e){var t=null,r=null,a=null;e in n.json&&(t=n.json[e],delete n.json[e]);for(var i in n.ranges){a=n.ranges[i];for(var o in a.renderables)e==a.renderables[o]&&delete a.renderables[o]}e in n.renderables&&(r=n.renderables[e],delete n.renderables[e]);var s={json:t,renderable:r};return s},n.getRange=function(e){var t;for(var r in n.ranges)if(t=n.ranges[r],t.end==e.end&&t.start==e.start)break;return t||console.log("Range object Not Found, Params provided: ",e),t},n.resolveRanges=function(){var e=[];for(var t in n.ranges){var r=n.ranges[t];r.name=t,e.push(r)}e=e.sort(function(e,t){var n=e.end-t.end;return 0===n?e.start-t.start:n});for(var a=0;a<e.length-1;a++)e[a].end===1/0&&(e[a].end=e[a+1].start);for(a=1;a<e.length;a++)e[a].start=e[a-1].end;n.ranges=e},n.getRenderables=function(e,t){var r=[];for(var a in n.ranges){var i=n.ranges[a],o=e.getEnd(i.end,n.name);if(!(i.start>t||o<=t))for(var s in i.renderables){var u=i.renderables[s];if(u in n.renderables){var c=n.renderables[u];"enabled"in c&&!c.enabled||c.valid&&r.push(c)}}}return r},n.getRenderable=function(e,t){var r;return t in n.json?(!(t in n.renderables)&&t in n.json&&(!n.json[t]||"null"===n.json[t].type||n.json[t].failed?r=null:(r=new a.Renderable(a.app.core,e.node.context,n.json[t]),"boundingEllipsoid"in n.json[t]&&(r.boundingEllipsoid=n.json[t].boundingEllipsoid),"isOrbit"in n.json[t]&&(r.isOrbit=n.json[t].isOrbit),r||(console.error("scene/components/renderables.update: Failed to instantiate renderable",t," in lod ",n," in node ",e.node.name),n.json[t].failed=!0),"enabled"in n.json[t]&&(r.enabled=n.json[t].enabled),"cameras"in n.json[t]&&(r.cameras=JSON.parse(JSON.stringify(n.json[t].cameras)))),n.renderables[t]=r,e.updateTransforms()),r=n.renderables[t]):r},n.updateRenderableTransform=function(e,t,r){var a,i;r in n.json&&(a=n.json[r],i=n.getRenderable(e,r),null!==a||void 0!==a?a.transform=t:console.error("LOD updateRenderableTransform: Json for Renderable is null or undefined: ",r),null!==i||void 0!==i?i.transform=t:console.error("LOD updateRenderableTransform: Renderable is null or undefined: ",r))},n.update=function(e,r,i){for(var o in n.ranges){var s=n.ranges[o],u=e.getEnd(s.end,t);if(!(s.start>i||u<=i))for(var c in s.renderables){var l,d=s.renderables[c];!(d in n.renderables)&&d in n.json&&(!n.json[d]||"null"===n.json[d].type||n.json[d].failed?l=null:(l=new a.Renderable(a.app.core,e.node.context,n.json[d]),"boundingEllipsoid"in n.json[d]&&(l.boundingEllipsoid=n.json[d].boundingEllipsoid),"isOrbit"in n.json[d]&&(l.isOrbit=n.json[d].isOrbit),l||(console.error("scene/components/renderables.update: Failed to instantiate renderable",d," in lod ",n," in node ",e.node.name),n.json[d].failed=!0),"enabled"in n.json[d]&&(l.enabled=n.json[d].enabled),"cameras"in n.json[d]&&(l.cameras=JSON.parse(JSON.stringify(n.json[d].cameras)))),
n.renderables[d]=l,e.updateTransforms()),l=n.renderables[d],l&&(l.valid=l.postCameraUpdate(r))}}},n}var a=n(4);e.exports=function(e){var t={node:e,lod:{}};return t.transform={enabled:!1},t.resolveRanges=function(e){if(e)t.lod[e].resolveRanges();else for(var n in t.lod)t.lod[n].resolveRanges()},t.addRenderable=function(e,n,r,a){n=n?n:"renderable",r=r?r:"lod0",a=a?a:{start:-(1/0),end:1/0},r in t.lod||t.addLOD(a,r);var i=t.lod[r],o=i.getRange(a);o||(o={start:"start"in e?e.start:-(1/0),end:"end"in e?e.end:1/0,renderables:[]},i.ranges.push(o));var s=i.addRenderable(e,n,o);return t.resolveRanges(),s},t.emplaceRenderable=function(e,n,r,a,i){r=r?r:"renderable",a=a?a:"lod0",i=i?i:{start:-(1/0),end:1/0},a in t.lod||t.addLOD(i,a);var o=t.lod[a],s=o.getRange(i);s||(s={start:"start"in e?e.start:-(1/0),end:"end"in e?e.end:1/0,renderables:[]},o.ranges.push(s));var u=o.emplaceRenderable(e,n,r,s);return t.resolveRanges(),u},t.removeRenderable=function(e,n){var r,a=0,i=null;if(n)return n in t.lod?(r=t.lod[n],i=r.removeRenderable(e)):(console.warn("RemoveRenderable: lodKey not Found in Renderables.lod. lodKey: ",n),null);for(var o in t.lod)r=t.lod[o],e in r.renderables&&(a+=1,i||(i=r.removeRenderable(e)));return a>1&&console.warn("RemoveRenderable: Found more than one Renderable object. Removing the first renderable found."),i},t.deleteRenderable=function(e,n){var r=null,a=null;if(r=t.removeRenderable(e,n)){var i=r.renderable;a=r.json,i&&i["delete"]()}return a},t.updateRenderableTransform=function(e,n,r){var a;if(r){if(!(r in t.lod))return void console.warn("UpdateRenderableTransform: lodKey not Found in Renderables.lod. lodKey: ",r);a=t.lod[r],n in a.json&&(r in t.transform||(t.transform[r]={}),t.transform[r][n]=e)}else for(var i in t.lod)a=t.lod[i],n in a.json&&(i in t.transform||(t.transform[i]={}),t.transform[i][n]=e);t.updateTransforms()},t.getRenderable=function(e,n){var r,a,i=0;if(n)return n in t.lod?(a=t.lod[n],r=a.getRenderable(t,e)):(console.warn("GetRenderable: lodKey not Found in Renderables.lod. lodKey: ",n),null);for(var o in t.lod)a=t.lod[o],e in a.renderables&&(i+=1,void 0===r&&(r=a.getRenderable(t,e)));return i>1&&console.warn("GetRenderable: Found more than one Renderable object. Returning the first renderable found."),r},t.lodEnabled=function(e,n){return e in t.lod&&(t.lod[e].enabled=n,!0)},t.addLOD=function(e,n,a){n in t.lod||(t.lod[n]=r(e,n));var i={start:"start"in e?e.start:-(1/0),end:"end"in e?e.end:1/0,renderables:[]};if(t.lod[n].ranges.push(i),e.renderables){if("type"in e.renderables)return void t.addRenderable(e.renderables,a?a:n,n,i);for(var o in e.renderables)t.addRenderable(e.renderables[o],o,n,i)}},t.load=function(e){if("renderables"in e)return t.addLOD(e,"lod0"),void t.resolveRanges();for(var n in e)if(e[n].constructor===Array)e[n].forEach(function(e){t.addLOD(e,n)});else if("renderables"in e[n])t.addLOD(e[n],n);else for(var r in e[n])t.addLOD(e[n][r],n,r);t.resolveRanges()},t.getEnd=function(e,n){var r=e,a=!1,i=1;if(t.transform.enabled&&"scale"in t.transform&&(a=!0,i=3===t.transform.scale.length?Math.max(t.transform.scale[0],t.transform.scale[1],t.transform.scale[2]):t.transform.scale),n in t.transform)for(var o in t.transform[n]){var s=t.transform[n][o],u=1;if("scale"in s&&(u=1===s.scale.length?s.scale:Math.max(s.scale[0],s.scale[1],s.scale[2])),"override"in s&&s.override){var c=e+Math.log(u);c>r&&(r=c)}else{var l=e+Math.log(u*i);l>r&&(r=l)}}else{var d=e+Math.log(i);d>r&&(r=d)}return r},t.getTransform=function(e){var t=[1,1,1],n=[0,0,0],r=[0,0,0,1],a=!1,i=!1;if(!("enabled"in e&&e.enabled))return{enabled:i};if(i=!0,"scale"in e)if(3===e.scale.length)for(var o=0;o<3;o++)t[o]=e.scale[o];else for(var s=0;s<3;s++)t[s]=e.scale;if("translate"in e&&3===e.translate.length)for(var u=0;u<3;u++)n[u]=e.translate[u];if("rotate"in e&&4===e.rotate.length)for(var c=0;c<4;c++)r[c]=e.rotate[c];return"relativeToParent"in e&&(a=e.relativeToParent),{scale:t,translate:n,rotate:r,enabled:i,relativeToParent:a}},t.updateTransforms=function(){var e=t.getTransform(t.transform);for(var n in t.lod)if(n in t.transform)for(var r in t.lod[n].renderables){var a="ignoreNodeTransform"in t.lod[n].renderables[r].transform;if(!a||!t.lod[n].renderables[r].transform.ignoreNodeTransform)if(r in t.transform[n]){var i=t.getTransform(t.transform[n][r]);"override"in t.transform[n][r]&&t.transform[n][r].override?t.lod[n].renderables[r].transform=i:t.lod[n].renderables[r].transform=t.combineTransforms(e,i)}else t.lod[n].renderables[r].transform=e}else for(var o in t.lod[n].renderables){var s="ignoreNodeTransform"in t.lod[n].renderables[o].transform;s&&t.lod[n].renderables[o].transform.ignoreNodeTransform||(t.lod[n].renderables[o].transform=e)}},t.combineTransforms=function(e,t){if(!t.enabled)return e;if(!e.enabled)return t;var n=[e.scale[0]*t.scale[0],e.scale[1]*t.scale[1],e.scale[2]*t.scale[2]],r=[t.translate[0]*e.scale[0]+e.translate[0],t.translate[1]*e.scale[1]+e.translate[1],t.translate[2]*e.scale[2]+e.translate[2]],i=a.math.qMulQ(e.rotate,t.rotate);return{scale:n,translate:r,rotate:i,enabled:!0}},t.update=function(e){if(t.node.loaded&&t.node.frame.rootData[e.id]){var n=Math.log(t.node.frame.getDistance(e));for(var r in t.lod){var a=t.lod[r];a.enabled&&a.update(t,e,n)}}},t.get=function(e){if(t.node.loaded&&t.node.frame.rootData[e.id]){var n={renderables:[],transform:t.node.frame.rootData[e.id].thisToRoot},r=Math.log(t.node.frame.getDistance(e));for(var a in t.lod){var i=t.lod[a];i.enabled&&(n.renderables=n.renderables.concat(i.getRenderables(t,r)))}return n}},t}},function(e,t,n){var r=n(4);e.exports=r.DataContext.extend("DataContext",{__construct:function(){this.__parent.__construct.call(this,r.app)},load:function(e){for(var t in e)for(var n in e[t])this.emplace(t,n,e[t][n])}})},function(e,t,n){var r=n(11),a=n(4);e.exports=function(e){var t={node:e,forceParent:null,lastUpdate:NaN,LCA:{},rootData:{}};return t.invalidate=function(){t.lastUpdate=NaN,t.LCA={},t.rootData={},t.last&&delete t.last},t.load=function(e){"parent"in e&&"string"==typeof e.parent&&(t.forceParent=a.scene.get(e.parent));var n=[0,0,0];"position"in e&&(n=e.position);var i=[0,0,0,1];"orientation"in e&&(i=e.orientation),t.node.context||(t.node.context=new r.context(t.node)),t.node.context.emplace("position","frame",n),t.node.context.emplace("orientation","frame",i),t.invalidate()},Object.defineProperty(t,"parent",{get:function(){return t.forceParent?t.forceParent:t.node.relationship.parent}}),t.get=function(e){if(t.last&&t.last.time===e.value)return t.last;var n={parent:t.parent,position:t.node.context.get("position","frame"),orientation:t.node.context.get("orientation","frame"),time:e.value};return n.position&&(n.position=n.position.evaluate(e)),n.orientation&&(n.orientation=n.orientation.evaluate(e)),n.position&&n.orientation?(t.last=n,n):void 0},t.update=function(e){if(!t.node.loaded)return!1;if(t.lastUpdate===e.time.value)return!0;if(!t.node.context.contains("position","frame")||!t.node.context.contains("orientation","frame"))return!1;t.node.context.get("position","frame").update(e),t.node.context.get("orientation","frame").update(e);var n=t.get(e.time);if(!n)return t.node.context.erase("vector3","frame"),t.node.context.erase("quaternion","frame"),t.node.context.erase("affine3","parentToThis"),t.node.context.erase("affine3","thisToParent"),!1;var r=a.frame.getTransformInverse(n),i=a.frame.getTransform(n);return t.node.context.emplace("vector3","frame",n.position),t.node.context.emplace("quaternion","frame",n.orientation),t.node.context.emplace("affine3","parentToThis",r),t.node.context.emplace("affine3","thisToParent",i),t.lastUpdate=e.time.value,!0},t.findLCA=function(e){for(var n=[],r=[],a=t.node;a&&a.loaded;a=a.frame.parent){if(a.frame.LCA[e.name])return t.LCA[e.name]=a.frame.LCA[e.name],t.LCA[e.name];r.push(a)}for(a=e;a&&a.loaded;a=a.frame.parent)n.push(a);if(n.length!==r.length)for(var i=n.length>r.length?n:r,o=Math.abs(n.length-r.length);o--;)i.shift();return t.LCA[e.name]=n.length?n[0]:null,t.LCA[e.name]},t.getDistance=function(e){if(t.node.loaded&&t.rootData[e.id]){var n=a.math.getTranslation(t.rootData[e.id].thisToRoot);return n=a.math.qMulV(a.math.conjugate(e.frame.orientation),a.math.vSub(n,e.frame.position)),a.math.vNorm(n)}},t.updateRootData=function(e,n){if(!t.node.loaded||!e.parent||!e.parent.loaded)return!1;var r=e.parent.name;if(!t.LCA[r]&&!t.findLCA(e.parent))return!1;if(t.rootData[n.id])return!0;var i,o,s;if(!t.LCA[r].frame.rootData[n.id]){var u=e.parent;if(u.frame.lastUpdate!==e.time&&!u.frame.update({time:{value:e.time},rate:0}))return!1;u.frame.rootData[n.id]||(s={parent:e.parent,position:e.position,orientation:e.orientation,time:e.time},i=a.frame.getTransform(s),o=a.frame.getTransformInverse(s),u.context.replace("affine3","rootToThis"+n.id,i),u.context.replace("affine3","thisToRoot"+n.id,o),u.frame.rootData[n.id]={frame:s,rootToThis:i,thisToRoot:o});for(var c=u,l=u.frame.rootData[n.id];u!==t.LCA[r];){if(!u.frame.last.parent&&!u.frame.update({time:{value:e.time},rate:0}))return!1;u=u.frame.last.parent;var d=l;if(!u)return!1;if(u.frame.lastUpdate!==e.time&&!u.frame.update({time:{value:e.time},rate:0}))return!1;u.frame.rootData[n.id]||(i=a.math.aMulA(c.context.get("affine3","thisToParent"),d.rootToThis),o=a.math.aMulA(d.thisToRoot,c.context.get("affine3","parentToThis")),u.context.replace("affine3","rootToThis"+n.id,i),u.context.replace("affine3","thisToRoot"+n.id,o),s={parent:e.parent,position:a.math.getTranslation(o),orientation:a.math.qMulQ(u.frame.last.orientation,d.frame.orientation),time:e.time},u.frame.rootData[n.id]={frame:s,rootToThis:i,thisToRoot:o}),l=u.frame.rootData[n.id],c=u}}if(t.node===t.LCA[r])return!0;if(t.lastUpdate!==e.time&&!t.update({time:{value:e.time},rate:0}))return!1;if(t.parent.frame.lastUpdate!==e.time)return console.error("scene/component/frame/updateRootData: Children came before parents"),!1;var M=t.parent.frame.rootData[n.id];return i=a.math.aMulA(t.node.context.get("affine3","parentToThis"),M.rootToThis),o=a.math.aMulA(M.thisToRoot,t.node.context.get("affine3","thisToParent")),t.node.context.replace("affine3","rootToThis"+n.id,i),t.node.context.replace("affine3","thisToRoot"+n.id,o),s={parent:e.parent,position:a.math.getTranslation(o),orientation:a.math.qMulQ(t.last.orientation,M.frame.orientation),time:e.time},t.rootData[n.id]={frame:s,rootToThis:i,thisToRoot:o},!0},t.convert=function(e,n){var r,i=n;if("undefined"!=typeof i&&"id"in i&&(r=i,i=t.lastUpdate),"undefined"==typeof i?i="undefined"==typeof e.time?t.lastUpdate:e.time:"number"!=typeof i&&"value"in i&&(i=i.value),isNaN(i)&&(i=e.time),!r)for(var o in t.rootData)t.rootData[o].frame.time===i&&(r={id:o});"time"in e&&i!==e.time&&console.warn("scene/components/frame.convert: Asked to convert frames across time");var s={parent:e.parent,position:e.position.slice(),orientation:e.orientation.slice(),time:i};if(e.parent===t.node)return s;if(s.parent=null,!e.parent||!t.node.loaded||!e.parent.loaded)return s;var u,c;if(r)u=t.node.context.get("affine3","rootToThis"+r.id),c=e.parent.context.get("affine3","thisToRoot"+r.id);else{console.warn("scene/components/frame.convert: Expensive frame transform. Try re-using global update data by specifying a root id or a recent update time");var l=t.findLCA(e.parent),d=e.parent.frame.findLCA(t.node);if(!l||!d)return s;var M;for(u=a.frame.getTransform({parent:null,position:[0,0,0],orientation:[0,0,0,1]}),M=t.parent;M!==l;M=M.frame.parent){if(!M||!M.loaded||!M.context.contains("affine3","parentToThis"))return s;u=a.math.aMulA(u,M.context.get("affine3","parentToThis"))}for(c=a.frame.getTransform({parent:null,position:[0,0,0],orientation:[0,0,0,1]}),M=e.parent;M!==l;M=M.frame.parent){if(!M||!M.loaded||!M.context.contains("affine3","thisToParent"))return s;c=a.math.aMulA(M.context.get("affine3","thisToParent"),c)}}return u&&c?(s.parent=t.node,s.position=a.math.aMulV(u,a.math.aMulV(c,e.position)),s.orientation=a.math.qMulQ(a.math.getRotation(u),a.math.qMulQ(a.math.getRotation(c),e.orientation)),s):s},t.load({}),t}},function(e,t,n){function r(e,t){if(e[0]!==e[0].toUpperCase())return void console.error("scene/template: Template named must begin with Upper case");var n=i[e];if(n){if(t||(t={}),"function"==typeof n)n=n(t);else{for(var a in n.parameters)a in t||(t[a]=n.parameters[a]);for(a in t)a[0]===a[0].toUpperCase()&&console.error("scene/template: Upper case parameter names are not allowed:",a,"in",e);n=n.value}return JSON.parse(JSON.stringify(n),function(e,n){var a;if("string"==typeof n&&"$"===n[0]){var i=n.slice(1);return i[0]===i[0].toUpperCase()?"0"===e?n:(a=r(i),"undefined"!=typeof a?a:n):i in t?JSON.parse(JSON.stringify(t[i])):(console.warn("scene/template: Missing parameter","$"+i),n)}return Array.isArray(n)&&n.length>=1&&"string"==typeof n[0]&&"$"===n[0][0]?(n.length>2&&console.warn("scene/template: Template template array has extra elements:",n),a=r(n[0].slice(1),n[1]),"undefined"!=typeof a?a:n):n})}}function a(e){return JSON.parse(JSON.stringify(e),function(e,t){var n;return"string"==typeof t&&"0"!==e&&"$"===t[0]?n=r(t.slice(1)):Array.isArray(t)&&t.length>=1&&"string"==typeof t[0]&&"$"===t[0][0]&&(t.length>2&&console.warn("scene/template: Template array has extra elements:",t),n=r(t[0].slice(1),t[1])),"undefined"!=typeof n&&(t=n),t})}var i=n(17);e.exports={templates:i,getTemplate:r,replace:a}},function(e,t){e.exports={RenderableStarsAndGalaxies:{value:{type:"particles",attributes:{meshColor:{load:["var f = function(buffer, count, stride, ctx) {","  var current = 0;","  var stars = ctx.data.object.stars;","  var names = Object.keys(stars);","  while(current < names.length) {","    buffer[current * stride + 0] = stars[names[current]].r/255;","    buffer[current * stride + 1] = stars[names[current]].g/255;","    buffer[current * stride + 2] = stars[names[current]].b/255;","    current++;","  }","}; f"],type:"vec3"},absMag:{load:["var f = function(buffer, count, stride, context) {","  var current = 0;","  var stars = context.data.object.stars;","  var names = Object.keys(stars);","  while(current < names.length) {","    buffer[current * stride + 0] = stars[names[current]].absMag;","    current++;","  }","}; f"],type:"float"},position:{load:["var f = function(buffer, count, stride, context) {","var current = 0;","var stars = context.data.object.stars;","var names = Object.keys(stars);","while(current < names.length) {","   buffer[current * stride + 0] = stars[names[current]].x;","   buffer[current * stride + 1] = stars[names[current]].y;","   buffer[current * stride + 2] = stars[names[current]].z;","   current++;","   }","}; f"],type:"vec3"}},material:{lightingModel:"none",bindings:{sampler2D:{color:{texture:"data://textures/gradientBall.png",uv:"gl_PointCoord"}},"function":{"float":{fov:["var f = function(context, camera) {","   return camera.fov;","}; f"]}}},channel:{pointSize:{input:{"float":["absMag"]},code:"$sizingFunction",uniform:{vec2:["viewport"],"float":["fov"]}}},vertexDefaults:["color","Position","pointSize","absMag:float"],vertex:["vertex/star"]},queue:"transparent",ready:["var f = function(context) {","   var stars = {};","   var ctx = context.get('JSDataSource');","   if ( ctx && Object.keys(ctx).every(function(d, i) { var item = ctx[d]; return item && item.data && Object.keys(item.data).length; } ) ) {","     var datasets = ctx;","     var datasetNames = Object.keys(ctx);","     datasetNames.forEach( function (d) {","       Object.keys(datasets[d].data).forEach ( function (entry) {","       stars[d+entry] = datasets[d].data[entry];","     });","    });","    context.data.object = context.data.object || {};","    context.data.object.stars = stars;","    return true;","   }","}; f"],states:[{enabled:!0,mask:!1,type:"depth"},{destination:"one",equation:"add",source:"srcAlpha",type:"blend"}],uniforms:{count:{load:["var f = function(context) {","   return context.data.object.stars ? Object.keys(context.data.object.stars).length - 2 : 0","}; f"],type:"int"}}},parameters:{sizingFunction:[]}},RenderableKeplerOrbitLines:{value:{boundingEllipsoid:[0,0,0],isOrbit:!0,type:"particles",transform:{relativeToParent:!0,enabled:!0,ignoreNodeTransform:!0},queue:"orbit",primitive:"lineStrip",attributes:{position:{type:"vec3",load:["var f = function(buffer, count, stride, context) {","   if(!context.contains('kepler', 'orbit')) {","       console.error('RenderableKeplerOrbitLines: missing kepler orbit data in context');","       return false;","   }","   for(var item = 0; item < count; item++) {","       var pos = __ranger.math.keplerOrbit(context.data.kepler.orbit, item / (count - 1.0));","       buffer[item * stride + 0] = pos[0];","       buffer[item * stride + 1] = pos[1];","       buffer[item * stride + 2] = pos[2];","   }","}; f"]},Index:{type:"float",load:["var f = function(buffer, count, stride, context) {","   if(!context.contains('kepler', 'orbit')) {","       console.error('RenderableKeplerOrbitLines: missing kepler orbit data in context');","       return false;","   }","   for(var item = 0; item < count; item++)","       buffer[item * stride] = item / (count - 1.0);","}; f"]}},uniforms:{count:{type:"int",value:"$count"},curIndex:{type:"float",value:0,update:["var f = function(camera, value, context) {","   if(!context.contains('kepler', 'orbit')) {","       console.error('RenderableKeplerOrbitLines: missing kepler orbit data in context');","       return 0;","   }","    value = ((camera.clock.time.value - context.data.kepler.orbit.epoch) / context.data.kepler.orbit.period) % 1.0;","    if(value < 0)","       value += 1;","","   return value;","}; f"]}},material:{lightingModel:"none",bindings:{"float":{curIndex:0},vec4:{color:"$color"}},channel:{color:{uniform:{"float":["curIndex"]},operations:[{op:"assign",sample:"ret * mod(vIndex - curIndex, 1.0)",sampleIsCall:!1}]}},vertexDefaults:["Position","Index:float"]}},parameters:{count:1e3,color:[1,1,1,1]}},RenderableProjectedMap:{value:{type:"projectedMap",maxVerts:"$maxVerts",projection:"$projection",normal:"$normal",tangent:"$tangent",renderBack:"renderBack",material:"$material"},parameters:{maxVerts:75e3,normal:6,tangent:!0,renderBack:!0}},MaterialPhongTexture:{value:{bindings:{vec4:{color:"$color",specular:"$specularColor"},"float":{specularStrength:"$specularStrength",specularExponent:"$specularExponent"},sampler2D:{color:{uv:"vuv0",texture:"$texture"}}}},parameters:{color:[1,1,1,1],specularColor:[1,1,1,1],specularStrength:0,specularExponent:1}},MaterialNeutralPhongTexture:{value:{bindings:{vec4:{color:"$color",specular:"$specularColor",neutralLighting:"$neutralColor"},"float":{specularStrength:"$specularStrength",specularExponent:"$specularExponent"},sampler2D:{color:{uv:"vuv0",texture:"$texture"}}}},parameters:{color:[1,1,1,1],specularColor:[1,1,1,1],neutralColor:[1,1,1,1],specularStrength:0,specularExponent:1}},MaterialNeutralPhongTextureCube:{value:{channel:{color:{include:["channel/cubemap"],uniform:{sampler2D:["cube0","cube1","cube2","cube3","cube4","cube5"]},operations:[{op:"assign",sample:"sampleCube(cube0, cube1, cube2, cube3, cube4, cube5, getCubeUV(vuv0))",sampleIsCall:!1}]}},bindings:{vec4:{color:"$color",specular:"$specularColor",neutralLighting:"$neutralColor"},vec3:{ambientLight:"$ambientLight"},"float":{specularStrength:"$specularStrength",specularExponent:"$specularExponent"},sampler2D:{cube0:{uv:"vuv0",texture:["$cubeTemplate",{index:0,params:"$cubeTemplateParams"}]},cube1:{uv:"vuv0",texture:["$cubeTemplate",{index:1,params:"$cubeTemplateParams"}]},cube2:{uv:"vuv0",texture:["$cubeTemplate",{index:2,params:"$cubeTemplateParams"}]},cube3:{uv:"vuv0",texture:["$cubeTemplate",{index:3,params:"$cubeTemplateParams"}]},cube4:{uv:"vuv0",texture:["$cubeTemplate",{index:4,params:"$cubeTemplateParams"}]},cube5:{uv:"vuv0",texture:["$cubeTemplate",{index:5,params:"$cubeTemplateParams"}]}}}},parameters:{color:[1,1,1,1],specularColor:[1,1,1,1],neutralColor:[1,1,1,1],specularStrength:0,specularExponent:1,ambientLight:[.1,.1,.1],cubeTemplate:"$StringPrefixIndexSuffix",cubeTemplateParams:{}}},MaterialPhongCubeSpecularNormTexture:{value:{channel:{color:{include:["channel/cubemap"],uniform:{sampler2D:["cube0","cube1","cube2","cube3","cube4","cube5"]},operations:[{op:"assign",sample:"sampleCube(cube0, cube1, cube2, cube3, cube4, cube5, getCubeUV(vuv0))",sampleIsCall:!1}]},normal:{include:["channel/unpackNormal","channel/unpackedTangent"],uniform:{sampler2D:["norm"]},operations:[{op:"assign",sample:"unpackNormal(texture2D(norm, vuv0))",sampleIsCall:!1,extract:"normalFromTangent",extractIsCall:!0}]}},bindings:{vec4:{color:"$color",specular:"$specularColor"},"float":{specularStrength:"$specularStrength",specularExponent:"$specularExponent"},sampler2D:{cube0:{uv:"vuv0",texture:["$cubeTemplate",{index:0,params:"$cubeTemplateParams"}]},cube1:{uv:"vuv0",texture:["$cubeTemplate",{index:1,params:"$cubeTemplateParams"}]},cube2:{uv:"vuv0",texture:["$cubeTemplate",{index:2,params:"$cubeTemplateParams"}]},cube3:{uv:"vuv0",texture:["$cubeTemplate",{index:3,params:"$cubeTemplateParams"}]},cube4:{uv:"vuv0",texture:["$cubeTemplate",{index:4,params:"$cubeTemplateParams"}]},cube5:{uv:"vuv0",texture:["$cubeTemplate",{index:5,params:"$cubeTemplateParams"}]},norm:{uv:"vuv0",texture:"$normalTexture"},specular:{uv:"vuv0",texture:"$specularTexture"}}}},parameters:{color:[1,1,1,1],specularColor:[1,1,1,1],specularStrength:0,specularExponent:1,cubeTemplate:"$StringPrefixIndexSuffix",cubeTemplateParams:{},normTemplate:"$StringPrefixIndexSuffix",normTemplateParams:{}}},StringPrefixIndexSuffix:function(e){for(var t="",n="",r="";e;e=e.params)"prefix"in e&&(t=e.prefix),"index"in e&&(n=e.index),"suffix"in e&&(r=e.suffix);return t+n+r},MaterialPhongTextureSpecularMap:{value:{bindings:{vec4:{color:"$color",specular:"$specularColor"},"float":{specularStrength:"$specularStrength",specularExponent:"$specularExponent"},sampler2D:{color:{uv:"vuv0",texture:"$texture"},specular:{uv:"vuv0",texture:"$specular"}}}},parameters:{color:[1,1,1,1],specularColor:[1,1,1,1],specularStrength:0,specularExponent:1}}}},function(e,t){function n(e,t){for(var n in e)n in r?r[n](e[n],t):console.error("update: unknown component",n)}var r={};e.exports={components:r,update:n}},function(e,t,n){function r(e){e||(e=["Node","Surface","Marker"]);for(var t,n=document.getElementsByClassName("rangerLabel"),r=0;r<n.length;r++)t=n[r],e.indexOf(t.labelType)>-1&&(t.style["pointer-events"]="none");for(var a in e)j[e[a]]=!1}function a(e){e||(e=["Node","Surface","Marker"]);for(var t,n=document.getElementsByClassName("rangerLabel"),r=0;r<n.length;r++)t=n[r],e.indexOf(t.labelType)>-1&&(t.style["pointer-events"]="auto");for(var a in e)j[e[a]]=!0}function i(e,t,n){e in E?E[e].push(t,n):(E[e]=T(),E[e].push(t,n))}function o(e,t,n){if(I.indexOf(e)<0){for(var r=document.getElementsByClassName("rangerLabel"),a=0;a<r.length;a++)r[a].addEventListener(e,function(e){e.preventDefault(),e.type in E&&E[e.type].trigger(e.target.node,e)});I.push(e)}void 0!==t&&void 0!==n&&i(e,t,n)}function s(e){e in E&&delete E[e]}function u(e,t){e in E&&E[e].remove(t)}function c(e,t){for(var n=0;n<I.length;n++){var r=I[n];e.addEventListener(r,function(e){e.preventDefault(),e.type in E&&E[e.type].trigger(t,e)})}e.onremove=function(){"onremove"in E&&E.onremove.trigger(t,e)},e.onadd=function(){"onadd"in E&&E.onadd.trigger(t,e)},N.addScrollEventListeners(e,h.IE),N.preventGestureEvents(e)}function l(e,t,n,r){var a=document.createElement("div");a.innerHTML=n.data.Text,a.node=t,a.labelType=n.data.labelType,a.name=n.data.Text,"System"===t.nodeType?a.style.color="rgb(255, 127, 51)":"Star"===t.nodeType?a.style.color="rgb(255, 127, 51)":"Planet"===t.nodeType&&(a.style.color="White"),n.data.color&&(a.style.color=n.data.color),c(a,t,e),a.className="nodeLabel rangerLabel";var i=document.createAttribute("eye");return i.value=r,a.setAttributeNode(i),t.interactable===!1&&(a.className+=" non-interactable"),a}function d(e,t,n,r){var a=document.createElement("div");a.className="surfaceDot",a.node=t,a.labelType=n.data.labelType,a.id="surfaceLabelContainer-"+n.data.id,a.name=n.data.name,a.innerHTML="&bull;";var i=document.createElement("div");i.className="surfaceLabel rangerLabel",i.node=t,i.labelType=n.data.labelType,i.name=n.data.name,i.id=n.data.id;var o=n.data.Text;""===o?a.style.display="none":a.style.display="",i.innerHTML=n.data.Text,i.displayText=o,n.data.color&&(a.style.color=n.data.color,i.style.color=n.data.color),c(i,t,e);var s=document.createAttribute("eye");return s.value=r,a.setAttributeNode(s),a.surfaceLabel=i,i.surfaceDot=a,a.onremove=i.onremove,a.onadd=i.onadd,a.appendChild(i),a}function M(e,t,n,r){var a=document.createElement("div");a.className="markerLabel",a.node=t,a.labelType=n.data.labelType,a.name=n.data.name,a.locationId=n.data.location_id,a.id="markerContainer-"+n.data.id;var i=document.createElement("div");i.className="marker rangerLabel",i.id=n.data.id,i.node=t,i.labelType=n.data.labelType,i.name=n.data.name,i.locationId=n.data.location_id;var o=document.createElement("img"),s=n.data.icon;o.src=s,o.className="markerSVG",o.id="markerIcon-"+n.data.id,c(i,t,e);var u=document.createAttribute("eye");return u.value=r,a.setAttributeNode(u),a.marker=i,a.onremove=i.onremove,a.onadd=i.onadd,a.appendChild(i),i.icon=o,i.appendChild(o),a}function g(e,t,n,r,a,i){var o;t.labelDiv||(t.labelDiv=[]),t.surfaceDivs||(t.surfaceDivs={}),t.markerDivs||(t.markerDivs={});var s=r.data.labelType;switch(s){case"Node":r.data.labelType="Node",void 0===t.labelDiv[i]&&(t.labelDiv[i]=l(e,t,r,i)),o=t.labelDiv[i],o.innerHTML=r.data.Text,o.labelType in j&&!j[o.labelType]&&(o.style["pointer-events"]="none");break;case"Marker":void 0===t.markerDivs[r.data.id]&&(t.markerDivs[r.data.id]=M(e,t,r,i)),o=t.markerDivs[r.data.id],o.name=r.data.name,o.marker.name=r.data.name,o.marker.locationId=r.data.location_id,o.marker.labelType in j&&!j[o.marker.labelType]&&(o.marker.style["pointer-events"]="none");break;case"Surface":void 0===t.surfaceDivs[r.data.id]&&(t.surfaceDivs[r.data.id]=d(e,t,r,i)),o=t.surfaceDivs[r.data.id];var u=r.data.Text;""===u?o.style.display="none":o.style.display="",r.data.Text!==o.surfaceLabel.displayText&&(o.surfaceLabel.innerHTML=r.data.Text,o.surfaceLabel.displayText=r.data.Text),o.surfaceLabel.labelType in j&&!j[o.surfaceLabel.labelType]&&(o.surfaceLabel.style["pointer-events"]="none");break;default:r.data.labelType="Node",void 0===t.labelDiv[i]&&(t.labelDiv[i]=l(e,t,r,i)),o=t.labelDiv[i],o.innerHTML=r.data.Text,o.labelType in j&&!j[o.labelType]&&(o.style["pointer-events"]="none")}return o.style.left=50*n[0]+50+"%",o.style.top=50-50*n[1]+"%",o.style["z-index"]=2e3-a,"Node"!=o.labelType&&"Surface"!=o.labelType||(o.style.opacity=0),"Marker"==o.labelType&&(o.style.opacity=1,o.style["z-index"]=2001),o}function p(e,t,n){for(var r,a,i=0;i<e.length;i++)if(e[i].style.opacity>.4)for(var o=i+1;o<e.length;o++)e[o].style.opacity>.4&&(r=e[i].getBoundingClientRect(),a=e[o].getBoundingClientRect(),r.top>a.bottom||r.right<a.left||r.bottom<a.top||r.left>a.right||(e[i].name===n?e[o].style.opacity=.4:e[o].name===n?e[i].style.opacity=.4:t[e[i].name]<t[e[o].name]?e[o].style.opacity=.4:e[i].style.opacity=.4))}function A(e,t){for(var n,r,a=0;a<e.length;a++)if(e[a].style.opacity>.5)for(var i=a+1;i<e.length;i++)e[i].style.opacity>.5&&(n=e[a].getBoundingClientRect(),r=e[i].getBoundingClientRect(),n.top>r.bottom||n.right<r.left||n.bottom<r.top||n.left>r.right||(t[e[a].name]<t[e[i].name]?e[i].style.opacity=.5:e[a].style.opacity=.5))}function m(e){x=e}function f(e){var t,n;if(x){t=x.getBoundingClientRect();for(var r=0;r<e.length;r++)n=e[r].getBoundingClientRect(),t.top>n.bottom||t.right<n.left||t.bottom<n.top||t.left>n.right||(e[r].style.opacity=0,"Surface"===e[r].labelType&&e[r].surfaceDot&&(e[r].surfaceDot.style.opacity=0))}}function D(e,t){var n=e,r=[],a=document.getElementById("labels"),s=function(){var e,i,o=[],s=[],u=0,c={},l=[];t&&N.scene.walk(t,function(t,a,d){for(var M=0;M<a.length;M++){var p;if(a[M][2]>0&&a[M][0]>-1.2&&a[M][0]<1.2&&a[M][1]>-1.2&&a[M][1]<1.2){for(var A in d){var m=a[M],f=d[A];f.visible&&null!==f.renderable&&"Label"===f.renderable.type&&("projectedPosition"in f.renderable.data&&(m=f.renderable.data.projectedPosition[M]),"System"===t.nodeType&&(e=f.renderable.data.Text),i=g(n,t,m,f.renderable,u,M),void 0!==i&&(c[i.name]=m[2],o.push(i),i.parentNode||s.push(i),u+=1,p=[t,i]))}if(p&&0===M&&l.push(p),void 0===r[M]){var D=document.createAttribute("eye");D.value=M,r[M]=document.createElement("div"),r[M].setAttributeNode(D),r[M].className+="labelWall ",r[M].id="stereo",r[M].className+=0===M?"left-eye":"right-eye"}}}}),void 0!==r[0]&&(h.stereo?r[0].id="stereo":r[0].id="mono");for(var d=document.getElementsByClassName("nodeLabel"),M=0;M<d.length;M++)""===d[M].style["margin-left"]&&"Surface"!==d[M].labelType&&(d[M].style["margin-left"]=Math.floor(d[M].clientWidth/2)+"px"),d[M].style.opacity=.7;p(d,c,e);var m=document.getElementsByClassName("surfaceLabel");for(M=0;M<m.length;M++)m[M].style.opacity=1;var D=document.getElementsByClassName("surfaceDot");for(M=0;M<D.length;M++)D[M].style.opacity=1;var T=document.getElementsByClassName("marker"),y=[];for(M=0;M<T.length;M++)T[M].style.opacity=1,T[M].attachedElement&&(T[M].attachedElement.style.opacity=1,y.push(T[M].attachedElement));f(y),f(d),f(m),f(D),f(T),A([],c),c={},r.forEach(function(e){e.parentNode!=a&&a.appendChild(e)}),s.forEach(function(e){r[e.getAttribute("eye")].appendChild(e),"onadd"in e&&e.onadd()});for(var L=0;L<r.length;L++)for(var E=r[L],I=E.children.length-1;I>=0;I--)o.indexOf(E.children[I])<0&&("onremove"in E.children[I]&&E.children[I].onremove(),E.removeChild(E.children[I]));if(h.vr){var j,x,b=null;if(0!==l.length&&(j=v.getIntersection(l,c)))w.resetRay(),(b=v.getCurrPair())&&b[0]!=j[0]&&v.VRmouseout(b,b[0].labelDiv[1]),v.VRmouseover(j,j[0].labelDiv[1]),v.incClock(),v.getClock()>70&&(v.VRmouseout(j,j[0].labelDiv[1]),v.VRmouseclick(j));else{var C=v.getCurrPair();C&&v.VRmouseout(C,C[0].labelDiv[1]),v.resetRay(),(x=n.pick())&&x.node!==n.cameraState.parent?(w.pickOver(x),w.incClock(),w.getClock()>20&&(w.VRplanetClick(x),w.resetRay())):w.resetRay()}}};b[t.id]=s,o("click","transitionToNode",function(e){y.actions.onClick(e,L.speed.standard)}),o("mouseover","stopClock",function(e){y.actions.onMouseOver(e)}),o("mouseout","startClock",function(e){y.actions.onMouseOut(e)}),i("onremove","resetClock",function(e){y.actions.onLabelRemove(e)})}var N=n(4),h=n(3),T=n(20),y=n(21),L=n(22),v=n(34),w=n(35),E={},I=[],j={Node:!0,Surface:!0,Marker:!0},x=null,b={},C=function(e){b[e.id]&&b[e.id]()};e.exports={generateLabelSystem:D,addEventHandler:i,addEventListener:o,removeEventHandler:u,removeAllEventHandlers:s,disableInteractions:r,enableInteractions:a,setViewportContainer:m,updateLabelSystem:C}},function(e,t){e.exports=function(){var e={};return e.callbacks=[],e.push=function(t,n){var r={};return r[t]=n,e.callbacks.push(r),e.callbacks.length},e.unshift=function(t,n){var r={};return r[t]=n,e.callbacks.unshift(r),e.callbacks.length},e.insert=function(t,n,r){var a={};return a[t]=n,e.callbacks.splice(r,0,a),e.callbacks.length},e.pop=function(){return e.callbacks.pop()},e.shift=function(){return e.callbacks.shift()},e.remove=function(t){var n,r=-1;for(var a in e.callbacks)if(t in e.callbacks[a]){r=a,n=e.callbacks[a];break}return r>-1&&e.callbacks.splice(r,1),n},e.trigger=function(){for(var t in e.callbacks)for(var n in e.callbacks[t])e.callbacks[t][n].apply(null,arguments)},e.toString=function(){var t="";for(var n in e.callbacks)for(var r in e.callbacks[n])t+="{ "+r+" : "+e.callbacks[n][r]+"} ";return t},e}},function(e,t,n){function r(e){a=e,a.addBackgroundHandler(o.TouchHandler("backgroundTouch",{singleTap:function(e,t,n,r,a,i,o,u,c,l){s.backgroundSingleTap(e,t,n,r,a,i,o,u,c,l)},doubleTap:function(e,t,n,r,a,i,o,u,c,l){s.backgroundDoubleTap(e,t,n,r,a,i,o,u,c,l)}})),a.addBackgroundHandler(o.MouseHandler("backgroundMouse",{click:function(e,t,n,r,a,i){s.backgroundClick(e,t,n,r,a,i)},doubleClick:function(e,t,n,r,a,i){s.backgroundClick(e,t,n,r,a,i)}}))}var a,i=n(22),o=n(28),s={},u=0;
s.onClick=function(e,t){if(e.interactable===!1)return!1;var n=e.ellipsoid?Math.max(e.ellipsoid[0],e.ellipsoid[1],e.ellipsoid[2]):1,r={frame:a.cameraState.frame,target:e,parent:e,radius:n/(.25*Math.tan(a._camera.fov)),positionTime:t,win:a,cameraBehaviorParams:{minRadius:e.minZoomMult?e.minZoomMult*n:2*n,maxRadius:e.maxZoomMult?e.maxZoomMult*n:1/0}};return a.setCamera(i.trackingTransition(r)),!0},s.onMouseOver=function(e){u=a._window.camera.clock.rate,e.mouseOver=!0,a._window.camera.clock={time:a._window.camera.clock.time,rate:0}},s.onMouseOut=function(e){e.mouseOver=!1,a._window.camera.clock={time:a._window.camera.clock.time,rate:u}},s.onLabelRemove=function(e){e.mouseOver&&(a._window.camera.clock={time:a._window.camera.clock.time,rate:u})},s.onPick=function(e,t,n){console.verboseLog("Single Pick "+t+" : "+n),e&&e.node&&s.onClick(e.node,i.speed.standard,!1)},s.backgroundSingleTap=function(e,t,n,r,a,i,o,s,u,c){console.verboseLog("Single tap "+o+" : "+s+". Picked fragment info: "+c)},s.backgroundDoubleTap=function(e,t,n,r,a,i,o,u,c,l){console.verboseLog("Double tap "+o+" : "+u+". Picked fragment info: "+l),s.onPick(l,o,u)},s.backgroundClick=function(e,t,n,r,a,i){console.verboseLog("Single Click "+r+" : "+a+". Picked fragment info "+i),s.onPick(i,r,a)},s.backgroundDoubleClick=function(e,t,n,r,a,i){console.verboseLog("Double clicked "+t+" at "+r+","+a+". Picked fragment info "+i)},e.exports={init:r,actions:s}},function(e,t,n){var r=n(23),a=n(4),i=n(24),o=n(25),s=n(26),u=n(31),c=n(33),l=n(3);e.exports={speed:{fast:.1,standard:3,"short":1},trackingTransition:function(e){var t=o({frame:e.frame,name:e.name,target:a.scene.get(e.target),radius:e.radius||0,rate:e.rate,positionTime:e.positionTime||3,position:{start:[0,0,0],end:[0,0,0]},bezierTangents:e.bezierTangents,orientation:{start:[0,0,0,1],end:[0,0,0,1]},time:0,lookUp:{start:[0,0,0],end:[0,0,0],cross:[0,0,0],angle:0,rotationBetweenVectors:[0,0,0,0]},lookPointStart:null,lookPointEnd:e.lookPointEnd||[0,0,0],after:e.after||function(){},cameraBehavior:e.cameraBehavior||s,cameraBehaviorParams:e.cameraBehaviorParams||{},fov:{start:a.app.getWin()._camera.fov,end:e.fov||a.app.getWin()._camera.fov}}),n=function(e){var t={};return t.forward=a.math.qMulV(e,i.vector.FORWARD),t.up=a.math.qMulV(e,i.vector.UP),t};e.position&&(t.position.end=e.position);var d=a.app.getWin().cameraState.frame.orientation;e.orientation&&(d=e.orientation);var M=n(d);return t.orientation.end=d,t.orientation.end=d,t.position.end=a.math.vMul(M.forward,-t.radius),t.lookUp.end=M.up,t.update=function(e,n){t.time+=n;var i=a.math.vNorm(a.math.vSub(t.frame.position,t.position.end));if(t.time>t.positionTime||i<.1){if(t.win){var o={target:t.target,frame:t.frame,radius:t.radius||t.target.camera.preferred[0].radius,orientation:t.orientation.end};o=r.extend(o,t.cameraBehaviorParams),t.win.setCamera(l.vr?new u({lookController:c({targetOrientation:t.orientation.end,orientation:t.orientation.end}),parent:t.target,position:t.position.end,orientation:t.orientation.end,frame:t.frame}):new t.cameraBehavior(o),5)}return void t.after()}var s=a.math.clamp(t.time/(1*t.positionTime),0,1),d=a.math.cubicBezier1d(s,0,t.bezierTangents[0],t.bezierTangents[1],1);t.frame.position=a.math.lerp(d,t.position.start,t.position.end),a.app.getWin()._camera.fov=a.math.lerp(d,[t.fov.start,0,0],[t.fov.end,0,0])[0];var M=a.math.lerp(d,t.lookPointStart,t.lookPointEnd),g=a.math.vSub(M,t.frame.position),p=a.math.slerp(s,[0,0,0,1],t.lookUp.rotationBetweenVectors),A=a.math.qMulV(p,t.lookUp.start),m=a.math.lookRotation(g,A);t.frame.orientation=m},t.enter=function(e){var n=a.math.vNorm(e.cameraState.frame.position);t.frame=t.target.frame.convert(e.cameraState.frame,e._camera),t.position.start=t.frame.position,t.orientation.start=t.frame.orientation,t.lookUp.start=a.math.qMulV(a.app.getWin().cameraState.frame.orientation,i.vector.UP),t.lookUp.cross=a.math.cross(t.lookUp.start,t.lookUp.end),t.lookUp.angle=Math.acos(a.math.vDot(t.lookUp.start,t.lookUp.end))||0,t.lookUp.rotationBetweenVectors=a.math.rotationBetweenVectors(t.lookUp.start,t.lookUp.end),isNaN(t.lookUp.rotationBetweenVectors[0])&&(t.lookUp.rotationBetweenVectors=[0,0,0,1]);var r=i.vector.FORWARD;r=a.math.qMulV(t.orientation.start,r),r=a.math.vMul(r,n);var o=a.math.lookRotation(r,t.lookUp.start);if(t.orientation.start=o,t.lookPointStart=a.math.vAdd(r,t.frame.position),!t.bezierTangents){var s,u=n,c=a.math.vNorm(t.position.end);s=u>c?[1-c/u,1]:[0,u/c],t.bezierTangents=s}t.win=e,t.clock={time:e._camera.clock.time,rate:e._camera.clock.rate},void 0!==t.rate&&(t.clock.rate=t.rate),e._camera.clock={time:t.clock.time,rate:0}},t.exit=function(e){e._camera.clock=t.clock},t}}},function(e,t,n){var r,a;(function(){function n(e){function t(t,n,r,a,i,o){for(;i>=0&&i<o;i+=e){var s=a?a[i]:i;r=n(r,t[s],s,t)}return r}return function(n,r,a,i){r=L(r,i,4);var o=!b(n)&&y.keys(n),s=(o||n).length,u=e>0?0:s-1;return arguments.length<3&&(a=n[o?o[u]:u],u+=e),t(n,r,a,o,u,s)}}function i(e){return function(t,n,r){n=v(n,r);for(var a=x(t),i=e>0?0:a-1;i>=0&&i<a;i+=e)if(n(t[i],i,t))return i;return-1}}function o(e,t,n){return function(r,a,i){var o=0,s=x(r);if("number"==typeof i)e>0?o=i>=0?i:Math.max(i+s,o):s=i>=0?Math.min(i+1,s):i+s+1;else if(n&&i&&s)return i=n(r,a),r[i]===a?i:-1;if(a!==a)return i=t(p.call(r,o,s),y.isNaN),i>=0?i+o:-1;for(i=e>0?o:s-1;i>=0&&i<s;i+=e)if(r[i]===a)return i;return-1}}function s(e,t){var n=k.length,r=e.constructor,a=y.isFunction(r)&&r.prototype||d,i="constructor";for(y.has(e,i)&&!y.contains(t,i)&&t.push(i);n--;)i=k[n],i in e&&e[i]!==a[i]&&!y.contains(t,i)&&t.push(i)}var u=this,c=u._,l=Array.prototype,d=Object.prototype,M=Function.prototype,g=l.push,p=l.slice,A=d.toString,m=d.hasOwnProperty,f=Array.isArray,D=Object.keys,N=M.bind,h=Object.create,T=function(){},y=function(e){return e instanceof y?e:this instanceof y?void(this._wrapped=e):new y(e)};"undefined"!=typeof e&&e.exports&&(t=e.exports=y),t._=y,y.VERSION="1.8.3";var L=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,a){return e.call(t,n,r,a)};case 4:return function(n,r,a,i){return e.call(t,n,r,a,i)}}return function(){return e.apply(t,arguments)}},v=function(e,t,n){return null==e?y.identity:y.isFunction(e)?L(e,t,n):y.isObject(e)?y.matcher(e):y.property(e)};y.iteratee=function(e,t){return v(e,t,1/0)};var w=function(e,t){return function(n){var r=arguments.length;if(r<2||null==n)return n;for(var a=1;a<r;a++)for(var i=arguments[a],o=e(i),s=o.length,u=0;u<s;u++){var c=o[u];t&&void 0!==n[c]||(n[c]=i[c])}return n}},E=function(e){if(!y.isObject(e))return{};if(h)return h(e);T.prototype=e;var t=new T;return T.prototype=null,t},I=function(e){return function(t){return null==t?void 0:t[e]}},j=Math.pow(2,53)-1,x=I("length"),b=function(e){var t=x(e);return"number"==typeof t&&t>=0&&t<=j};y.each=y.forEach=function(e,t,n){t=L(t,n);var r,a;if(b(e))for(r=0,a=e.length;r<a;r++)t(e[r],r,e);else{var i=y.keys(e);for(r=0,a=i.length;r<a;r++)t(e[i[r]],i[r],e)}return e},y.map=y.collect=function(e,t,n){t=v(t,n);for(var r=!b(e)&&y.keys(e),a=(r||e).length,i=Array(a),o=0;o<a;o++){var s=r?r[o]:o;i[o]=t(e[s],s,e)}return i},y.reduce=y.foldl=y.inject=n(1),y.reduceRight=y.foldr=n(-1),y.find=y.detect=function(e,t,n){var r;if(r=b(e)?y.findIndex(e,t,n):y.findKey(e,t,n),void 0!==r&&r!==-1)return e[r]},y.filter=y.select=function(e,t,n){var r=[];return t=v(t,n),y.each(e,function(e,n,a){t(e,n,a)&&r.push(e)}),r},y.reject=function(e,t,n){return y.filter(e,y.negate(v(t)),n)},y.every=y.all=function(e,t,n){t=v(t,n);for(var r=!b(e)&&y.keys(e),a=(r||e).length,i=0;i<a;i++){var o=r?r[i]:i;if(!t(e[o],o,e))return!1}return!0},y.some=y.any=function(e,t,n){t=v(t,n);for(var r=!b(e)&&y.keys(e),a=(r||e).length,i=0;i<a;i++){var o=r?r[i]:i;if(t(e[o],o,e))return!0}return!1},y.contains=y.includes=y.include=function(e,t,n,r){return b(e)||(e=y.values(e)),("number"!=typeof n||r)&&(n=0),y.indexOf(e,t,n)>=0},y.invoke=function(e,t){var n=p.call(arguments,2),r=y.isFunction(t);return y.map(e,function(e){var a=r?t:e[t];return null==a?a:a.apply(e,n)})},y.pluck=function(e,t){return y.map(e,y.property(t))},y.where=function(e,t){return y.filter(e,y.matcher(t))},y.findWhere=function(e,t){return y.find(e,y.matcher(t))},y.max=function(e,t,n){var r,a,i=-(1/0),o=-(1/0);if(null==t&&null!=e){e=b(e)?e:y.values(e);for(var s=0,u=e.length;s<u;s++)r=e[s],r>i&&(i=r)}else t=v(t,n),y.each(e,function(e,n,r){a=t(e,n,r),(a>o||a===-(1/0)&&i===-(1/0))&&(i=e,o=a)});return i},y.min=function(e,t,n){var r,a,i=1/0,o=1/0;if(null==t&&null!=e){e=b(e)?e:y.values(e);for(var s=0,u=e.length;s<u;s++)r=e[s],r<i&&(i=r)}else t=v(t,n),y.each(e,function(e,n,r){a=t(e,n,r),(a<o||a===1/0&&i===1/0)&&(i=e,o=a)});return i},y.shuffle=function(e){for(var t,n=b(e)?e:y.values(e),r=n.length,a=Array(r),i=0;i<r;i++)t=y.random(0,i),t!==i&&(a[i]=a[t]),a[t]=n[i];return a},y.sample=function(e,t,n){return null==t||n?(b(e)||(e=y.values(e)),e[y.random(e.length-1)]):y.shuffle(e).slice(0,Math.max(0,t))},y.sortBy=function(e,t,n){return t=v(t,n),y.pluck(y.map(e,function(e,n,r){return{value:e,index:n,criteria:t(e,n,r)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return e.index-t.index}),"value")};var C=function(e){return function(t,n,r){var a={};return n=v(n,r),y.each(t,function(r,i){var o=n(r,i,t);e(a,r,o)}),a}};y.groupBy=C(function(e,t,n){y.has(e,n)?e[n].push(t):e[n]=[t]}),y.indexBy=C(function(e,t,n){e[n]=t}),y.countBy=C(function(e,t,n){y.has(e,n)?e[n]++:e[n]=1}),y.toArray=function(e){return e?y.isArray(e)?p.call(e):b(e)?y.map(e,y.identity):y.values(e):[]},y.size=function(e){return null==e?0:b(e)?e.length:y.keys(e).length},y.partition=function(e,t,n){t=v(t,n);var r=[],a=[];return y.each(e,function(e,n,i){(t(e,n,i)?r:a).push(e)}),[r,a]},y.first=y.head=y.take=function(e,t,n){if(null!=e)return null==t||n?e[0]:y.initial(e,e.length-t)},y.initial=function(e,t,n){return p.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},y.last=function(e,t,n){if(null!=e)return null==t||n?e[e.length-1]:y.rest(e,Math.max(0,e.length-t))},y.rest=y.tail=y.drop=function(e,t,n){return p.call(e,null==t||n?1:t)},y.compact=function(e){return y.filter(e,y.identity)};var S=function(e,t,n,r){for(var a=[],i=0,o=r||0,s=x(e);o<s;o++){var u=e[o];if(b(u)&&(y.isArray(u)||y.isArguments(u))){t||(u=S(u,t,n));var c=0,l=u.length;for(a.length+=l;c<l;)a[i++]=u[c++]}else n||(a[i++]=u)}return a};y.flatten=function(e,t){return S(e,t,!1)},y.without=function(e){return y.difference(e,p.call(arguments,1))},y.uniq=y.unique=function(e,t,n,r){y.isBoolean(t)||(r=n,n=t,t=!1),null!=n&&(n=v(n,r));for(var a=[],i=[],o=0,s=x(e);o<s;o++){var u=e[o],c=n?n(u,o,e):u;t?(o&&i===c||a.push(u),i=c):n?y.contains(i,c)||(i.push(c),a.push(u)):y.contains(a,u)||a.push(u)}return a},y.union=function(){return y.uniq(S(arguments,!0,!0))},y.intersection=function(e){for(var t=[],n=arguments.length,r=0,a=x(e);r<a;r++){var i=e[r];if(!y.contains(t,i)){for(var o=1;o<n&&y.contains(arguments[o],i);o++);o===n&&t.push(i)}}return t},y.difference=function(e){var t=S(arguments,!0,!0,1);return y.filter(e,function(e){return!y.contains(t,e)})},y.zip=function(){return y.unzip(arguments)},y.unzip=function(e){for(var t=e&&y.max(e,x).length||0,n=Array(t),r=0;r<t;r++)n[r]=y.pluck(e,r);return n},y.object=function(e,t){for(var n={},r=0,a=x(e);r<a;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},y.findIndex=i(1),y.findLastIndex=i(-1),y.sortedIndex=function(e,t,n,r){n=v(n,r,1);for(var a=n(t),i=0,o=x(e);i<o;){var s=Math.floor((i+o)/2);n(e[s])<a?i=s+1:o=s}return i},y.indexOf=o(1,y.findIndex,y.sortedIndex),y.lastIndexOf=o(-1,y.findLastIndex),y.range=function(e,t,n){null==t&&(t=e||0,e=0),n=n||1;for(var r=Math.max(Math.ceil((t-e)/n),0),a=Array(r),i=0;i<r;i++,e+=n)a[i]=e;return a};var z=function(e,t,n,r,a){if(!(r instanceof t))return e.apply(n,a);var i=E(e.prototype),o=e.apply(i,a);return y.isObject(o)?o:i};y.bind=function(e,t){if(N&&e.bind===N)return N.apply(e,p.call(arguments,1));if(!y.isFunction(e))throw new TypeError("Bind must be called on a function");var n=p.call(arguments,2),r=function(){return z(e,r,t,this,n.concat(p.call(arguments)))};return r},y.partial=function(e){var t=p.call(arguments,1),n=function(){for(var r=0,a=t.length,i=Array(a),o=0;o<a;o++)i[o]=t[o]===y?arguments[r++]:t[o];for(;r<arguments.length;)i.push(arguments[r++]);return z(e,n,this,this,i)};return n},y.bindAll=function(e){var t,n,r=arguments.length;if(r<=1)throw new Error("bindAll must be passed function names");for(t=1;t<r;t++)n=arguments[t],e[n]=y.bind(e[n],e);return e},y.memoize=function(e,t){var n=function(r){var a=n.cache,i=""+(t?t.apply(this,arguments):r);return y.has(a,i)||(a[i]=e.apply(this,arguments)),a[i]};return n.cache={},n},y.delay=function(e,t){var n=p.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},y.defer=y.partial(y.delay,y,1),y.throttle=function(e,t,n){var r,a,i,o=null,s=0;n||(n={});var u=function(){s=n.leading===!1?0:y.now(),o=null,i=e.apply(r,a),o||(r=a=null)};return function(){var c=y.now();s||n.leading!==!1||(s=c);var l=t-(c-s);return r=this,a=arguments,l<=0||l>t?(o&&(clearTimeout(o),o=null),s=c,i=e.apply(r,a),o||(r=a=null)):o||n.trailing===!1||(o=setTimeout(u,l)),i}},y.debounce=function(e,t,n){var r,a,i,o,s,u=function(){var c=y.now()-o;c<t&&c>=0?r=setTimeout(u,t-c):(r=null,n||(s=e.apply(i,a),r||(i=a=null)))};return function(){i=this,a=arguments,o=y.now();var c=n&&!r;return r||(r=setTimeout(u,t)),c&&(s=e.apply(i,a),i=a=null),s}},y.wrap=function(e,t){return y.partial(t,e)},y.negate=function(e){return function(){return!e.apply(this,arguments)}},y.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}},y.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},y.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},y.once=y.partial(y.before,2);var O=!{toString:null}.propertyIsEnumerable("toString"),k=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];y.keys=function(e){if(!y.isObject(e))return[];if(D)return D(e);var t=[];for(var n in e)y.has(e,n)&&t.push(n);return O&&s(e,t),t},y.allKeys=function(e){if(!y.isObject(e))return[];var t=[];for(var n in e)t.push(n);return O&&s(e,t),t},y.values=function(e){for(var t=y.keys(e),n=t.length,r=Array(n),a=0;a<n;a++)r[a]=e[t[a]];return r},y.mapObject=function(e,t,n){t=v(t,n);for(var r,a=y.keys(e),i=a.length,o={},s=0;s<i;s++)r=a[s],o[r]=t(e[r],r,e);return o},y.pairs=function(e){for(var t=y.keys(e),n=t.length,r=Array(n),a=0;a<n;a++)r[a]=[t[a],e[t[a]]];return r},y.invert=function(e){for(var t={},n=y.keys(e),r=0,a=n.length;r<a;r++)t[e[n[r]]]=n[r];return t},y.functions=y.methods=function(e){var t=[];for(var n in e)y.isFunction(e[n])&&t.push(n);return t.sort()},y.extend=w(y.allKeys),y.extendOwn=y.assign=w(y.keys),y.findKey=function(e,t,n){t=v(t,n);for(var r,a=y.keys(e),i=0,o=a.length;i<o;i++)if(r=a[i],t(e[r],r,e))return r},y.pick=function(e,t,n){var r,a,i={},o=e;if(null==o)return i;y.isFunction(t)?(a=y.allKeys(o),r=L(t,n)):(a=S(arguments,!1,!1,1),r=function(e,t,n){return t in n},o=Object(o));for(var s=0,u=a.length;s<u;s++){var c=a[s],l=o[c];r(l,c,o)&&(i[c]=l)}return i},y.omit=function(e,t,n){if(y.isFunction(t))t=y.negate(t);else{var r=y.map(S(arguments,!1,!1,1),String);t=function(e,t){return!y.contains(r,t)}}return y.pick(e,t,n)},y.defaults=w(y.allKeys,!0),y.create=function(e,t){var n=E(e);return t&&y.extendOwn(n,t),n},y.clone=function(e){return y.isObject(e)?y.isArray(e)?e.slice():y.extend({},e):e},y.tap=function(e,t){return t(e),e},y.isMatch=function(e,t){var n=y.keys(t),r=n.length;if(null==e)return!r;for(var a=Object(e),i=0;i<r;i++){var o=n[i];if(t[o]!==a[o]||!(o in a))return!1}return!0};var Q=function(e,t,n,r){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof y&&(e=e._wrapped),t instanceof y&&(t=t._wrapped);var a=A.call(e);if(a!==A.call(t))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var i="[object Array]"===a;if(!i){if("object"!=typeof e||"object"!=typeof t)return!1;var o=e.constructor,s=t.constructor;if(o!==s&&!(y.isFunction(o)&&o instanceof o&&y.isFunction(s)&&s instanceof s)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],r=r||[];for(var u=n.length;u--;)if(n[u]===e)return r[u]===t;if(n.push(e),r.push(t),i){if(u=e.length,u!==t.length)return!1;for(;u--;)if(!Q(e[u],t[u],n,r))return!1}else{var c,l=y.keys(e);if(u=l.length,y.keys(t).length!==u)return!1;for(;u--;)if(c=l[u],!y.has(t,c)||!Q(e[c],t[c],n,r))return!1}return n.pop(),r.pop(),!0};y.isEqual=function(e,t){return Q(e,t)},y.isEmpty=function(e){return null==e||(b(e)&&(y.isArray(e)||y.isString(e)||y.isArguments(e))?0===e.length:0===y.keys(e).length)},y.isElement=function(e){return!(!e||1!==e.nodeType)},y.isArray=f||function(e){return"[object Array]"===A.call(e)},y.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},y.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){y["is"+e]=function(t){return A.call(t)==="[object "+e+"]"}}),y.isArguments(arguments)||(y.isArguments=function(e){return y.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(y.isFunction=function(e){return"function"==typeof e||!1}),y.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},y.isNaN=function(e){return y.isNumber(e)&&e!==+e},y.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===A.call(e)},y.isNull=function(e){return null===e},y.isUndefined=function(e){return void 0===e},y.has=function(e,t){return null!=e&&m.call(e,t)},y.noConflict=function(){return u._=c,this},y.identity=function(e){return e},y.constant=function(e){return function(){return e}},y.noop=function(){},y.property=I,y.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},y.matcher=y.matches=function(e){return e=y.extendOwn({},e),function(t){return y.isMatch(t,e)}},y.times=function(e,t,n){var r=Array(Math.max(0,e));t=L(t,n,1);for(var a=0;a<e;a++)r[a]=t(a);return r},y.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},y.now=Date.now||function(){return(new Date).getTime()};var U={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},_=y.invert(U),B=function(e){var t=function(t){return e[t]},n="(?:"+y.keys(e).join("|")+")",r=RegExp(n),a=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(a,t):e}};y.escape=B(U),y.unescape=B(_),y.result=function(e,t,n){var r=null==e?void 0:e[t];return void 0===r&&(r=n),y.isFunction(r)?r.call(e):r};var R=0;y.uniqueId=function(e){var t=++R+"";return e?e+t:t},y.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var P=/(.)^/,Y={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},F=/\\|'|\r|\n|\u2028|\u2029/g,G=function(e){return"\\"+Y[e]};y.template=function(e,t,n){!t&&n&&(t=n),t=y.defaults({},t,y.templateSettings);var r=RegExp([(t.escape||P).source,(t.interpolate||P).source,(t.evaluate||P).source].join("|")+"|$","g"),a=0,i="__p+='";e.replace(r,function(t,n,r,o,s){return i+=e.slice(a,s).replace(F,G),a=s+t.length,n?i+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?i+="'+\n((__t=("+r+"))==null?'':__t)+\n'":o&&(i+="';\n"+o+"\n__p+='"),t}),i+="';\n",t.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{var o=new Function(t.variable||"obj","_",i)}catch(s){throw s.source=i,s}var u=function(e){return o.call(this,e,y)},c=t.variable||"obj";return u.source="function("+c+"){\n"+i+"}",u},y.chain=function(e){var t=y(e);return t._chain=!0,t};var W=function(e,t){return e._chain?y(t).chain():t};y.mixin=function(e){y.each(y.functions(e),function(t){var n=y[t]=e[t];y.prototype[t]=function(){var e=[this._wrapped];return g.apply(e,arguments),W(this,n.apply(y,e))}})},y.mixin(y),y.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=l[e];y.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],W(this,n)}}),y.each(["concat","join","slice"],function(e){var t=l[e];y.prototype[e]=function(){return W(this,t.apply(this._wrapped,arguments))}}),y.prototype.value=function(){return this._wrapped},y.prototype.valueOf=y.prototype.toJSON=y.prototype.value,y.prototype.toString=function(){return""+this._wrapped},r=[],a=function(){return y}.apply(t,r),!(void 0!==a&&(e.exports=a))}).call(this)},function(e,t){e.exports={linear:{UP:1,DOWN:-1,FORWARD:-1,BACKWARD:1,RIGHT:1,LEFT:-1,YAWRIGHT:-1,YAWLEFT:1},vector:{FORWARD:[0,0,-1],BACK:[0,0,1],RIGHT:[1,0,0],LEFT:[-1,0,0],UP:[0,1,0],DOWN:[0,-1,0]}}},function(e,t,n){var r=n(4);e.exports=function(e){var t={frame:null,name:function(){return"CameraBehavior"},enter:function(){},exit:function(){}};if(void 0!==e)for(var n in e)t[n]=e[n];return t.update=function(e){t.frame=e.frame},t.getMinAltitude=function(e,t){var n,r=!1,a={},i=t.parent.context.getAllRecursive("GeometryFinder",e._camera.clock.time);for(var o in i)for(var s in i[o]){var u=i[o][s].getSurfaceHeight(e._camera,t);if(u.found){var c=u.frame.parent.frame.convert(t,e._camera.clock.time).position,l="x";Math.abs(u.frame.position[l])<1e-4&&(l="y"),Math.abs(u.frame.position[l])<1e-4&&(l="z");var d=c[l]-u.frame.position[l],M=d/u.normal[l];(!r||M<r)&&(r=M,n=u,a.pos=c,a.result=u,a.diff=d)}}return!!r&&{parent:n.frame.parent,normal:n.normal,altitude:r,debug:a}},t.altitudePower=t.altitudePower||1.05,t.scaleSpeed=function(e,n,r,a){if(e<n)return e/n*r;var i=Math.pow(1+e-n,t.altitudePower)*r;return a?Math.min(a,i):i},t.altitudeOffset=t.altitudeOffset||10,t.linearSpeedAltitude=t.linearSpeedAltitude||20,t.maxLinearSpeed=t.maxLinearSpeed||1,t.getVelocity=function(e,n,r,a){var i=r,o=r>0?1:-1,s=t.getMinAltitude(e,n);if(s){var u=s.altitude+t.altitudeOffset;u<0&&(u=-u);var c=t.scaleSpeed(u,t.linearSpeedAltitude,t.maxLinearSpeed);c>u&&(c=u/2),i=o*c}return t.radius&&Math.abs(i)>t.radius&&(i=o*t.radius/2),Math.abs(i)>a&&(i=o*a),i},t.checkFrame=function(e,n,r){var a=!1,i=t.getMinAltitude(e,n);return i&&i.altitude<r&&(a=i,a.magnitude=-(i.altitude-r)),a},t.getClosestSurface=function(e){var t,n;r.scene.walk(e,function(t){return t&&(n=t.frame.getDistance(e)),!0});var a=r.scene.cameraData[e.id].attachedNode,i={parent:a,position:[0,0,0],orientation:[0,0,0,1]},o=a.context.getAllRecursive("GeometryFinder",e.clock.time);for(var s in o)for(var u in o[s])if(o[s][u].ptr){var c=o[s][u].getSurfaceHeight(e,i);if(c.found){var l=c.frame.parent.frame.convert(i,e.clock.time).position,d="x";Math.abs(c.frame.position[d])<1e-4&&(d="y"),Math.abs(c.frame.position[d])<1e-4&&(d="z");var M=l[d]-c.frame.position[d],g=M/c.normal[d];(!t||g<t+10)&&(t=g-10)}}return n&&t&&Math.min(n,t)||n||t||0},t}},function(e,t,n){var r=n(4),a=n(24),i=n(25),o=n(27),s=n(30);e.exports=function(e){function t(e){return e.nominalRadius?e.nominalRadius:e.target&&e.target.ellipsoid&&r.math.vNorm(e.target.ellipsoid)>0?(e.radiusScale||1)*Math.min(e.target.ellipsoid[0],e.target.ellipsoid[1],e.target.ellipsoid[2]):1}if(!e.target&&!e.parent)throw Error("ranger.camera.Orbit: Missing required parameter: target");e.target=r.scene.get(e.target||e.parent);var n=i({startPosition:e.startPosition,target:e.target,parent:e.target,frame:e.frame||null,orientation:e.orientation||[0,0,0,1],offset:e.offset||[0,0,0],nominalRadius:t(e),locked:e.locked||null,radius:e.radius&&e.radius/t(e)||5.25,minRadius:e.minRadius&&e.minRadius/t(e)||1e-6,maxRadius:e.maxRadius&&e.maxRadius/t(e)||1e15});return n.name=function(){return"Orbit target "+n.target.name+" at radius "+n.radius},n.freeLook=o({orientation:e.orientation||[0,0,0,1],lookSpeed:e.lookSpeed||.005,useStrafeKeys:!0,locked:e.locked||null,target:e.target||null}),n.zoomController=s({minZoomLevel:n.minRadius,maxZoomLevel:n.maxRadius,zoomLevel:n.radius,zoomVelocityMouse:3,zoomVelocityTouch:3}),n.update=function(t,i){if(n.frame.parent=n.target,!e.locked){var o=[0,1,2].map(function(e){return r.frame.getAxis(n.frame,e)});n.freeLook.update(t,i,o[2],o[0],o[1]),n.zoomController.update(i)}n.frame.orientation=n.freeLook.orientation,n.radius=n.zoomController.zoomLevel*n.nominalRadius,n.frame.position=r.math.vAdd(r.math.vMul(r.math.vNormalized(r.math.qMulV(n.frame.orientation,a.vector.FORWARD)),-n.radius),n.offset)},n.frame||(n.frame={parent:n.target,position:[0,0,0],orientation:n.freeLook.orientation}),n.zoom=function(e){n.zoomController.zoom(e)},n.enter=function(e){e.deleteInputHandler("camera_fly_mouse"),e.deleteInputHandler("camera_fly_touch"),e.deleteInputHandler("camera_fly_bindings"),n.zoomController.enter(e),n.freeLook.enter(e)},n.exit=function(e){n.zoomController.exit(e),n.freeLook.exit(e)},n}},function(e,t,n){var r=n(4),a=n(28);e.exports=function(e){var t={smooth:!0,useStrafeKeys:!1,orientation:[0,0,0,1],targetOrientation:[0,0,0,1],lookVelocity:[0,0,0],lookSpeed:.03,speedMod:!1,leftPressed:!1,rightPressed:!1,downPressed:!1,upPressed:!1,rollCCWPressed:!1,rollCWPressed:!1,buttonDown:!1,dragX:0,dragY:0,dragR:0};if(e)for(var n in e)n in t&&(t[n]=e[n]);var i=t.lookSpeed,o=0;return t.targetOrientation=t.orientation,t.updateFrameParent=function(e,n,a){if(n=r.scene.get(n),a=r.scene.get(a),a&&a!=n){var i=r.Frame();i.parent=n,i.position=[0,0,0],i.orientation=t.orientation,t.orientation=a.frame.convert(i,e.clock.time).orientation,i.orientation=t.targetOrientation,t.targetOrientation=a.frame.convert(i,e.clock.time).orientation}},t.update=function(e,n,a,i,o){n=Math.min(n,1);var s=t.speedMod?.02:2,u=t.speedMod?.01:1,c=0,l=0,d=0;t.useStrafeKeys&&(t.leftPressed?c-=t.lookSpeed*s:t.rightPressed&&(c+=t.lookSpeed*s),t.downPressed?l+=t.lookSpeed*s:t.upPressed&&(l-=t.lookSpeed*s)),t.rollCCWPressed?d+=t.lookSpeed*s:t.rollCWPressed&&(d-=t.lookSpeed*s),t.buttonDown&&(c-=t.dragX*t.lookSpeed*u,l-=t.dragY*t.lookSpeed*u,d-=t.dragR*t.lookSpeed*u),t.targetOrientation=r.math.qNormalized(r.math.qMulQ(r.math.angleAxis(c,o),t.targetOrientation)),t.targetOrientation=r.math.qNormalized(r.math.qMulQ(r.math.angleAxis(l,i),t.targetOrientation)),t.targetOrientation=r.math.qNormalized(r.math.qMulQ(r.math.angleAxis(d,a),t.targetOrientation)),t.updateSmoothing(n),t.resetKeys()},t.updateSmoothing=function(n){var a=0;if(e.locked){var s=r.app.getWin()._camera,u=s.frame.position,c={};c={parent:r.scene.get(e.locked.object1),position:[0,0,0],orientation:[0,0,0,1]};var l=e.target.frame.convert(c,s).position;c={parent:r.scene.get(e.locked.object2),position:[0,0,0],orientation:[0,0,0,1]};var d=e.target.frame.convert(c,s).position,M=r.math.vNormalized(r.math.vSub(u,l)),g=r.math.vNormalized(r.math.vSub(u,d));a=180*Math.acos(r.math.vDot(M,g))/Math.PI,a>e.locked.degree&&a>o?t.lookSpeed=Math.min(2e-4/a,.001):t.lookSpeed=i,o=a}t.smooth?t.orientation=r.math.qNormalized(r.math.slerp(Math.min(10*n,1),t.orientation,t.targetOrientation)):t.orientation=t.targetOrientation},t.enter=function(n){function r(e,n,r){t.speedMod=r}function i(e,n,r){t.leftPressed=r}function o(e,n,r){t.rightPressed=r}function s(e,n,r){t.upPressed=r}function u(e,n,r){t.downPressed=r}function c(e,n,r){t.rollCCWPressed=r}function l(e,n,r){t.rollCWPressed=r}t.mouse=a.MouseHandler("camera_look_mouse",{drag:function(n,r,a){return t.buttonDown=!0,t.dragX=r,t.dragY=a,e.locked&&e.locked.moveLimit&&(t.dragX=Math.abs(t.dragX)>e.locked.moveLimit?0:t.dragX,t.dragY=Math.abs(t.dragY)>e.locked.moveLimit?0:t.dragY),!0},click:function(){}}),t.touch=a.TouchHandler("camera_look_touch",{touch:function(){},touchDrag:function(n,r,a,i,o,s){return t.buttonDown=!0,t.dragX=o,t.dragY=s,e.locked&&e.locked.moveLimit&&(t.dragX=Math.abs(t.dragX)>e.locked.moveLimit?0:t.dragX,t.dragY=Math.abs(t.dragY)>e.locked.moveLimit?0:t.dragY),!0}}),t.resetKeys=function(){t.speedMod=!1,t.leftPressed=!1,t.rightPressed=!1,t.upPressed=!1,t.downPressed=!1,t.buttonDown=!1,t.rollCCWPressed=!1,t.rollCWPressed=!1,t.dragX=0,t.dragY=0,t.dragR=0},t.bindings=a.KeyBinder("camera_look_bindings",{SHIFT:r,A:i,LEFT:i,D:o,RIGHT:o,R:s,UP:s,F:u,DOWN:u,Q:c,E:l}),n.addInputHandler(t.mouse),n.addInputHandler(t.touch),n.addInputHandler(t.bindings)},t.exit=function(e){e.deleteInputHandler("camera_look_mouse"),e.deleteInputHandler("camera_look_touch"),e.deleteInputHandler("camera_look_bindings")},t}},function(e,t,n){function r(e,t){for(var n,r=0;r<t.length;r++)if(n=t[r].identifier,n===e)return r;return-1}function a(e){var t,n=[],a=0;if(e.changedTouches.length>0)for(a=0;a<e.changedTouches.length;a++)t=r(e.changedTouches[a].identifier,n),t>=0?n.splice(t,1,{identifier:e.changedTouches[a].identifier,x:e.changedTouches[a].clientX,y:e.changedTouches[a].clientY}):n.push({identifier:e.changedTouches[a].identifier,x:e.changedTouches[a].clientX,y:e.changedTouches[a].clientY});return n}function i(e){return{name:e,handle:function(e,t){return!1}}}function o(e,t){var n=i(e);if(n.bindings={},"object"==("undefined"==typeof t?"undefined":M(t))&&t)for(var r in t)n.bindings[r]=t[r];return n.handle=function(e,t){return t.type+""=="KEY_CHANGED"&&t.params.key in n.bindings&&n.bindings[t.params.key](e,t.params.key,t.params.pressed)},n.Bind=function(e,t){n.bindings[e]=t},n.Unbind=function(e){delete n.bindings[e]},n}function s(e,t){var n=i(e);return n.move=function(e,t,n,r,a){return!1},n.drag=function(e,t,n,r,a){return!1},n.click=function(e,t,n,r,a){return!1},n.doubleClick=function(e,t,n,r,a){return!1},n.scroll=function(e,t,n,r){return!1},"object"==("undefined"==typeof t?"undefined":M(t))&&t&&("move"in t&&(n.move=t.move),"drag"in t&&(n.drag=t.drag),"click"in t&&(n.click=t.click),"doubleClick"in t&&(n.doubleClick=t.doubleClick),"scroll"in t&&(n.scroll=t.scroll)),n.handle=function(e,t){switch(t.type+""){case"CURSOR_MOVED":return t.params.drag?n.drag(e,t.params.relativeX,t.params.relativeY,t.params.absoluteX,t.params.absoluteY):n.move(e,t.params.relativeX,t.params.relativeY,t.params.absoluteX,t.params.absoluteY);case"MOUSE_SINGLE_CLICK":return n.click(e,t.params.button,t.params.pressed,t.params.X,t.params.Y,t.params.pickedFragmentInfo);case"MOUSE_DOUBLE_CLICK":return n.doubleClick(e,t.params.button,t.params.pressed,t.params.X,t.params.Y,t.params.pickedFragmentInfo);case"MOUSE_WHEEL_CHANGED":return n.scroll(e,t.params.tickX,t.params.tickY,t.params.tickZ);default:return!1}},n}function u(e,t){var n=i(e);return n.touch=function(e,t,n,r,a,i,o,s,u){return!1},n.touchDrag=function(e,t,n,r,a,i,o,s,u){return!1},n.singleTap=function(e,t,n,r,a,i,o,s,u){return!1},n.doubleTap=function(e,t,n,r,a,i,o,s,u){return!1},n.multi=function(e,t,n,r,a,i,o){return!1},n.gesture=function(e,t,n,r,a,i,o){return!1},"object"==("undefined"==typeof t?"undefined":M(t))&&t&&("touch"in t&&(n.touch=t.touch),"touchDrag"in t&&(n.touchDrag=t.touchDrag),"doubleTap"in t&&(n.doubleTap=t.doubleTap),"singleTap"in t&&(n.singleTap=t.singleTap),"multi"in t&&(n.multi=t.multi),"gesture"in t&&(n.gesture=t.gesture)),n.handle=function(e,t){switch(t.type+""){case"TOUCH":return n.touch(e,t.params.type,t.params.device,t.params.finger,t.params.dx,t.params.dy,t.params.x,t.params.y,t.params.pressure);case"TOUCH_DRAG":return n.touchDrag(e,t.params.type,t.params.device,t.params.finger,t.params.dx,t.params.dy,t.params.x,t.params.y,t.params.pressure);case"SINGLE_TAP":return n.singleTap(e,t.params.type,t.params.device,t.params.finger,t.params.dx,t.params.dy,t.params.x,t.params.y,t.params.pressure,t.params.pickedFragmentInfo);case"DOUBLE_TAP":return n.doubleTap(e,t.params.type,t.params.device,t.params.finger,t.params.dx,t.params.dy,t.params.x,t.params.y,t.params.pressure,t.params.pickedFragmentInfo);case"MULTITOUCH":return n.multi(e,t.params.device,t.params.dtheta,t.params.ddist,t.params.x,t.params.y,t.params.fingerCount);case"GESTURE":return n.gesture(e,t.params.device,t.params.gesture,t.params.fingerCount,t.params.error,t.params.x,t.params.y);
default:return!1}},n}function c(e){l=e,l.updates.events=function(e,t){for(;A.length;){var n=A.dequeue();switch(n.type+""){case"KEY_CHANGED":case"CURSOR_MOVED":case"MOUSE_SINGLE_CLICK":case"MOUSE_DOUBLE_CLICK":case"MOUSE_WHEEL_CHANGED":case"TOUCH":case"TOUCH_DRAG":case"MULTITOUCH":case"SINGLE_TAP":case"DOUBLE_TAP":case"GESTURE":l.passInputEvent(e,n);break;default:console.error("ranger/Window: Unhandled window event: "+n.type)}}}}var l,d,M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},g=n(29),p=n(7),A=p.createQueue(),m={},f={pressed:!1,previousX:0,previousY:0,clickedX:0,clickedY:0,clickCount:0,previousTime:0,dragging:!1,pickedFragmentInfo:{}},D=350;m.mouseDown=function(e){e.preventDefault();var t=new Date;f.previousTime=t.getTime(),f.pressed=!0,f.dragging=!1},m.cursorMoved=function(e){e.preventDefault();var t=document.body.scrollTop||document.documentElement.scrollTop,n=document.body.scrollLeft||document.documentElement.scrollLeft,r=e.pageX-n||e.clientX||0,a=e.pageY-t||e.clientY||0;l.cursorPosition=[r,a],f.pressed&&(f.dragging=!0,A.queue({type:"CURSOR_MOVED",params:{drag:!0,relativeX:r-f.previousX,relativeY:a-f.previousY,absoluteX:r,absoluteY:a}})),f.previousX=r,f.previousY=a},m.mouseUp=function(e){if(e.preventDefault(),f.pressed&&!f.dragging&&0===f.clickCount){f.clickCount=f.clickCount+1;var t=document.body.scrollTop||document.documentElement.scrollTop,n=document.body.scrollLeft||document.documentElement.scrollLeft,r=e.pageX-n||e.clientX||0,a=e.pageY-t||e.clientY||0;f.clickedX=r,f.clickedY=a;for(var i in l._window.pickedFragmentInfo)f.pickedFragmentInfo[i]=l._window.pickedFragmentInfo[i];d=setTimeout(function(){A.queue({type:"MOUSE_SINGLE_CLICK",params:{button:"Button"+e.which+"Down",pressed:!0,X:f.clickedX,Y:f.clickedY,pickedFragmentInfo:f.pickedFragmentInfo}}),f.pickedFragmentInfo={},f.clickCount=0},D)}else f.pressed&&!f.dragging&&1===f.clickCount&&(clearTimeout(d),A.queue({type:"MOUSE_DOUBLE_CLICK",params:{button:"Button"+e.which+"Down",pressed:!0,X:f.clickedX,Y:f.clickedY,pickedFragmentInfo:f.pickedFragmentInfo}}),f.pickedFragmentInfo={},f.clickCount=0);f.dragging=!1,f.pressed=!1},m.cursorOut=function(e){e.preventDefault(),f={pressed:!1,previousX:0,previousY:0,clickedX:0,clickedY:0,clickCount:0,previousTime:0,dragging:!1,pickedFragmentInfo:{}}},m.scroll=function(e){e.preventDefault(),A.queue({type:"MOUSE_WHEEL_CHANGED",params:{tickX:e.deltaX,tickY:e.deltaY,tickZ:e.deltaZ}})},m.keyPress=function(e){if(l.allowKeypress){var t=g.GetKeyName(e)||"";A.queue({type:"KEY_CHANGED",params:{key:t,pressed:!0}})}return!0};var N,h={ongoingTouches:[],touchDown:!1,dragging:!1,tapCount:0,tapX:0,tapY:0,previousTime:0,pickedFragmentInfo:{},previousDistanceBetweenFingers:null,twoFingerGesture:!1,startDragTouches:null,minDeltaDistance:6},T=350;m.touchStart=function(e){e.preventDefault();for(var t,n=a(e),i=0;i<n.length;i++)t=r(n[i].identifier,h.ongoingTouches),t>=0?h.ongoingTouches.splice(t,1,{identifier:n[i].identifier,x:n[i].x,y:n[i].y}):h.ongoingTouches.push({identifier:n[i].identifier,x:n[i].x,y:n[i].y});l.cursorPosition=[n[0].x,n[0].y];var o=new Date;h.previousTime=o.getTime(),h.dragging=!1,h.touchDown=!0,l.touchDown=!0,h.startDragTouches=null},m.touchMove=function(e){e.preventDefault();var t,n,i,o=a(e);if(h.startDragTouches||(h.startDragTouches=o),1===o.length&&1===h.ongoingTouches.length){if(l.cursorPosition=[o[0].x,o[0].y],h.twoFingerGesture)return void(h.twoFingerGesture=!1);h.startDragTouches&&(t=Math.pow(h.startDragTouches[0].x-o[0].x,2),n=Math.pow(h.startDragTouches[0].y-o[0].y,2),i=Math.sqrt(t+n),i>=h.minDeltaDistance&&(h.dragging=!0,A.queue({type:"TOUCH_DRAG",params:{type:"drag",device:"tablet",finger:"one",dx:o[0].x-h.ongoingTouches[0].x,dy:o[0].y-h.ongoingTouches[0].y,x:o[0].x,y:o[0].y,pressure:"normal"}})))}else if(2===o.length&&2===h.ongoingTouches.length){if(t=Math.pow(o[0].x-o[1].x,2),n=Math.pow(o[0].y-o[1].y,2),i=Math.sqrt(t+n),h.previousDistanceBetweenFingers){h.dragging=!0;var s=i-h.previousDistanceBetweenFingers;A.queue({type:"MULTITOUCH",params:{device:"tablet",dtheta:.5,ddist:s,x:0,y:0,fingerCount:o.length}})}h.previousDistanceBetweenFingers=i,h.twoFingerGesture=!0}for(var u,c=0;c<o.length;c++)u=r(o[c].identifier,h.ongoingTouches),u>=0&&h.ongoingTouches.splice(u,1,{identifier:o[c].identifier,x:o[c].x,y:o[c].y})},m.touchEnd=function(e){e.preventDefault();var t,n=a(e);if(1!==n.length||h.dragging||0!==h.tapCount)1!==n.length||h.dragging||1!==h.tapCount||(clearTimeout(N),A.queue({type:"DOUBLE_TAP",params:{type:"doubleTap",device:"tablet",finger:"one",dx:0,dy:0,x:h.tapX,y:h.tapY,pressure:"normal",pickedFragmentInfo:h.pickedFragmentInfo}}),h.pickedFragmentInfo={},h.tapCount=0);else{h.tapCount=h.tapCount+1,l.cursorPosition=[n[0].x,n[0].y],h.tapX=n[0].x,h.tapY=n[0].y;for(var i in l._window.pickedFragmentInfo)h.pickedFragmentInfo[i]=l._window.pickedFragmentInfo[i];N=setTimeout(function(){A.queue({type:"SINGLE_TAP",params:{type:"singleTap",device:"tablet",finger:"one",dx:0,dy:0,x:h.tapX,y:h.tapY,pressure:"normal",pickedFragmentInfo:h.pickedFragmentInfo}}),h.pickedFragmentInfo={},h.tapCount=0},T)}for(var o=0;o<n.length;o++)t=r(n[o].identifier,h.ongoingTouches),t>=0&&h.ongoingTouches.splice(t,1);0===h.ongoingTouches.length?(l.touchDown=!1,h.dragging=!1,h.touchDown=!1,h.previousDistanceBetweenFingers=null,h.twoFingerGesture=!1,h.startDragTouches=null):1===h.ongoingTouches.length&&(h.previousDistanceBetweenFingers=null)},m.touchCancel=function(e){e.preventDefault();for(var t,n=a(e),i=0;i<n.length;i++)t=r(n[i].identifier,h.ongoingTouches),t>=0&&h.ongoingTouches.splice(t,1)},e.exports={Handler:i,KeyBinder:o,MouseHandler:s,TouchHandler:u,eventHandlers:m,init:c}},function(e,t){function n(e){var t=e.keyCode;return t>=65&&t<=90?t+=32:(t=i[e.keyCode]||e.keyCode,2===e.location&&t>=1248&&t<=1251&&(t+=4)),t}function r(e){var t,r=n(e);return t=r>=1024?r-1024:o[r]||r}function a(e){return s[e.keyCode]||s[n(e)]}var i={16:1249,17:1248,18:1250,20:1081,33:1099,34:1102,35:1101,36:1098,37:1104,38:1106,39:1103,40:1105,44:316,45:1097,46:127,91:1251,93:1125,96:1122,97:1113,98:1114,99:1115,100:1116,101:1117,102:1118,103:1119,104:1120,9:1121,106:1109,107:1111,109:1110,110:1123,111:1108,112:1082,113:1083,114:1084,115:1085,116:1086,117:1087,118:1088,119:1089,120:1090,121:1091,122:1092,123:1093,124:1128,125:1129,126:1130,127:1131,128:1132,129:1133,130:1134,131:1135,132:1136,133:1137,134:1138,135:1139,144:1107,160:94,161:33,162:34,163:35,164:36,165:37,166:38,167:95,168:40,169:41,170:42,171:43,172:124,173:45,174:123,175:125,176:126,181:127,182:129,183:128,188:44,190:46,191:47,192:96,219:91,220:92,221:93,222:39,224:1251},o={8:42,9:43,13:40,27:41,32:44,35:204,39:53,44:54,46:55,47:56,48:39,49:30,50:31,51:32,52:33,53:34,54:35,55:36,56:37,57:38,58:203,59:51,61:46,91:47,92:49,93:48,96:52,97:4,98:5,99:6,100:7,101:8,102:9,103:10,104:11,105:12,106:13,107:14,108:15,109:16,110:17,111:18,112:19,113:20,114:21,115:22,116:23,117:24,118:25,119:26,120:27,121:28,122:29,127:76,305:224,308:226,316:70},s={16:"SHIFT",20:"CAPS",33:"PAGE_UP",34:"PAGE_DOWN",35:"END",36:"HOME",37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN",8:"BACKSPACE",9:"TAB",13:"RETURN",27:"ESCAPE",32:"SCAPE",44:",",46:".",47:"/",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",58:":",59:";",61:"=",91:"[",92:"BACKSLASH",93:"]",96:"APOSTROPHE",97:"A",98:"B",99:"C",100:"D",101:"E",102:"F",103:"G",104:"H",105:"I",106:"J",107:"K",108:"L",109:"M",110:"N",111:"O",112:"P",113:"Q",114:"R",115:"S",116:"T",117:"U",118:"V",119:"W",120:"X",121:"Y",122:"Z",127:"DELETE",305:"CTRL",17:"CTRL",308:"ALT",18:"ALT",316:"PRINT_SCREEN"};e.exports={GetKeyName:a,GetKeyCode:r}},function(e,t,n){var r=n(4),a=n(28);e.exports=function(e){var t={smooth:!1,zoomVelocityMouse:1,zoomVelocityTouch:1,maxZoomLevel:1/0,minZoomLevel:-(1/0),targetZoomLevel:1,zoomLevel:1,inputSpeed:0,maxMouseDT:.02,maxTouchDT:.05,maxTouchDDist:1.5,maxMouseDelta:2,speedMod:!1,forwardPressed:!1,backPressed:!1,zoomPressed:0};if(e)for(var n in e)n in t&&(t[n]=e[n]);return t.targetZoomLevel=t.zoomLevel,t.update=function(e){var n=Math.abs(t.inputSpeed)>.01?t.inputSpeed:0,r=t.speedMod?.01:1,a=-n*r*.75;t.forwardPressed&&(a-=2*e),t.backPressed&&(a+=2*e),Math.abs(t.zoomPressed)>.01&&(a-=5*t.zoomPressed*Math.min(e,.1)),t.targetZoomLevel=t.targetZoomLevel*(1+a),t.targetZoomLevel=t.targetZoomLevel>t.maxZoomLevel?t.maxZoomLevel:t.targetZoomLevel,t.targetZoomLevel=t.targetZoomLevel<t.minZoomLevel?t.minZoomLevel:t.targetZoomLevel,t.updateSmoothing(e),t.resetKeys()},t.updateSmoothing=function(e){t.smooth?t.zoomLevel=r.math.lerp(t.zoomLevel,t.targetZoomLevel,Math.min(10*e,1)):t.zoomLevel=t.targetZoomLevel},t.zoom=function(e){t.zoomPressed=e},t.enter=function(e){function n(e,n,r){t.speedMod=r}function r(e,n,r){t.forwardPressed=r}function i(e,n,r){t.backPressed=r}t.mouse=a.MouseHandler("camera_zoom_mouse",{scroll:function(e,n,r){if(r)return r>t.maxMouseDelta?r=t.maxMouseDelta:r<-t.maxMouseDelta&&(r=-t.maxMouseDelta),e>t.maxMouseDT&&(e=t.maxMouseDT),t.inputSpeed=-r*t.zoomVelocityMouse*e,!0}}),t.touch=a.TouchHandler("camera_zoom_touch",{multi:function(e,n,r,a,i,o,s){if(2==s&&Math.abs(a)>r)return a>t.maxTouchDDist?a=t.maxTouchDDist:a<-t.maxTouchDDist&&(a=-t.maxTouchDDist),e>t.maxTouchDT&&(e=t.maxTouchDT),t.inputSpeed=a*t.zoomVelocityTouch*e,!0}}),t.resetKeys=function(){t.inputSpeed=0,t.speedMod=!1,t.forwardPressed=!1,t.backPressed=!1,t.zoomPressed=0},t.bindings=a.KeyBinder("camera_zoom_bindings",{SHIFT:n,W:r,S:i}),e.addInputHandler(t.mouse),e.addInputHandler(t.touch),e.addInputHandler(t.bindings)},t.exit=function(e){e.deleteInputHandler("camera_zoom_mouse"),e.deleteInputHandler("camera_zoom_touch"),e.deleteInputHandler("camera_zoom_bindings")},t}},function(e,t,n){var r=n(4),a=n(25),i=n(32),o=n(27);e.exports=function(e){var t=a({parent:r.scene.get(e.parent)});if(!t.parent)throw Error("FreeFly: Missing required parameter: parent");return t.name=function(){return"FreeFly in frame "+t.parent.name},t.freeFly=i({frameParent:t.parent,position:e.position||[0,0,0]}),t.freeLook=e.lookController||o({orientation:e.orientation||[0,0,0,1],useStrafeKeys:!1}),t.update=function(e,n){t.frame.parent=t.parent;var a=[0,1,2].map(function(e){return r.frame.getAxis(t.frame,e)});t.freeLook.update(e,n,a[2],a[0],a[1]),t.freeFly.update(e,n,t.getClosestSurface(e),a[2],a[0],a[1]),t.frame.position=t.freeFly.position,t.frame.orientation=t.freeLook.orientation},t.frame={parent:t.parent,position:t.freeFly.position,orientation:t.freeLook.orientation},t.zoom=function(e){t.freeFly.zoom(e)},t.enter=function(e){e.deleteInputHandler("camera_zoom_mouse"),e.deleteInputHandler("camera_zoom_touch"),e.deleteInputHandler("camera_zoom_bindings"),t.freeFly.enter(e),t.freeLook.enter(e)},t.exit=function(e){t.freeFly.exit(e),t.freeLook.exit(e)},t}},function(e,t,n){var r=n(4),a=n(28);e.exports=function(e){var t={velocity:[0,0,0],acceleration:10,frameParent:null,position:[0,0,0],minimumSpeed:8,maximumSpeed:1e15,speedMod:!1,forwardPressed:!1,backPressed:!1,leftPressed:!1,rightPressed:!1,downPressed:!1,upPressed:!1,speedUpPressed:!1,speedDownPressed:!1,zoomPressed:0,scrollSpeed:0};if(e)for(var n in e)n in t&&(t[n]=e[n]);if(t.frameParent=r.scene.get(t.frameParent),!t.frameParent)throw Error("Invalid FlyController frame");return t.updateFrameParent=function(e,n){if(n=r.scene.get(n),n&&n!=t.frameParent){var a=r.Frame();a.parent=t.frameParent,a.position=t.position,a.orientation=[0,0,0,1],t.position=n.frame.convert(a,e.clock.time).position}},t.update=function(e,n,a,i,o,s){var u=t.speedMod?.01:1,c=u*r.math.clamp(a||0,t.minimumSpeed,t.maximumSpeed),l=[0,0,0];t.forwardPressed?l=r.math.vAdd(l,r.math.vMul(i,-c)):t.backPressed&&(l=r.math.vAdd(l,r.math.vMul(i,c))),t.leftPressed?l=r.math.vAdd(l,r.math.vMul(o,-c)):t.rightPressed&&(l=r.math.vAdd(l,r.math.vMul(o,c))),t.downPressed?l=r.math.vAdd(l,r.math.vMul(s,c)):t.upPressed&&(l=r.math.vAdd(l,r.math.vMul(s,-c)));var d=n>.1?.1:n;t.speedUpPressed?d>0&&(t.mimimumSpeed=t.minimumSpeed*Math.pow(2,d)):t.speedDownPressed&&d>0&&(t.mimimumSpeed=t.minimumSpeed*Math.pow(.5,d));var M=(Math.abs(t.scrollSpeed)>.01?t.scrollSpeed:0)+-10*t.zoomPressed;l=r.math.vAdd(l,r.math.vMul(i,c*M)),t.velocity=r.math.lerp(Math.min(t.acceleration*n,1),t.velocity,l),t.position=r.math.vAdd(t.position,r.math.vMul(t.velocity,n)),t.resetKeys()},t.zoom=function(e){t.zoomPressed=e},t.enter=function(e){function n(e,n,r){t.speedMod=r}function r(e,n,r){t.forwardPressed=r}function i(e,n,r){t.backPressed=r}function o(e,n,r){t.leftPressed=r}function s(e,n,r){t.rightPressed=r}function u(e,n,r){t.upPressed=r}function c(e,n,r){t.downPressed=r}function l(e,n,r){t.speedUpPressed=r}function d(e,n,r){t.speedDownPressed=r}t.mouse=a.MouseHandler("camera_fly_mouse",{scroll:function(e,n,r,a,i){return!!r&&(t.zoomSpeed=i,!0)}}),t.touch=a.TouchHandler("camera_fly_touch",{multi:function(e,n,r,a,i,o,s){if(2==s&&Math.abs(r)<.02)return t.zoomSpeed=a,!0}}),t.resetKeys=function(){t.zoomSpeed=0,t.speedMod=!1,t.forwardPressed=!1,t.backPressed=!1,t.leftPressed=!1,t.rightPressed=!1,t.upPressed=!1,t.downPressed=!1,t.speedUpPressed=!1,t.speedDownPressed=!1,t.zoomPressed=0},t.bindings=a.KeyBinder("camera_fly_bindings",{LEFT_SHIFT:n,W:r,UP:r,S:i,DOWN:i,A:o,LEFT:o,D:s,RIGHT:s,F:u,R:c,T:l,G:d}),e.addInputHandler(t.mouse),e.addInputHandler(t.touch),e.addInputHandler(t.bindings)},t.exit=function(e){e.deleteInputHandler("camera_fly_mouse"),e.deleteInputHandler("camera_fly_touch"),e.deleteInputHandler("camera_fly_bindings")},t}},function(e,t,n){var r=n(4);e.exports=function(e){var t={targetOrientation:[0,0,0,1],orientation:[0,0,0,1]};if(e)for(var n in e)n in t&&(t[n]=e[n]);return t.offset=r.math.qMulQ(t.targetOrientation,r.math.conjugate(r.app.getWin().vrDevice.getPose().orientation)),t.update=function(){t.orientation=r.math.qMulQ(t.offset,r.app.getWin().vrDevice.getPose().orientation)},t.enter=function(){},t.exit=function(){},t}},function(e,t,n){function r(e,t){for(var n,r=null,a=Math.max(screen.height,screen.width)/4,i=Math.min(screen.height,screen.width)/2,o=25,s=0;s<e.length;s++)e[s]&&(n=e[s][1].getBoundingClientRect(),n.left-o<a&&n.right+o>a&&n.bottom+o>i&&n.top-o<i&&(e[s][1].style.opacity>.4||null===r||t[e[s][1].innerHTML]<t[r[1].innerHTML])&&(r=e[s]));return r}function a(){return g.currPair}function i(){return g.clock}function o(){g.currPair=null,g.clock=0}function s(e,t){var n=e[1];n.style.color="Blue",t.style.color="Blue";var r=e[0];d.actions.onMouseOver(r),g.currPair=e,g.clock++}function u(e,t){var n=e[0],r=e[1];"System"===n.nodeType?(r.style.color="rgb(255, 127, 51)",t.style.color="rgb(255, 127, 51)"):(r.style.color="white",t.style.color="white"),d.actions.onMouseOut(n),o()}function c(e){var t=e[0];d.actions.onClick(t,M.speed.standard,!0)}function l(){g.clock=g.clock+1}var d=n(21),M=n(22),g={currPair:null,clock:null};e.exports={getIntersection:r,getCurrPair:a,resetRay:o,VRmouseover:s,VRmouseout:u,VRmouseclick:c,getClock:i,incClock:l}},function(e,t,n){function r(e){d.currPick=e}function a(){d.currPick=null,d.clock=0}function i(){return d.currPick}function o(e){c.actions.onPick(e,l.speed.standard,!0)}function s(){d.clock=d.clock+1}function u(){return d.clock}var c=n(21),l=n(22),d={currPick:null,clock:0};e.exports={pickOver:r,getCurrPick:i,VRplanetClick:o,incClock:s,getClock:u,resetRay:a}},function(e,t,n){function r(e,t,n){var r;r=e.tags.indexOf("!*")>-1?e.tags.filter(function(e){return"!"!==e[0]}):n.slice(),r=r.filter(function(t){return e.tags.indexOf("!"+t)<0});var a=e.uri;return a=a.replace("\\name",t),a=a.replace("\\tags",n),e.uri.indexOf("\\tag")>-1?n.map(function(t){return[a.replace("\\tag",t),e,t]}):[[a,e,"*"]]}function a(e,t){var n=l.map(function(n){return r(n,e,t)});return n.reduce(function(e,t){return e.concat(t)})}function i(e,t,n){function r(n){if(n?c.patch(l,n):console.verboseWarn("scene/fetch: missing json from "+a),t.length>1)return void i(e,t.slice(1),l);try{e.load(l)}catch(r){console.exception("scene/fetch: Failed to load scene node "+e.name+'from "'+a+'":',r)}}var a=t[0][0],o=t[0][1],s=t[0][2],l=n||{},d={uri:a,type:"json"};if(o.manifest){if(o.data&&o.data[s])return void r(o.data[s][e.name]);var M=new u.JSDataSource(d,function(t){o.data=o.data||{},o.data[s]=t&&t.data?t.data:{},t&&t["delete"](),r(o.data[s][e.name])});return void(M||console.error("Failed to construct a js data source:",d))}var g=new u.JSDataSource(d,function(e){r(e?e.data:void 0),e&&e["delete"]()});g||console.error("Failed to construct a js data source:",d)}function o(e,t){var n=a(e.name,t);return 0!==n.length&&(console.verbose&&console.info("scene/fetch: Load node "+e.name+" from "+n),i(e,n),!0)}var s=n(3),u=n(4),c=n(37),l=[];s.scene.servers&&(l=l.concat(s.scene.servers.split(",").map(function(e){for(var t={manifest:!1,tags:[]},n=e.split("@");n.length>1;)t.tags.push(n.shift());return 0===t.tags.length&&t.tags.push("*"),t.uri=n[0],t.uri.indexOf("\\name")<0&&(t.manifest=!0),t}))),e.exports={servers:l,URL:r,URLs:a,getURLs:i,hook:o}},function(e,t,n){var r=n(38);e.exports={makePatch:function(e,t){var n=r.createPatch(e,t);return n},patch:function(e,t){var n=[];n=Array.isArray(t)?t:this.makePatch(e,t),r.applyPatch(e,n)}}},function(e,t){!function(n){if("object"==typeof t&&"undefined"!=typeof e)e.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var r;r="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,r.rfc6902=n()}}(function(){return function e(t,n,r){function a(o,s){if(!n[o]){if(!t[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(i)return i(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return a(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)a(r[o]);return a}({1:[function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)n[r]=1;for(var a in t)delete n[a];return Object.keys(n)}function a(e){var t={};e.forEach(function(e){for(var n in e)t[n]=(t[n]||0)+1});var n=e.length;for(var r in t)t[r]<n&&delete t[r];return Object.keys(t)}function i(e){return void 0===e?"undefined":null===e?"null":Array.isArray(e)?"array":typeof e}function o(e){return"add"===e.op}function s(e){return"remove"===e.op}function u(e,t,n){function r(n,i){var o=a[n+","+i];if(void 0===o){if(p(e[n-1],t[i-1]))o=r(n-1,i-1);else{var s=[];if(n>0){var u=r(n-1,i);s.push({operations:u.operations.concat({op:"remove",index:n-1}),cost:u.cost+1})}if(i>0){var c=r(n,i-1);s.push({operations:c.operations.concat({op:"add",index:n-1,value:t[i-1]}),cost:c.cost+1})}if(n>0&&i>0){var l=r(n-1,i-1);s.push({operations:l.operations.concat({op:"replace",index:n-1,original:e[n-1],value:t[i-1]}),cost:l.cost+1})}var d=s.sort(function(e,t){return e.cost-t.cost})[0];o=d}a[n+","+i]=o}return o}var a={"0,0":{operations:[],cost:0}},i=isNaN(e.length)||e.length<=0?0:e.length,u=isNaN(t.length)||t.length<=0?0:t.length,c=r(i,u).operations,l=c.reduce(function(e,t){var r=M(e,2),a=r[0],u=r[1];if(o(t)){var c=t.index+1+u,l=c<i+u?String(c):"-",p={op:t.op,path:n.add(l).toString(),value:t.value};return[a.concat(p),u+1]}if(s(t)){var p={op:t.op,path:n.add(String(t.index+u)).toString()};return[a.concat(p),u-1]}var A=n.add(String(t.index+u)),m=d(t.original,t.value,A);return[a.concat.apply(a,g(m)),u]},[[],0]),A=M(l,2),m=A[0];A[1];return m}function c(e,t,n){var i=[];return r(e,t).forEach(function(e){i.push({op:"remove",path:n.add(e).toString()})}),r(t,e).forEach(function(e){i.push({op:"add",path:n.add(e).toString(),value:t[e]})}),a([e,t]).forEach(function(r){i.push.apply(i,g(d(e[r],t[r],n.add(r))))}),i}function l(e,t,n){return p(e,t)?[]:[{op:"replace",path:n.toString(),value:t}]}function d(e,t,n){var r=i(e),a=i(t);return"array"==r&&"array"==a?u(e,t,n):"object"==r&&"object"==a?c(e,t,n):l(e,t,n)}var M=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){for(var n,r=[],a=e[Symbol.iterator]();!(n=a.next()).done&&(r.push(n.value),!t||r.length!==t););return r}throw new TypeError("Invalid attempt to destructure non-iterable instance")},g=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)};n.subtract=r,n.intersection=a,n.objectType=i,n.diffArrays=u,n.diffObjects=c,n.diffValues=l,n.diffAny=d,Object.defineProperty(n,"__esModule",{value:!0});var p=e("./equal").compare},{"./equal":2}],2:[function(e,t,n){"use strict";function r(e,t){for(var n=[],r=0,a=e.length;r<a;r++)n.push([e[r],t[r]]);return n}function a(e,t){return e.length===t.length&&r(e,t).every(function(e){return o(e[0],e[1])})}function i(e,t){var n=Object.keys(e),r=Object.keys(t);return!!a(n,r)&&n.every(function(n){return o(e[n],t[n])})}function o(e,t){return e===t||(Array.isArray(e)&&Array.isArray(t)?a(e,t):Object(e)===e&&Object(t)===t&&i(e,t))}n.compare=o,Object.defineProperty(n,"__esModule",{value:!0})},{}],3:[function(e,t,n){"use strict";var r=function o(e,t,n){var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:o(a,t,n)}if("value"in r&&r.writable)return r.value;var i=r.get;if(void 0!==i)return i.call(n)},a=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(n,"__esModule",{value:!0});n.MissingError=function(e){function t(e){i(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,"Value required at path: "+e),this.path=e,this.name=this.constructor.name}return a(t,e),t}(Error),n.InvalidOperationError=function(e){function t(e){i(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,"Invalid operation: "+e),this.op=e,this.name=this.constructor.name}return a(t,e),t}(Error),n.TestError=function(e){function t(e,n){i(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,"Test failed: "+e+" != "+n),this.actual=e,this.expected=n,this.name=this.constructor.name,this.actual=e,this.expected=n}return a(t,e),t}(Error)},{}],4:[function(e,t,n){"use strict";function r(e,t){return t.map(function(t){var n=u[t.op];return void 0===n?new o(t.op):n(e,t)})}function a(e,t){var n=new s;return c(e,t,n)}var i=function(e){return e&&e.__esModule?e:{"default":e}};n.applyPatch=r,n.createPatch=a,Object.defineProperty(n,"__esModule",{value:!0});var o=e("./errors").InvalidOperationError,s=e("./pointer").Pointer,u=i(e("./patch")),c=e("./diff").diffAny},{"./diff":1,"./errors":3,"./patch":5,"./pointer":6}],5:[function(e,t,n){"use strict";function r(e,t,n){Array.isArray(e)?"-"==t?e.push(n):e.splice(t,0,n):e[t]=n}function a(e,t){Array.isArray(e)?e.splice(t,1):delete e[t]}function i(e,t){var n=d.fromJSON(t.path).evaluate(e);return void 0===n.parent?new p(t.path):(r(n.parent,n.key,t.value),null)}function o(e,t){var n=d.fromJSON(t.path).evaluate(e);return void 0===n.value?new p(t.path):(a(n.parent,n.key),null)}function s(e,t){var n=d.fromJSON(t.path).evaluate(e);return void 0===n.value?new p(t.path):(n.parent[n.key]=t.value,null)}function u(e,t){var n=d.fromJSON(t.from).evaluate(e);if(void 0===n.value)return new p(t.from);var i=d.fromJSON(t.path).evaluate(e);return void 0===i.parent?new p(t.path):(a(n.parent,n.key),r(i.parent,i.key,n.value),null)}function c(e,t){var n=d.fromJSON(t.from).evaluate(e);if(void 0===n.value)return new p(t.from);var i=d.fromJSON(t.path).evaluate(e);return void 0===i.parent?new p(t.path):(a(n.parent,n.key),r(i.parent,i.key,n.value),null)}function l(e,t){var n=d.fromJSON(t.path).evaluate(e),r=M(n.value,t.value);return r?null:new A(n.value,t.value)}n.add=i,n.remove=o,n.replace=s,n.move=u,n.copy=c,n.test=l,Object.defineProperty(n,"__esModule",{value:!0});var d=e("./pointer").Pointer,M=e("./equal").compare,g=e("./errors"),p=g.MissingError,A=g.TestError},{"./equal":2,"./errors":3,"./pointer":6}],6:[function(e,t,n){"use strict";function r(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function a(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var i=function(){function e(e,t){for(var n in t){var r=t[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(e,t)}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(n,"__esModule",{value:!0});n.Pointer=function(){function e(){var t=void 0===arguments[0]?[""]:arguments[0];o(this,e),this.tokens=t}return i(e,{toString:{value:function(){return this.tokens.map(a).join("/")}},evaluate:{value:function(e){for(var t=null,n=null,r=1,a=this.tokens.length;r<a;r++)t=e,n=this.tokens[r],e=(t||{})[n];return{parent:t,key:n,value:e}}},push:{value:function(e){this.tokens.push(e)}},add:{value:function(t){var n=this.tokens.concat(String(t));return new e(n)}}},{fromJSON:{value:function(t){var n=t.split("/").map(r);if(""!==n[0])throw new Error("Invalid JSON Pointer: "+t);return new e(n)}}}),e}()},{}]},{},[4])(4)})},function(e,t,n){function r(){var e;o.scene.hooks.forEach(function(t,n){t==this&&(e=n)}),e&&(console.verboseInfo("scene/hooks/static: Removing static scene hook"),o.scene.hooks.splice(e,1))}function a(e){if(!i.scene["static"])return r(),!1;if(e.loaded)return!0;var t=i.scene["static"][e.name];if(!t)return!1;try{e.load(t.json);for(var n in t.parents){var a=o.scene.get(n),s={children:{}};s.children[e.name]=t.parents[n],a.load(s)}}catch(u){console.exception("scene/hooks/static.js: Failed to load scene node "+e.name,u)}return!0}var i=n(3),o=n(4);e.exports={fini:r,hook:a}},function(e,t,n){function r(){console.log("graphics/graphics: Initializing queues");var e=a.app.core,t=i._queues=e.getRenderQueueList();i.queues={virtualDraw:t.getQueue("virtualDraw"),virtualScan:t.getQueue("virtualScan"),"default":e.getDefaultRenderQueue(),identity:t.getQueue("identity"),transparent:t.getQueue("transparent"),orbit:t.getQueue("orbit"),panoSphere:t.getQueue("fffffff"),panoImage:t.getQueue("panoImage")},i.queues.addConstraint=function(e,t){i._queues.addConstraint(i.queues[e],i.queues[t])},i.queues.activate=function(e){i._queues.activate(i.queues[e])},i.queues.transparent.order=1,i.queues.virtualDraw.order=2,i.queues.panoImage.order=3,i.queues.orbit.order=4,i.queues.identity.order=5,i.queues["default"].order=6,i.queues.virtualScan.order=7,i.queues.activate("transparent"),i.queues.activate("virtualDraw"),i.queues.activate("panoImage"),i.queues.activate("orbit"),i.queues.activate("identity"),i.queues.activate("virtualScan")}var a=n(4),i={};i.init=function(){r(),i.init=function(){}},e.exports=i},function(e,t,n){!function(){var e=n(4),t=n(42),r=n(18),a=n(44),i=n(48),o=n(21),s=n(22),u=n(19),c=n(53);n(e.settings.mobile?54:55),n(56),n(57);var l;r.components.eclipse=function(e){a.handleMessage(e)},n(1).init(document.getElementById("canvas"),function(){l=n(58)("NASA's Eyes: Eclipse 2017",1600,900,!1,!0,document.getElementById("canvas")),e.app.setWin(l),e.scene.tags=["eclipse"],e.scene.hooks=["fetch"],e.scene.get("SS").triggerLoad(),e.settings.camera.target="Sun",t.init(l),l._camera.clock={time:{value:556612000.2144},rate:0},e.swapImageIconPath="/assets/swap.svg",e.mapPinIconPath="/assets/map_pin.svg",a.init(l);var r=e.scene.get("Earth");r.addTrigger(null,function(){var e,t=c.locationData,n=t.tier1,i=t.tier2,o=t.tier3,s=t.shadowLabels;r.renderables.addLOD({start:0,end:11},"tier1"),r.renderables.addLOD({start:0,end:9.49352114988961},"tier2"),r.renderables.addLOD({start:0,end:9},"tier3"),r.renderables.addLOD({start:0,end:24},"markers"),r.renderables.addLOD({start:0,end:11},"shadowLabels");for(e in n)n[e].time=0,a.addSurfaceLabel(r,n[e],"tier1","location",{color:"#EEEEEE"});for(e in i)i[e].time=0,a.addSurfaceLabel(r,i[e],"tier2","location",{color:"#EEEEEE"});for(e in o)o[e].time=0,a.addSurfaceLabel(r,o[e],"tier3","location",{color:"#EEEEEE"});for(e in s)s[e].time=0,a.addSurfaceLabel(r,s[e],"shadowLabels","shadowLabel",{color:"#909298"})});var d=!0;l.bind("T",function(e,t,n){return!!n&&(l._window.camera.clock={time:l._window.camera.clock.time,rate:d?600:0},d=!d,!0)}),o.actions.onPick=function(e,t,n){if(!e||!e.node||"interactable"in e.node&&!e.node.interactable)return!1;if("Earth"==e.node.name){var r=l.getCorrectedPositionNDC(t,n),i=a.getLatLongFromEllipsoidSelection(l._camera,e.node,r[0],r[1]);if(i){var u=[180*i[0]/Math.PI,180*i[1]/Math.PI];a.locationClicked(u)}}else o.actions.onClick(e.node,s.speed.standard,!1)},o.actions.backgroundSingleTap=function(e,t,n,r,a,i,s,u,c,l){o.actions.onPick(l,s,u)},o.actions.backgroundDoubleTap=function(e,t,n,r,a,i,o,s,u,c){console.verboseLog("Double tap "+o+" : "+s+". Picked fragment info: "+c)},u.removeAllEventHandlers("click"),u.removeAllEventHandlers("mouseover"),u.removeAllEventHandlers("mouseout"),u.removeAllEventHandlers("onremove"),u.disableInteractions(["Surface"]),u.addEventHandler("click","HandleLabelClick",function(e,t){var n=t.target;"Marker"==n.labelType&&"eclipse_marker"==n.id&&a.displayMarkerPopup(n)}),u.addEventHandler("onadd","AddPopToMarker",function(e,t){if("Marker"==t.labelType&&"eclipse_marker"==t.id&&!t.popup){var n=t.locationId,r=t.name,i=a.hasLocation(n);a.setEclipseMarkerDiv(t),a.attachPopup(t,i,n,r),a.isMarkerPopupDisplayed()&&a.displayMarkerPopup(t)}}),window.setTimeout(function(){t.applyOrbitCam(l,i.initialCamera())},2e3),console.info("Module startup complete")})}()},function(e,t,n){var r=n(4),a=n(3),i=n(28),o=n(33),s=n(22),u=n(24),c=n(31),l=n(26),d=n(43),M={FreeFly:c,Orbit:l,SurfaceOrbit:d};M.init=function(e){Object.keys(M).indexOf(a.camera.type)<0&&(console.error("ranger/camera: Invalid camera type "+a.camera.type),a.camera.type="Orbit");var t=r.clock.Clock(a.camera.time,a.camera.rate);e.initCamera({clock:t,target:r.scene.get(a.camera.target)}),e.setCamera(M[a.camera.type](a.camera)),M.vrBindings=i.KeyBinder("vr_bindings",{M:function(){a.stereo=!a.stereo,e._camera.projectionDirty=!0},V:function(){a.vr=!a.vr,M.updateCameraType(e),e._camera.projectionDirty=!0}}),e.addInputHandler(M.vrBindings)},M.updateCameraType=function(e){var t;if(a.vr){if(a.camera.type="FreeFly",t={lookController:o({targetOrientation:e.cameraState.freeLook.orientation,orientation:e.cameraState.freeLook.orientation}),parent:e.cameraState.target,position:e.cameraState.frame.position,orientation:e.cameraState.frame.orientation,frame:e.cameraState.frame},e.setCamera(M[a.camera.type](t)),e._camera.projectionDirty=!0,e.vrDevice.capabilities.canPresent){var n={};n.leftBounds=[0,0,.5,1],n.rightBounds=[.5,0,.5,1],n.source=document.getElementById("canvas"),e.vrDevice.requestPresent(n)}}else{var r=e.cameraState.parent,i=r.ellipsoid?Math.max(r.ellipsoid[0],r.ellipsoid[1],r.ellipsoid[2]):1,u=.05,c={frame:e.cameraState.frame,target:r,parent:r,radius:3*i,positionTime:s.speed.standard,win:e,minRadius:2*i,maxRadius:r.maxSemiMajorAxis/(Math.tan(e._camera.fov)*u)};e.setCamera(s.trackingTransition(c))}},M.applyOrbitCam=function(e,t){e.setCamera(new l(t))},M.constants=u,e.exports=M},function(e,t,n){var r=n(4),a=n(28),i=n(25);e.exports=function(e,t,n,o,s,u,c){void 0===c&&(c=0),void 0===u&&(u=0),void 0===s&&(s=-Math.PI/2),void 0===o&&(o=[0,0,0]);var l=i({offset:o,targetNode:e,orientingNode:n,azimuth:u,elevation:c,radius:t,minimumElevation:s,pitchSpeed:.01,yawSpeed:.01,zoomFactor:-1e-4});return l.name=function(){return"SurfaceOrbit"+(l.targetNode?" target "+l.targetNode.name:"with invalid target")+(l.orientingNode?" oriented by "+l.orientingNode.name:"")},l.frame=r.Frame(),l.frame.parent=e,l.update=function(e){var t=r.Frame();if(t.parent=l.orientingNode,t=l.targetNode.frame.convert(t,e.clock.time),!(r.math.vNorm(t.position)<1e-7)){var n=r.math.vNormalized(r.math.vSub(l.offset,t.position)),a={parent:l.orientingNode,position:[1,0,0],
orientation:[0,0,0,1]};a=l.targetNode.frame.convert(a,e.clock.time);var i=r.math.vNormalized(r.math.vSub(a.position,t.position));i=r.math.vNormalized(r.math.vSub(i,r.math.vMul(n,r.math.vDot(n,i))));var o=r.math.cross(i,n),s=r.math.vMul(i,l.radius);s=r.math.qMulV(r.math.angleAxis(l.elevation,o),s),s=r.math.qMulV(r.math.angleAxis(l.azimuth,n),s),s=r.math.vAdd(s,l.offset);var u=r.math.vNormalized(r.math.vSub(l.offset,s)),c=r.math.vSub(n,r.math.vMul(u,r.math.vDot(u,n)));r.math.vNorm(c)<1e-7&&(c=i),c=r.math.vNormalized(c),l.frame={parent:l.targetNode,position:s},l.frame.orientation=r.math.rotationBetweenVectors([0,0,-1],u);var d=r.math.qMulV(l.frame.orientation,[0,1,0]),M=r.math.rotationBetweenVectors(d,c);l.frame.orientation=r.math.qMulQ(M,l.frame.orientation)}},l.zoom=function(e){return l.radius+=e,l.radius<1e-7&&(l.radius=1e-7),!0},l.yaw=function(e){return l.azimuth+=e,l.azimuth%=2*Math.PI,!0},l.pitch=function(e){return l.elevation+=e,l.elevation>Math.PI/2-1e-5&&(l.elevation=Math.PI/2-1e-5),l.elevation<s+1e-7&&(l.elevation=s+1e-7),!0},l.enter=function(e){l.mouse=a.MouseHandler("camera_mouse",{drag:function(e,t,n){return t&&l.yaw(-t*l.yawSpeed),n&&l.pitch(n*l.pitchSpeed),!0},scroll:function(e,t,n,r,a){return a&&l.zoom(a*l.zoomFactor*l.radius),!0}}),l.bindings=a.KeyBinder("camera_bindings",{A:function(){return l.yaw(-5*l.yawSpeed)},D:function(){return l.yaw(5*l.yawSpeed)},R:function(){return l.pitch(5*l.pitchSpeed)},F:function(){return l.pitch(-5*l.pitchSpeed)},W:function(){return l.zoom(5*l.zoomFactor*l.radius)},S:function(){return l.zoom(-5*l.zoomFactor*l.radius)}}),e.addInputHandler(l.mouse),e.addInputHandler(l.bindings)},l.exit=function(e){e.deleteInputHandler("camera_mouse"),e.deleteInputHandler("camera_bindings")},l.getTarget=function(){return l.targetNode},l}},function(e,t,n){function r(e){if(void 0===H.update.send)return void(le||(console.verboseError("__ranger.update.send is undefined. Ranger will not send messages until defined."),le=!0));var t={};t.eclipse=e,H.update.send(t)}function a(){var e=H.scene.get("Earth");e.addTrigger(null,function(){var t=e.renderables.getRenderable("geoid","model").material;!function n(){return t.ready()?void r({loadedEarth:!0}):void setTimeout(n,100)}()})}function i(){Y=new H.Renderable(H.app.core,new H.DataContext(H.app),ge.renderableAttributes),ge.renderable=Y,H.scene.fixedRenderables.Headlight=ge}function o(e){H.scene.fixedRenderables.Headlight.enabled=e}function s(e){console.verboseLog("Setting Default Eclipse Settings for View: ",e),J.revertViewports(),P.setTime(q.viewSettings[e].defaultTime),P.setRate(q.viewSettings[e].defaultTimeRate)}function u(e){var t,n;return"view"in e?(t=e.view,n=!("toScale"in e)||e.toScale,te=n,void(t in $.switchTo?(console.verboseLog("Setting View to:",t,"with toScale:",n),s(t),ee=t,de=!0,K.updateScale(n,$),$.switchTo[t](q.viewSettings[t].defaultFOV)):console.verboseError("Unknow view:",t))):(console.verboseError("Error in Message: view not provided in setView."),void console.verboseError("Data provided:",e))}function c(e){var t=H.scene.get("Earth");if(null!==ae.earth&&null!==ae.politicalEarth)return e?t.renderables.getRenderable("geoid","model").material=ae.politicalEarth:t.renderables.getRenderable("geoid","model").material=ae.earth,void(t.renderables.getRenderable("atmosphere","model").enabled=!e);if(e){var n=["$RenderableProjectedMap",{projection:"WGS84",queue:"transparent",material:["$EarthPolitical",{specularStrength:.05,specularExponent:15,moonRadius:1738,naturalMode:0,moonPosition:[0,0,0],sunRadius:696300,sunPosition:[0,0,0],bendPercent1:.215,bendPercent2:.42,bendShadow1:[.15,.15,.15,1],bendShadow2:[.08,.08,.08,1],umbraShadow:[.4,.4,.4,1],eclipsePenumbra:"$RANGER.IMAGES/static/images/penumbra.jpg",cubeTemplateParams:{prefix:"$RANGER.IMAGES/static/images/earth_political_cube_",suffix:".jpg"}}]}];ae.earth=t.renderables.getRenderable("geoid","model").material,n=Z.replace(n),t.renderables.getRenderable("geoid","model").updateMaterial(H.app.core,n),t.renderables.getRenderable("atmosphere","model").enabled=!e,ae.politicalEarth=t.renderables.getRenderable("geoid","model").material}else console.verboseError("interface:: Should not be possible, starting with political map enabled?")}function l(e){var t=H.scene.get("Earth");for(var n in e)switch(n){case"name":console.verboseLog("Label will display name:",e[n]),ne=e[n];break;case"time":console.verboseLog("Label will display time:",e[n]),re=e[n];break;default:console.verboseError("Unknown Display Setting:",n)}var r;for(var a in ce)r="",ne&&(r+=ce[a].name),re&&(ne?r=r+"<br />"+ce[a].time:r+=ce[a].time),F.updateLabel(t,a,ce[a].latLng,{Text:r},!1,ce[a].lodKey)}function d(e){var t=H.scene.get("Earth");e?t.renderables.lodEnabled("shadowLabels",!0):t.renderables.lodEnabled("shadowLabels",!1)}function M(e){var t=X.UTC2ET(e),n=q.validateTime(ee,t);if(n)P.setTime(t),P.pip&&(P.pip._camera.clock={time:{value:t},rate:0}),console.verboseLog("Setting time to",e,"for view:",ee);else{console.verboseError("Time Setting Provided invalid. Time provided: ",e);var r=[X.ET2UTC(q.viewSettings[ee].minTime),X.ET2UTC(q.viewSettings[ee].maxTime)];console.verboseError("Time needs to be in Interval: [",r[0],",",r[1],"]")}}function g(e){var t=q.validateTimeRate(ee,e);if(t)P.setRate(e),console.verboseLog("Setting Time Rate to:",e);else{console.verboseError("TimeRate Setting Provided invalid. TimeRate provided: ",e);var n=[q.viewSettings[ee].minTimeRate,q.viewSettings[ee].maxTimeRate];console.verboseError("TimeRate needs to be in Interval: [",n[0],",",n[1],"]")}}function p(e){var t=q.validateFOV(ee,e);if(t)P._camera.fov=e,console.verboseLog("Setting FOV of Camera to:",e);else{console.verboseError("FOV Setting Provided invalid. FOV provided: ",e);var n=[q.viewSettings[ee].minFOV,q.viewSettings[ee].maxFOV];console.verboseError("FOV needs to be in Interval: [",n[0],",",n[1],"]")}}function A(e){o(e),e?console.verboseLog("Turning HeadLight On, value received:",e):console.verboseLog("Turning HeadLight Off, value received:",e)}function m(e){c(e),e?console.verboseLog("Political map enabled, value received:",e):console.verboseLog("Political map disabled, value received:",e)}function f(e){te!==e&&(te=e,K.updateScale(e,$),ee in $.switchTo&&$.switchTo[ee](),e?console.verboseLog("Setting Scene to be to Scale, value received:",e):console.verboseLog("Setting Scene to not be to Scale, value received:",e))}function D(){return te}function N(){de||(console.verboseLog("Swapping Displays"),J.swapPip())}function h(e){return e in ue}function T(e){W=e}function y(){return oe}function L(e){e&&e.popup&&(oe=!0,e.popup.style.display="")}function v(e){e&&e.popup&&(oe=!1,e.popup.style.display="none")}function w(e,t,n,r){e&&e.popup?(e.popup.titleDiv.innerHTML=t,r?(e.popup.locationButton.id="remove_location_btn",e.popup.locationButton.innerHTML="- Remove",e.popup.locationButton.locationId=n,e.popup.locationButton.locationExists=r):(e.popup.locationButton.id="add_location_btn",e.popup.locationButton.innerHTML="+ Add",e.popup.locationButton.locationId=n,e.popup.locationButton.locationExists=r)):console.verboseError("Marker or Popup does not exist.")}function E(e){var t,n,r,a=!1,i=H.scene.get("Earth");i.addTrigger(null,function(){if("id"in e){if(h(e.id)){r=e.id;var o=ue[r];n=o.name,t=o.latLng,a=!0}else"name"in e&&"location"in e?(r=e.id,n=e.name,t=e.location,a=!0):(console.verboseError("Could not set Marker, either location does not exist or missing information from data recieved."),console.verboseError("Data received: ",e));if(a){var s=!1;"displayPopup"in e&&(s=e.displayPopup),ie.location_id=r,ie.Text=n,ie.name=n,ie.latLng=t,G?F.updateLabel(i,ie.id,t,ie,!1,"markers"):(ie.icon=H.mapPinIconPath,G=F.addLabel(i,ie.id,t,ie,"markers")),w(W,ie.name,ie.location_id,h(e.id)),s?(L(W),W||(oe=!0)):(v(W),W||(oe=!1)),console.verboseLog("Setting Marker to new Location. Id:",ie.location_id,"LatLng:",ie.latLng);var u=[X.ET2UTC(q.viewSettings[ee].minTime),X.ET2UTC(q.viewSettings[ee].maxTime)];J.setPip(n,t,u)}}})}function I(e){if(!("id"in e&&"name"in e&&"location"in e))return console.verboseError("Could not Add Location, missing id, name, or location in data received."),void console.verboseError("Data received:",e);console.verboseLog("Adding Location to Earth. Location Data:",e);var t=e.id,n=e.name,r=e.location;ue[t]={name:n,latLng:r},W&&W.popup&&W.locationId===t&&w(W,n,t,!0)}function j(e,t,n,r,a){if(!("id"in t&&"text"in t&&"location"in t&&"time"in t))return console.verboseError("Could not Add Location, missing id, text, location, or time in data received."),void console.verboseError("Data received:",t);var i=t.id,o=t.text,s=t.location,u=t.time,c={id:i,Text:o,name:o,time:u};for(var l in a)c[l]=a[l];F.addLabel(e,i,s,c,n),"location"===r&&(ce[i]={name:o,time:u,latLng:s,lodKey:n})}function x(e){if(h(e)){console.verboseLog("Removing Location:",e);var t=ue[e].name;W&&W.popup&&W.locationId===e&&w(W,t,e,!1),delete ue[e]}else console.verboseError("Attempted to remove a non-existing Location.")}function b(e){var t={};switch(e){case"FOV":t.FOV=P._camera.fov;break;case"maxFOV":t.maxFOV=q.viewSettings[ee].maxFOV;break;case"minFOV":t.minFOV=q.viewSettings[ee].minFOV;break;case"timeRate":t.timeRate=P.getRate();break;case"maxTimeRate":t.maxTimeRate=q.viewSettings[ee].maxTimeRate;break;case"minTimeRate":t.minTimeRate=q.viewSettings[ee].minTimeRate;break;case"time":t.time=X.ET2UTC(P.getTime());break;case"maxTime":t.maxTime=X.ET2UTC(q.viewSettings[ee].maxTime);break;case"minTime":t.minTime=X.ET2UTC(q.viewSettings[ee].minTime);break;case"timeRateValues":t.timeRateValues=q.viewSettings[ee].timeRateValues;break;default:t=null,console.warn("Unknown info request:",e)}null!==t&&r(t)}function C(e){e?console.verboseLog("Keyboard Events have been enabled, value received:",e):console.verboseLog("Keyboard Events have been disabled, value received:",e),P.allowKeypress=e}function S(){H.settings.usePainters=!0;var e=[];e=H.settings.mobile?[["Stars"],["Galaxies"],["Sun"],["Earth","ConeUmbra","ConePenumbra","Moon","EarthMoonBarycenter"]]:[["Stars"],["Galaxies"],["Sun"],["Earth","ConeUmbra","ConePenumbra","Moon","EarthMoonBarycenter"]],H.scene.paintersSort=function(t,n){var r=[];for(var a in e){var i=[];for(var o in e[a]){var s=e[a][o];for(var u in t)t[u].id.node.name===s&&i.push(t[u])}i.length>0&&r.push(i)}if(r.length>0){for(var c={near:n.near,far:n.far},l=[],d=0;d<r.length;d++)l.push(c);r.push(l)}return r}}function z(){P.setRate(0),console.verboseLog("Started Dragged on Pip, Stopping Time."),r({draggedOnPip:!0})}function O(e){P=e,a(),i(),F=V(),P.endFrameUpdates.timeClamp=function(e,t){var n=t.getTime();n>q.viewSettings[ee].maxTime&&(n=q.viewSettings[ee].minTime),n<q.viewSettings[ee].minTime&&(n=q.viewSettings[ee].maxTime),t.setTime(n)},$.setTransitionComplete(function(){de=!1,console.verboseLog("Transition to new View Completed."),r({setViewDone:!0})}),P.endFrameUpdates.reportCurrentFPS=function(){if(H.settings.fps){var e=Date.now();if(Me.currentCount++,e-Me.lastTime>Me.interval){if(Me.lastTime=e,Me.frameRate.push(Math.round((Me.currentCount-Me.lastCout)/Me.interval*1e3)),Me.lastCout=Me.currentCount,Array.isArray(Me.frameRate)&&Me.frameRate.length>0){var t=0;Me.frameRate.forEach(function(e){t+=e}),console.log("After "+Math.round((e-Me.startTime)/1e3)+"s, avg FPS is "+Math.round(t/Me.frameRate.length))}console.log("FPS "+Me.frameRate[Me.frameRate.length-1])}}},S(),J.setStartDragHandler(z)}function k(e){for(var t in e)switch(t){case"setView":u(e[t]);break;case"setLabelDisplay":l(e[t]);break;case"setTime":M(e[t]);break;case"setTimeRate":g(e[t]);break;case"setFOV":p(e[t]);break;case"headLightEnabled":A(e[t]);break;case"politicalMapEnabled":m(e[t]);break;case"shadowLabelsEnabled":d(e[t]);break;case"toScale":f(e[t]);break;case"setMarker":E(e[t]);break;case"addLocation":I(e[t]);break;case"removeLocation":x(e[t]);break;case"swapDisplays":N();break;case"getInfo":b(e[t]);break;case"keyboardEventsEnabled":C(e[t]);break;default:console.warn("Received unknown command:",t)}}function Q(e){var t={};if(t.locationClicked=e,console.verboseLog("Location Clicked: ",e),"debug"in H.settings&&H.settings.debug){var n={};return n.id="debug-"+se.count,n.name="debug-"+se.count,n.location=e,void E(n)}r(t)}function U(e){var t={};if(t.locationSelectedToAdd=e,console.verboseLog("location Selected to Add:",e),"debug"in H.settings&&H.settings.debug){var n={};return n.id=e,n.name=ie.Text,n.location=ie.latLng,I(n),void(se.count=se.count+1)}r(t)}function _(e){var t={};return t.locationSelectedForRemoval=e,console.verboseLog("location Selected For Removal:",e),"debug"in H.settings&&H.settings.debug?void x(e):void r(t)}function B(e,t,n,r){var a=document.getElementById("marker_popup");a&&a.parentNode.removeChild(a);var i=document.createElement("div"),o=document.createElement("div"),s=document.createElement("div"),u=document.createElement("button"),c=document.createElement("div"),l=document.createElement("div");i.className="map_popover eclipse_modal light_background",o.className="location_title",s.className="location_arrow",u.className="button",c.className="close_btn",l.className="icon",i.id="marker_popup",o.innerHTML=r,t?(u.id="remove_location_btn",u.innerHTML="- Remove",u.locationId=n,u.locationExists=t):(u.id="add_location_btn",u.innerHTML="+ Add",u.locationId=n,u.locationExists=t),i.style.position="absolute",i.style.transform="translate(-50%, -100%)",i.style["max-width"]="none",u.addEventListener("click",function(e){e.stopPropagation(),u.locationExists?_(u.locationId):U(u.locationId),v(W)},!1),c.addEventListener("click",function(e){e.stopPropagation(),v(W)}),e.appendChild(i),i.appendChild(c),c.appendChild(l),i.appendChild(o),i.appendChild(u),i.appendChild(s),i.style.top=-s.offsetWidth+"px",i.style.display="none",i.locationButton=u,i.closeButton=c,i.titleDiv=o,e.popup=i,e.attachedElement=i}function R(e,t,n,r){var a=0,i=0;e.aspect>=1?(a=Math.atan(Math.tan(e.fov/2)*e.aspect*-n),i=e.fov/2*r):(a=e.fov/2*-n,i=Math.atan(Math.tan(e.fov/2)/e.aspect*r));var o=H.scene.cameraData[e.id].attachedNode.frame.convert(H.scene.get("Earth").frame.get(e.clock.time),H.app.getWin()._window.camera),s=[0,0,1],u=Math.tan(a)*s[2]+s[0],c=-1*Math.tan(i)*s[2]+s[1],l=H.math.vMul(H.math.vNormalized([u,c,s[2]]),-1),d=H.math.qMulV(H.math.qMulQ(H.math.conjugate(o.orientation),e.frame.orientation),l),M=H.scene.get("Earth").frame.convert({parent:H.scene.cameraData[e.id].attachedNode,position:e.frame.position,orientation:e.frame.orientation},e).position;d=H.math.vMul(d,1e6);var g=H.math.lineEllipsoidIntersection(t.contents["static"].ellipsoid,M,d);if(0!==g.size()){var p=H.math.vAdd(M,H.math.vMul(d,g.get(0))),A=H.math.rectangularToGeodetic(t.contents["static"].ellipsoid,p);return[A[1],A[0]]}}var P,Y,F,G,W,H=n(4),V=n(45),Z=n(16),X=n(46),q=n(47),$=n(48),J=n(51),K=n(52),ee="Earth",te=!0,ne=!0,re=!0,ae={earth:null,politicalEarth:null},ie={id:"eclipse_marker",location_id:"eclipse_marker",type:"Label",labelType:"Marker",Text:"Eclipse_Marker",icon:"eclipse/map_pin.svg",time:"0",latLng:[0,0]},oe=!1,se={count:0},ue={},ce={},le=!1,de=!1,Me={startTime:Date.now(),lastTime:Date.now(),lastCout:0,currentCount:0,interval:1e3,frameRate:[]},ge={renderableAttributes:{type:"Light",mode:"distantPoint",name:"headlight",irradience:[1,1,1],end:21.20300751956555},transform:{orientation:[0,0,0,1],position:[0,0,1e5]},enabled:!1};e.exports={init:O,addEarthLoadedNotification:a,handleMessage:k,sendMessage:r,locationClicked:Q,locationSelectedToAdd:U,locationSelectedForRemoval:_,getLatLongFromEllipsoidSelection:R,isNormalScale:D,attachPopup:B,setMarker:E,hasLocation:h,addSurfaceLabel:j,eclipseMarkerData:ie,displayMarkerPopup:L,hideMarkerPopup:v,setEclipseMarkerDiv:T,isMarkerPopupDisplayed:y}},function(e,t,n){var r=n(4);e.exports=function(){var e={};return e.availableRenderables=[],e.surfaceLabelMap={},e.defaultLodSetting={lodKey:"surfaceLabels",rangeParams:{start:0,end:16}},e.defaultParameters={id:0,location_id:0,type:"Label",labelType:"Surface",Text:"Label",icon:"",time:"0",name:"Label"},e.getTranslateFromLatLng=function(e,t){var n=[t[1]*Math.PI/180,t[0]*Math.PI/180],a=r.math.geodeticToRectangular(e.ellipsoid,[n[0],n[1],.001]);return a},e.addNodeToSurfaceLabels=function(t,n,r){e.surfaceLabelMap[t.name]={},e.surfaceLabelMap[t.name].lodSettings={},e.surfaceLabelMap[t.name].lodSettings.lodKey="surfaceLabels",e.surfaceLabelMap[t.name].lodSettings.rangeParams={},e.surfaceLabelMap[t.name].labels={};for(var a in e.defaultLodSetting.rangeParams)e.surfaceLabelMap[t.name].lodSettings.rangeParams[a]=e.defaultLodSetting.rangeParams[a];n&&(e.surfaceLabelMap[t.name].lodSettings.lodKey=n),r&&(e.surfaceLabelMap[t.name].lodSettings.rangeParams=r),t.renderables.addLOD(e.surfaceLabelMap[t.name].lodSettings.rangeParams,e.surfaceLabelMap[t.name].lodSettings.lodKey,"surfaceLabelRange")},e.getNodeSurfaceLabels=function(t){return t.name in e.surfaceLabelMap||e.addNodeToSurfaceLabels(t),e.surfaceLabelMap[t.name]},e.hasLabel=function(t,n){var r=e.getNodeSurfaceLabels(t);return n in r.labels},e.addLabel=function(t,n,r,a,i){var o=e.getNodeSurfaceLabels(t);n in o.labels&&(console.warn("Attempting to add a new label with an id of an existing Label, updating existing Label instead."),e.updateLabel(t,n,r,a));var s,u=null,c=null,l={};for(s in e.defaultParameters)l[s]=e.defaultParameters[s];l.id=n,l.location_id=n;for(s in a)l[s]=a[s];for(s in o.lodSettings.lodKey.rangeParams)l[s]=o.lodSettings.lodKey.rangeParams[s];var d=e.getTranslateFromLatLng(t,r);return l.transform={enabled:!0,translate:d},l.latLng=r,i||(i=o.lodSettings.lodKey),e.availableRenderables.length>0&&(u=e.availableRenderables.pop().renderable,u.data=l),c=u?t.renderables.emplaceRenderable(l,u,n,i):t.renderables.addRenderable(l,n,i),t.renderables.getRenderable(n,i),t.renderables.updateRenderableTransform(l.transform,c,i),o.labels[n]={},o.labels[n].renderableName=c,o.labels[n].json=l,!0},e.removeLabel=function(t,n,r){var a=e.getNodeSurfaceLabels(t);if(!(n in a.labels))return void console.warn("Trying to remove Non-existent Surface Label");var i=a.labels[n].renderableName;r||(r=a.lodSettings.lodKey);var o=t.renderables.removeRenderable(i,r),s=a.labels[n].json;return delete a.labels[n],o.json&&o.renderable&&e.availableRenderables.push(o),s},e.updateLabelLatLng=function(t,n,r,a){var i=e.getNodeSurfaceLabels(t);if(!(n in i.labels))return void console.warn("Trying to update transform of Non-existent Surface Label");var o=e.getTranslateFromLatLng(t,r),s={enabled:!0,translate:o},u=i.labels[n].renderableName;a||(a=i.lodSettings.lodKey),t.renderables.updateRenderableTransform(s,u,a)},e.updateLabel=function(t,n,r,a,i,o){var s=e.getNodeSurfaceLabels(t);if(!(n in s.labels))return void console.warn("Trying to update Non-existent Surface Label");o||(o=s.lodSettings.lodKey);var u=e.removeLabel(t,n,o);i&&(u={});for(var c in a)u[c]=a[c];e.addLabel(t,n,r,u,o)},e.getLabelData=function(t,n){var r=e.getNodeSurfaceLabels(t);if(!(n in r.labels))return void console.warn("Trying to get Label Data of Non-existent Surface Label");var a={};for(var i in r.labels[n].json)a[i]=r.labels[n].json[i];return a.renderableName=r.labels[n].renderableName,a},e}},function(e,t){function n(e){e/=1e3;var t=i-a,n=e-t;return n}function r(e){var t=i-a,n=e+t;return n*=1e3}var a=554817669.183,i=1501545600;e.exports={UTC2ET:n,ET2UTC:r}},function(e,t){function n(e,t){var n=!1;return t<=o[e].maxTime&&t>=o[e].minTime&&(n=!0),n}function r(e,t){var n=!1;return t<=o[e].maxTimeRate&&t>=o[e].minTimeRate&&(n=!0),n}function a(e,t){var n=!1;return t<=o[e].maxFOV&&t>=o[e].minFOV&&(n=!0),n}function i(e,t){var n;return n=t,t}var o={Earth:{defaultTime:556612000.2144,minTime:556606269.183,maxTime:556617789.183,defaultTimeRate:0,minTimeRate:-1800,maxTimeRate:1800,defaultFOV:.5235987755982988,minFOV:.2617993877991494,maxFOV:.7853981633974483,timeRateValues:[-1800,-600,-300,-60,-30,-1,0,1,30,60,300,600,1800]},Moon:{defaultTime:556612000.2144,minTime:556606269.183,maxTime:556617789.183,defaultTimeRate:0,minTimeRate:-1800,maxTimeRate:1800,defaultFOV:.03490658503988659,minFOV:.017453292519943295,maxFOV:.05235987755982988,timeRateValues:[-1800,-600,-300,-60,-30,-1,0,1,30,60,300,600,1800]},EarthMoon:{defaultTime:556612000.2144,minTime:554020000.984,maxTime:559204000.982,defaultTimeRate:0,minTimeRate:-3600,maxTimeRate:3600,defaultFOV:.5235987755982988,minFOV:.2617993877991494,maxFOV:.7853981633974483,timeRateValues:[-3600,-1800,-600,-300,-60,-1,0,1,60,300,600,1800,3600]},EarthMoonSun:{defaultTime:556612000.2144,minTime:521102000.2144002,maxTime:592122000.2143999,defaultTimeRate:0,minTimeRate:-3600,maxTimeRate:3600,defaultFOV:.5235987755982988,minFOV:.2617993877991494,maxFOV:.7853981633974483,timeRateValues:[-3600,-1800,-600,-300,-60,-1,0,1,60,300,600,1800,3600]}};e.exports={validateTime:n,validateTimeRate:r,validateFOV:a,validateLatLng:i,viewSettings:o}},function(e,t,n){function r(e){g=e}function a(e){p=e}function i(){var e=o.scene.get("ConePenumbra");e.renderables.lodEnabled("model",!0),e=o.scene.get("ConeUmbra"),e.renderables.lodEnabled("model",!0),e=o.scene.get("ConeEarth"),e.renderables.lodEnabled("model",!0)}var o=n(4),s=n(49),u=n(50),c=n(26),l=n(22),d=n(24),M=[.5065328566884535,-.0942412441171466,.03476542271963596,.8563494721113643],g={transition:{earthMoonSun:7e8,earthMoon:15e5,moon:7e3,earth:27e3},min:{earthMoonSun:25e3,earthMoon:25e3,moon:5e3,earth:8100},max:{earthMoonSun:1e9,earthMoon:3e6,moon:14e3,earth:5e4},earthSurfaceRadius:6378.14},p=function(){console.log("Transition Complete")},A={EarthMoonSun:function(e){i(!0);var t=o.scene.get("Earth"),n={frame:o.app.getWin().cameraState.frame,target:t,orientation:[0,0,0,1],radius:g.transition.earthMoonSun,win:o.app.getWin(),cameraBehaviorParams:{minRadius:g.min.earthMoonSun,maxRadius:g.max.earthMoonSun},after:p,fov:e};o.app.getWin().setCamera(l.trackingTransition(n)),t["static"].node.interactable=!1,t.renderables.lodEnabled("markers",!1),t.renderables.lodEnabled("tier1",!1),t.renderables.lodEnabled("tier2",!1),t.renderables.lodEnabled("tier3",!1),t.renderables.lodEnabled("shadowLabels",!1)},EarthMoon:function(e){i(!0);var t=o.scene.get("Earth"),n={frame:o.app.getWin().cameraState.frame,target:t,orientation:[.7071067811865475,0,0,.7071067811865476],radius:g.transition.earthMoon,win:o.app.getWin(),cameraBehaviorParams:{minRadius:g.min.earthMoon,maxRadius:g.max.earthMoon},after:p,fov:e};o.app.getWin().setCamera(l.trackingTransition(n)),t["static"].node.interactable=!1,t.renderables.lodEnabled("tier1",!1),t.renderables.lodEnabled("tier2",!1),t.renderables.lodEnabled("tier3",!1),t.renderables.lodEnabled("shadowLabels",!1)},Moon:function(e){i(!0);var t=o.scene.get("Moon"),n=o.scene.get("Earth"),r=o.scene.get("EarthMoonBarycenter"),a={parent:t.frame.parent,position:[0,0,0],orientation:[0,0,0,1]};a=t.frame.convert(a,o.app.getWin()._camera);var u=o.math.lookRotation(o.math.vMul(o.math.vNormalized(a.position),1),[0,0,1]),M=o.math.angleAxis(Math.PI/180*.25,[1,0,0]);u=o.math.qMulQ(u,M);var g=29e4,A=o.math.vMul(o.math.qMulV(u,d.vector.FORWARD),g),m=s.getOrientationForPosition(A,o.app.getWin()._camera,t,n);a={parent:t,position:A,orientation:m,time:o.app.getWin()._camera.clock.time.value},a=r.frame.convert(a,o.app.getWin()._camera);var f={frame:o.app.getWin().cameraState.frame,target:r,orientation:a.orientation,radius:10*o.math.vNorm(a.position),win:o.app.getWin(),cameraBehavior:c,cameraBehaviorParams:{target:r,orientation:a.orientation,radius:10*o.math.vNorm(a.position),maxRadius:1e10,lookSpeed:.002},after:p,fov:e};o.app.getWin().setCamera(l.trackingTransition(f)),o.scene.get("ConeEarth").renderables.lodEnabled("model",!1),n.renderables.lodEnabled("tier1",!1),n.renderables.lodEnabled("tier2",!1),n.renderables.lodEnabled("tier3",!1),n.renderables.lodEnabled("shadowLabels",!1)},Earth:function(e){i(!0);var t=o.scene.get("Earth"),n={frame:o.app.getWin().cameraState.frame,target:t,orientation:M,radius:g.transition.earth,win:o.app.getWin(),cameraBehaviorParams:{minRadius:g.min.earth,maxRadius:g.max.earth},after:p,fov:e};o.app.getWin().setCamera(l.trackingTransition(n)),o.scene.get("ConeEarth").renderables.lodEnabled("model",!1),t["static"].node.interactable=!0,t.renderables.lodEnabled("markers",!0),t.renderables.lodEnabled("tier1",!0),t.renderables.lodEnabled("tier2",!0),t.renderables.lodEnabled("tier3",!0),t.renderables.lodEnabled("shadowLabels",!0)}},m=function(e,t){var n=[t[1]*Math.PI/180,t[0]*Math.PI/180],r=o.math.geodeticToRectangular(e.ellipsoid,[n[0],n[1],.001]);return r},f=function(e){var t=o.scene.get("Earth"),n=m(t,e),r={parent:t,position:[0,0,0],orientation:[0,0,0,1]},a=new u({target:t,focus:o.scene.get("Sun"),position:n,frame:r,fov:.01072665});return a},D=function(){return{target:o.scene.get("Earth"),radius:g.transition.earth,orientation:M,minRadius:g.min.earth,maxRadius:g.max.earth}};e.exports={switchTo:A,cameraRadii:g,updateCameraRadii:r,initialCamera:D,getTelescopeCamera:f,setTransitionComplete:a},window.cameraModes=e.exports},function(e,t,n){var r=n(4),a=n(26),i=function(e,t,n,a){var i=a.frame.get(t.clock.time);i=n.frame.convert(i,t);var o=r.math.vSub(i.position,e),s=r.math.lookRotation(o,[0,0,1]);return s};e.exports=function(e){if(!e.focus)throw Error("ranger.camera.OrbitWithFocus: Missing required parameter: focus");var t=a(e),n=e.focus,r=e.target;return t.update=function(){return function(e){var a=i(e.frame.position,e,r,n);t.frame.orientation=a}}(t.update),t},e.exports.getOrientationForPosition=i},function(e,t,n){var r=n(4),a=n(25);e.exports=function(e){if(!e.focus)throw Error("ranger.camera.OrbitWithFocus: Missing required parameter: focus");var t=a(e),n=e.focus,i=e.target,o=e.position;return t.update=function(e){var a=n.frame.get(e.clock.time);a=i.frame.convert(a,e);var s=r.math.vSub(a.position,o),u=r.math.lookRotation(s,[0,0,1]);t.frame.orientation=u,t.frame.position=o},t}},function(e,t,n){var r=n(4),a=n(48),i=n(46),o=n(19),s=.01072665,u=null,c=null,l=null,d=null,M=void 0,g=void 0,p=0,A=null,m="",f=function(){var e=document.getElementById("nav-bar");e&&(e.style.display="none")},D=function(){var e=document.getElementById("nav-bar");e&&(e.style.display="inherit")},N=function(){console.verboseLog("Dragged Event occurred in Pip Window")},h=function(e){N=e},T=function(){return!!M&&"main"!=M._camera.name},y=function(e,t){t._camera.frame=e.frame,r.scene.cameraData[t._camera.id].attachedNode=e.frame.parent,t.cameraState=e},L=function(){var e=M._camera.fov;M._camera.fov=u._camera.fov,u._camera.fov=e,e=M.cameraState,M.cameraState=u.cameraState,y(e,u),e=M._camera.name,M._camera.name=u.camera.name,u.camera.name=e,T()?(u.cameraState.exit(r.app.getWin()),u.div.className=m,u.div.removeEventListener("mousedown",A.mouseDown,!1),u.div.removeEventListener("mousemove",A.mouseMove,!1),u.div.removeEventListener("mouseup",A.mouseUp,!1),u.div.removeEventListener("mouseout",A.mouseOut,!1),u.div.removeEventListener("touchstart",A.touchStart,!1),u.div.removeEventListener("touchmove",A.touchMove,!1),u.div.removeEventListener("touchend",A.touchEnd,!1),u.div.removeEventListener("touchcancel",A.touchEnd,!1),r.canvas.addEventListener("mousedown",A.mouseDown,!1),r.canvas.addEventListener("mousemove",A.mouseMove,!1),r.canvas.addEventListener("mouseup",A.mouseUp,!1),r.canvas.addEventListener("mouseout",A.mouseOut,!1),r.canvas.addEventListener("touchstart",A.touchStart,!1),r.canvas.addEventListener("touchmove",A.touchMove,!1),r.canvas.addEventListener("touchend",A.touchEnd,!1),r.canvas.addEventListener("touchcancel",A.touchEnd,!1)):(r.app.getWin().cameraState.enter(r.app.getWin()),u.div.className=m+" pip-interactable",u.div.addEventListener("mousedown",A.mouseDown,!1),u.div.addEventListener("mousemove",A.mouseMove,!1),u.div.addEventListener("mouseup",A.mouseUp,!1),u.div.addEventListener("mouseout",A.mouseOut,!1),u.div.addEventListener("touchstart",A.touchStart,!1),u.div.addEventListener("touchmove",A.touchMove,!1),u.div.addEventListener("touchend",A.touchEnd,!1),u.div.addEventListener("touchcancel",A.touchEnd,!1),r.canvas.removeEventListener("mousedown",A.mouseDown,!1),r.canvas.removeEventListener("mousemove",A.mouseMove,!1),r.canvas.removeEventListener("mouseup",A.mouseUp,!1),r.canvas.removeEventListener("mouseout",A.mouseOut,!1),r.canvas.removeEventListener("touchstart",A.touchStart,!1),r.canvas.removeEventListener("touchmove",A.touchMove,!1),r.canvas.removeEventListener("touchend",A.touchEnd,!1),r.canvas.removeEventListener("touchcancel",A.touchEnd,!1))},v=function(){T()&&L()},w=function(e){var t=r.app.getWin(),n=e[1]-e[0],a=null,o=!1,s=[],u=!0,c=function(e){e.preventDefault(),e.stopPropagation(),o=!0,u=!0},l=function(s){s.preventDefault(),s.stopPropagation();var c=s.clientX;if(null===a)return void(a=c);if(o){u&&(u=!1,N());var l=-(c-a),d=l/s.target.offsetWidth,M=i.ET2UTC(t.getTime()),g=M+n*d;g=Math.min(g,e[1]),g=Math.max(g,e[0]),r.update({eclipse:{setTime:g}})}a=c},d=function(e){e.preventDefault(),e.stopPropagation(),o=!1,u=!0},M=function(e){e.preventDefault(),e.stopPropagation(),o=!1,a=null,u=!0},g=function(e,t){var n=void 0,r=void 0;for(r=0;r<t.length;r++)if(n=t[r].identifier,n===e)return r;return-1},p=function(e){e.preventDefault(),e.stopPropagation();var t=e.changedTouches,n=void 0,r=void 0;for(n=0;n<t.length;n++)r=g(t[n].identifier,s),r>=0?s.splice(r,1,{identifier:t[n].identifier,x:t[n].clientX,y:t[n].clientY}):s.push({identifier:t[n].identifier,x:t[n].clientX,y:t[n].clientY});u=!0},A=function(a){a.preventDefault(),a.stopPropagation();var o=a.changedTouches;if(1===o.length||1===s.length){var c=g(s[0].identifier,o);if(!(c<0)){u&&(u=!1,N());var l={identifier:o[c].identifier,x:o[c].clientX,y:o[c].clientY},d=s[0],M=-(l.x-d.x),p=M/a.target.offsetWidth,A=i.ET2UTC(t.getTime()),m=A+n*p;m=Math.min(m,e[1]),m=Math.max(m,e[0]),r.update({eclipse:{setTime:m}}),s[0]=l}}},m=function(e){e.preventDefault(),e.stopPropagation();var t=void 0,n=void 0,r=e.changedTouches;for(n=0;n<r.length;n++)t=g(r[n].identifier,s),t>=0&&s.splice(t,1);u=!0};return{mouseDown:c,mouseMove:l,mouseUp:d,mouseOut:M,touchStart:p,touchMove:A,touchEnd:m}},E=function(e,t,n){if(A=w(n),null===u){M=r.app.getWin(),c=document.createElement("div"),c.id="pip-container",r.canvas.parentElement.appendChild(c),u=r.app.subWindow(r.app.getWin()._window,100,100,400,200,c),u._camera=u.camera,m=u.div.className,c.style=u.div.style,u.camera.fov=s,u._camera.name="pip",M._camera.name="main",g=M.updates.camera,delete M.updates.camera,M.updates.clock=function(e){p=M._camera.clock.rate;var t=M._camera.clock.time.value+e*p;M._camera.clock={time:{value:t},rate:0},u._camera.clock={time:{value:t},rate:0}},M.postTransformUpdates.camera=function(e){g(e,M),g(e,u),M._camera.clock={time:{value:M._camera.clock.time.value},rate:p}},M.pip=u,l=document.createElement("div"),l.id="swap-button",l.onclick=function(){r.update({eclipse:{swapDisplays:null}})};var i=document.createElement("img"),f=r.swapImageIconPath;i.src=f,i.id="swap-image",l.appendChild(i);var D=document.createElement("div");D.id="nav-bar",u.navBar=D,c.appendChild(D),c.appendChild(l),u.div.addEventListener("mousedown",A.mouseDown,!1),u.div.addEventListener("mousemove",A.mouseMove,!1),u.div.addEventListener("mouseup",A.mouseUp,!1),u.div.addEventListener("mouseout",A.mouseOut,!1),u.div.addEventListener("touchstart",A.touchStart,!1),u.div.addEventListener("touchmove",A.touchMove,!1),u.div.addEventListener("touchend",A.touchEnd,!1),u.div.addEventListener("touchcancel",A.touchEnd,!1),d=document.createElement("div"),d.id="pip-warning",u.div.appendChild(d),d.innerHTML="Eclipse not visible from this location",d.style.top="45%",d.style.position="absolute",o.setViewportContainer(c),u.div.className=m+" pip-interactable"}u.navBar.textContent=e,T()?(y(a.getTelescopeCamera(t),M),u.div.className=m):(y(a.getTelescopeCamera(t),u),u.div.className=m+" pip-interactable"),u.resize(),t[1]<0&&t[1]>-180?(c.style["pointer-events"]="inherit",c.style["background-color"]="transparent",l.style.display="inherit",d.style.display="none"):(c.style["pointer-events"]="none",c.style["background-color"]="black",l.style.display="none",d.style.display="inherit",T()&&L());
};e.exports={setPip:E,swapPip:L,revertViewports:v,showNavBar:D,hideNavBar:f,setStartDragHandler:h}},function(e,t,n){function r(e,t){e?t.updateCameraRadii(p):t.updateCameraRadii(g)}function a(e){c.scene.scene.Sun.renderables.transform.enabled=e,c.scene.scene.Earth.renderables.transform.enabled=e,c.scene.scene.Moon.renderables.transform.enabled=e}function i(e){if(e)for(var t in M)c.scene.get(t).contents["static"].ellipsoid=[M[t][0]*d[t],M[t][1]*d[t],M[t][2]*d[t]];else for(var n in M)c.scene.get(n).contents["static"].ellipsoid=M[n]}function o(){c.scene.scene.Moon.renderables.updateTransforms(),c.scene.scene.Earth.renderables.updateTransforms(),c.scene.scene.Sun.renderables.updateTransforms()}function s(e){c.scene.scene.Sun.renderables.transform.scale=d.Sun,c.scene.scene.Earth.renderables.transform.scale=d.Earth,c.scene.scene.Moon.renderables.transform.scale=d.Moon,g=e.cameraRadii,p={transition:{earthMoonSun:g.transition.earthMoonSun,earthMoon:g.transition.earthMoon*d.MoonOrbit,moon:g.transition.moon*d.Moon,earth:g.transition.earth*d.Earth},min:{earthMoonSun:g.min.Earth,earthMoon:g.min.earthMoon*d.Earth,moon:g.min.moon*d.Moon,earth:g.min.earth*d.Earth},max:{earthMoonSun:g.max.earthMoonSun,earthMoon:g.max.earthMoon,moon:g.max.moon,earth:g.max.earth}},M.Earth=c.scene.scene.Earth.contents["static"].ellipsoid,M.Sun=c.scene.scene.Sun.contents["static"].ellipsoid,M.Moon=c.scene.scene.Moon.contents["static"].ellipsoid}function u(e,t){l||(l=!0,s(t));var n=!e;r(n,t),a(n),i(n),o()}var c=n(4),l=!1,d={Moon:1e3,Earth:500,Sun:10,MoonOrbit:200},M={},g=void 0,p=void 0;e.exports={updateScale:u}},function(e,t){var n={shadowLabels:[{text:"50%",location:[56.83548780979182,-168.42835389605966],id:165},{text:"75%",location:[49.66195086928178,-162.1800789046905],id:166},{text:"100%",location:[42.50054691419735,-158.47763669395954],id:167},{text:"75%",location:[35.402612985629744,-156.30751731245087],id:168},{text:"50%",location:[29.10251380549358,-154.308341332584],id:169},{text:"50%",location:[30.223273178118383,-34.77224135971484],id:170},{text:"75%",location:[22.585225655424054,-39.28566854555102],id:171},{text:"100%",location:[14.804360855332334,-41.362599672623936],id:172},{text:"75%",location:[7.457948087094399,-42.84372451377734],id:173},{text:"50%",location:[.782294500358716,-44.195710134266456],id:174}],tier1:[{text:"Kansas City",location:[39.1,-94.5833333333333],id:0},{text:"Houston",location:[29.75,-95.35],id:1},{text:"Vancouver",location:[49.2166666666667,-123.1],id:2},{text:"Los Angeles",location:[34.05,-118.25],id:3},{text:"New York",location:[40.7833333333333,-73.9666666666667],id:4}],tier2:[{text:"Salem",location:[44.9429,-123.0351],id:5},{text:"Olympia",location:[47.03787,-122.9007],id:6},{text:"Boise",location:[43.6135,-116.20345],id:7},{text:"Helena",location:[46.59271,-112.03611],id:8},{text:"Cheyenne",location:[41.13998,-104.82025],id:9},{text:"Carson City",location:[39.1638,-119.7674],id:10},{text:"Phoenix",location:[33.44838,-112.07404],id:11},{text:"Salt Lake City",location:[40.76078,-111.89105],id:12},{text:"Lincoln",location:[40.8,-96.66696],id:13},{text:"Des Moines",location:[41.60054,-93.60911],id:14},{text:"Pierre",location:[44.36832,-100.35097],id:15},{text:"Bismarck",location:[46.80833,-100.78374],id:16},{text:"Denver",location:[39.73915,-104.9847],id:17},{text:"Albuquerque",location:[35.08449,-106.65114],id:18},{text:"Austin",location:[30.26715,-97.74306],id:19},{text:"Oklahoma City",location:[35.46756,-97.51643],id:20},{text:"Baton Rouge",location:[30.45075,-91.15455],id:21},{text:"Little Rock",location:[34.74648,-92.28959],id:22},{text:"Jefferson City",location:[38.5767,-92.17352],id:23},{text:"St Paul",location:[44.94441,-93.09327],id:24},{text:"Madison",location:[43.07305,-89.40123],id:25},{text:"Springfield",location:[39.80172,-89.64371],id:26},{text:"Indianapolis",location:[39.76838,-86.15804],id:27},{text:"Frankfort",location:[38.20091,-84.87328],id:28},{text:"Nashville",location:[36.16589,-86.78444],id:29},{text:"Jackson",location:[32.29876,-90.18481],id:30},{text:"Montgomery",location:[32.36681,-86.29997],id:31},{text:"Tallahassee",location:[30.43826,-84.28073],id:32},{text:"Atlanta",location:[33.749,-84.38798],id:33},{text:"Columbia",location:[34.00071,-81.03481],id:34},{text:"Raleigh",location:[35.7721,-78.63861],id:35},{text:"Richmond",location:[37.55376,-77.46026],id:36},{text:"Charleston",location:[38.34982,-81.63262],id:37},{text:"Columbus",location:[39.96118,-82.99879],id:38},{text:"Lansing",location:[42.73254,-84.55553],id:39},{text:"Washington",location:[38.89511,-77.03637],id:40},{text:"Dover",location:[39.15817,-75.52437],id:41},{text:"Harrisburg",location:[40.2737,-76.88442],id:42},{text:"Hartford",location:[41.76371,-72.68509],id:43},{text:"Boston",location:[42.35843,-71.05977],id:44},{text:"Montpelier",location:[44.26006,-72.57539],id:45},{text:"Concord",location:[43.20814,-71.53757],id:46},{text:"Augusta",location:[44.31062,-69.77949],id:47},{text:"Juneau",location:[58.30194,-134.41972],id:48},{text:"Honolulu",location:[21.30694,-157.85833],id:49}],tier3:[{text:"Medford",location:[42.32652,-122.87559],id:50},{text:"Baker City",location:[44.77487,-117.83438],id:51},{text:"Portland",location:[45.52345,-122.67621],id:52},{text:"Eugene",location:[44.05207,-123.08675],id:53},{text:"Seattle",location:[47.60621,-122.33207],id:54},{text:"Spokane",location:[47.65966,-117.42908],id:55},{text:"Twin Falls",location:[42.56297,-114.46087],id:56},{text:"Idaho Falls",location:[43.46658,-112.03414],id:57},{text:"Weiser",location:[44.251,-116.96933],id:58},{text:"Great Falls",location:[47.50024,-111.30081],id:59},{text:"Billings",location:[45.78329,-108.50069],id:60},{text:"Miles City",location:[46.40834,-105.84056],id:61},{text:"Casper",location:[42.86663,-106.31308],id:62},{text:"Douglas",location:[42.75969,-105.38221],id:63},{text:"Gillette",location:[44.29109,-105.50222],id:64},{text:"Jackson",location:[43.47993,-110.76243],id:65},{text:"Reno",location:[39.52963,-119.8138],id:66},{text:"Elko",location:[40.83242,-115.76312],id:67},{text:"Las Vegas",location:[36.17497,-115.13722],id:68},{text:"Redding",location:[40.58654,-122.39168],id:69},{text:"Sacramento",location:[38.58157,-121.4944],id:70},{text:"San Francisco",location:[37.77493,-122.41942],id:71},{text:"Fresno",location:[36.74773,-119.77237],id:72},{text:"San Diego",location:[32.71533,-117.15726],id:73},{text:"Flagstaff",location:[35.19807,-111.65127],id:74},{text:"Tucson",location:[32.22174,-110.92648],id:75},{text:"Yuma",location:[32.72532,-114.6244],id:76},{text:"Moab",location:[38.57332,-109.54984],id:77},{text:"Vernal",location:[40.45552,-109.52875],id:78},{text:"St George",location:[37.10415,-113.58412],id:79},{text:"Brigham City",location:[41.51021,-112.0155],id:80},{text:"Alliance",location:[42.10163,-102.87214],id:81},{text:"North Platte",location:[41.12389,-100.76542],id:82},{text:"Kearney",location:[40.69946,-99.08148],id:83},{text:"Omaha",location:[41.25861,-95.93779],id:84},{text:"Sioux City",location:[42.49999,-96.40031],id:85},{text:"Cedar Rapids",location:[42.00833,-91.64407],id:86},{text:"Davenport",location:[41.52364,-90.57764],id:87},{text:"Mason City",location:[43.15357,-93.20104],id:88},{text:"Rapid City",location:[44.08054,-103.23101],id:89},{text:"Sioux Falls",location:[43.54997,-96.70033],id:90},{text:"Minot",location:[48.23251,-101.29627],id:91},{text:"Grand Forks",location:[47.92526,-97.03285],id:92},{text:"Dickinson",location:[46.87918,-102.78962],id:93},{text:"Fargo",location:[46.87719,-96.7898],id:94},{text:"Fort Collins",location:[40.58526,-105.08442],id:95},{text:"Pueblo",location:[38.25445,-104.60914],id:96},{text:"Durango",location:[37.27528,-107.88007],id:97},{text:"Grand Junction",location:[39.06387,-108.55065],id:98},{text:"Roswell",location:[33.39427,-104.52302],id:99},{text:"Santa Fe",location:[35.68698,-105.9378],id:100},{text:"Farmington",location:[36.72806,-108.21869],id:101},{text:"Las Cruces",location:[32.31232,-106.77834],id:102},{text:"Dallas",location:[32.78306,-96.80667],id:103},{text:"San Antonio",location:[29.42412,-98.49363],id:104},{text:"Laredo",location:[27.50641,-99.50754],id:105},{text:"Amarillo",location:[35.222,-101.8313],id:106},{text:"Lubbock",location:[33.57786,-101.85517],id:107},{text:"Midland",location:[31.99735,-102.07791],id:108},{text:"El Paso",location:[31.75872,-106.48693],id:109},{text:"Tulsa",location:[36.15398,-95.99278],id:110},{text:"Topeka",location:[39.04833,-95.67804],id:111},{text:"Atchison",location:[39.56305,-95.12164],id:112},{text:"Wichita",location:[37.69224,-97.33754],id:113},{text:"Dodge City",location:[37.7528,-100.01708],id:114},{text:"Lake Charles",location:[30.21309,-93.2044],id:115},{text:"Shrevport",location:[32.52515,-93.75018],id:116},{text:"Fort Smith",location:[35.38592,-94.39855],id:117},{text:"St Louis",location:[38.62727,-90.19789],id:118},{text:"Springfield",location:[37.21533,-93.29824],id:119},{text:"Duluth",location:[46.78327,-92.10658],id:120},{text:"Rochester",location:[44.02163,-92.4699],id:121},{text:"Milwaukee",location:[43.0389,-87.90647],id:122},{text:"Eau Claire",location:[44.81135,-91.49849],id:123},{text:"Green Bay",location:[44.51916,-88.01983],id:124},{text:"Carbondale",location:[37.72727,-89.21675],id:125},{text:"Chicago",location:[41.85003,-87.65005],id:126},{text:"Evansville",location:[37.97476,-87.55585],id:127},{text:"Fort Wayne",location:[41.1306,-85.12886],id:128},{text:"Hopkinsville",location:[36.86561,-87.49117],id:129},{text:"Cleveland",location:[35.15952,-84.87661],id:130},{text:"Memphis",location:[35.14953,-90.04898],id:131},{text:"Tupelo",location:[34.25761,-88.70339],id:132},{text:"Hattiesburg",location:[31.32712,-89.29034],id:133},{text:"Birmingham",location:[33.52066,-86.80249],id:134},{text:"Mobile",location:[30.69436,-88.04305],id:135},{text:"Orlando",location:[28.53834,-81.37924],id:136},{text:"Miami",location:[25.77427,-80.19366],id:137},{text:"Albany",location:[31.57851,-84.15574],id:138},{text:"Clayton",location:[34.87815,-83.40099],id:139},{text:"Greenville",location:[34.85262,-82.39401],id:140},{text:"Charleston",location:[32.77657,-79.93092],id:141},{text:"Wilmington",location:[34.22573,-77.94471],id:142},{text:"Charlotte",location:[35.22709,-80.84313],id:143},{text:"Franklin",location:[35.18232,-83.38154],id:144},{text:"Roanoke",location:[37.27097,-79.94143],id:145},{text:"Cleveland",location:[41.4995,-81.69541],id:146},{text:"Cincinnati",location:[39.162,-84.45689],id:147},{text:"Detroit",location:[42.33143,-83.04575],id:148},{text:"Cadillac",location:[44.25195,-85.40116],id:149},{text:"Baltimore",location:[39.29038,-76.61219],id:150},{text:"Annapolis",location:[38.97845,-76.49218],id:151},{text:"Philadelphia",location:[39.95234,-75.16379],id:152},{text:"Pittsburgh",location:[40.44062,-79.99589],id:153},{text:"Trenton",location:[40.21705,-74.74294],id:154},{text:"Albany",location:[42.65258,-73.75623],id:155},{text:"Buffalo",location:[42.88645,-78.87837],id:156},{text:"Providence",location:[41.82399,-71.41283],id:157},{text:"Portland",location:[43.66147,-70.25533],id:158},{text:"Houlton",location:[46.12616,-67.8403],id:159},{text:"Anchorage",location:[61.21806,-149.90028],id:160},{text:"Fairbanks",location:[64.83778,-147.71639],id:161},{text:"Lihue",location:[21.97886,-159.36719],id:162},{text:"Wailuku",location:[20.89111,-156.50472],id:163},{text:"Hilo",location:[19.72972,-155.09],id:164}]};e.exports={locationData:n}},function(e,t,n){var r=n(17);r.SolarEclipseShadow={value:{lightingModel:"phong",ignoredLightNames:["headlight"],channel:{color:{include:["channel/eclipseShadow"],uniform:{"float":["moonRadius","sunRadius","naturalMode","bendPercent1","bendPercent2"],vec3:["moonPosition","sunPosition"],vec4:["bendShadow1","bendShadow2","umbraShadow"],sampler2D:["earthDay","eclipsePenumbra"]},prepend:["vec4 sampleEarth() {","   float gamma = 1.3;","   vec4 earthColor = texture2D(earthDay, vuv0);","   float correctedRed = pow(earthColor.x, 1.0 / gamma);","   float correctedGreen= pow(earthColor.y, 1.0 / gamma);","   float correctedBlue = pow(earthColor.z, 1.0 / gamma);","   vec4 specTex = texture2D(specular0, vuv0);","   float brightness = 1.0;","   if(length(specTex) > 0.9){","       brightness = 1.75;","   }","   vec4 col = vec4(correctedRed, correctedGreen, correctedBlue, 1.0) * brightness;","   return col;","}"],operations:[{op:"assign",sample:"sampleEarth()",sampleIsCall:!1},{op:"sub",sample:"eclipse(moonRadius, moonPosition, sunRadius, sunPosition, naturalMode)",sampleIsCall:!1}]},normal:{include:["channel/unpackNormal","channel/unpackedTangent"],uniform:{sampler2D:["norm"],"float":["normalStrength"]},operations:[{op:"assign",sample:"unpackNormal((1.0 - normalStrength) * vec4(0.5, 0.5, 1.0, 1.0) + texture2D(norm, vuv0) * normalStrength)",sampleIsCall:!1,extract:"normalFromTangent",extractIsCall:!0}]},emissive:{include:[],uniform:{sampler2D:["earthNight","eclipsePenumbra"]},prepend:["vec4 eclipseBand() {","   vec4 colorShadow = vec4(0.0, 0.0, 0.0, 0.0);","   vec4 tex = texture2D(eclipsePenumbra, vuv0);","   if(tex.a != 0.0) {","       float gamma = 0.6;","       float corrected = pow(length(tex), 1.0 / gamma);","       colorShadow = vec4(corrected, corrected, corrected, 1.0);","   }","   return colorShadow * 2.0;","}","vec4 sampleEarthNight(){","   vec4 nightLightColor = vec4(0.0, 0.0, 0.0, 0.0);","   float product = dot(vnormal, -normalize(sunPosition));","   float seamWidth = -0.3;","   if (product > seamWidth && product < 0.0) // blend light seam ","       nightLightColor = texture2D(earthNight, vuv0) * (seamWidth - product) / seamWidth; // offset so lights are weaker in the sun","   else if (product > 0.0) // only show lights on dark side ","       nightLightColor = texture2D(earthNight, vuv0);","   return nightLightColor;","}"],operations:[{op:"assign",sample:"sampleEarthNight()",sampleIsCall:!1},{op:"sub",sample:"eclipseBand()",sampleIsCall:!1}]}},bindings:{vec4:{color:"$color",specular:"$specularColor",neutralLighting:"$neutralColor",bendShadow1:"$bendShadow1",bendShadow2:"$bendShadow2",umbraShadow:"$umbraShadow"},vec3:{moonPosition:"$moonPosition",sunPosition:"$sunPosition"},"float":{bendPercent1:"$bendPercent1",bendPercent2:"$bendPercent2",naturalMode:"$naturalMode",moonRadius:"$moonRadius",sunRadius:"$sunRadius",specularStrength:"$specularStrength",specularExponent:"$specularExponent",normalStrength:"$normalStrength"},sampler2D:{eclipsePenumbra:{uv:"vuv0",texture:"$eclipsePenumbra"},earthNight:{uv:"vuv0",texture:"$earthNight"},specular:{uv:"vuv0",texture:"$specularTexture"},norm:{uv:"vuv0",texture:"$normalTexture"},earthDay:{uv:"vuv0",texture:"$earthDay"}},"function":{vec3:{moonPosition:["var f = function(context) {","   var moonPosition = [0.0, 0.0, 0.0];","   if(__ranger.scene.get('Moon')){","       var frame = {parent: __ranger.scene.get('Moon'), position: [0,0,0], orientation: [0,0,0,1]};","       moonPosition = __ranger.scene.get('Earth').frame.convert(frame, __ranger.app.getWin()._window.camera).position;","   }","   return moonPosition;","}; f"],sunPosition:["var f = function(context) {","   var sunPosition = [0.0, 0.0, 0.0];","   if(__ranger.scene.get('Sun')){","       var frame = {parent: __ranger.scene.get('Sun'), position: [0,0,0], orientation: [0,0,0,1]};","       sunPosition = __ranger.scene.get('Earth').frame.convert(frame, __ranger.app.getWin()._window.camera).position;","   }","   return sunPosition;","}; f"]}}}},parameters:{color:[1,1,1,1],specularColor:[1,1,1,1],neutralColor:[1,1,1,1],specularStrength:0,specularExponent:1,normalStrength:1}},e.exports={SolarEclipseShadow:r.SolarEclipseShadow}},function(e,t,n){var r=n(17);r.SolarEclipseShadow={value:{lightingModel:"phong",ignoredLightNames:["headlight"],channel:{color:{include:["channel/cubemap","channel/eclipseShadow"],uniform:{"float":["moonRadius","sunRadius","naturalMode","bendPercent1","bendPercent2"],vec3:["moonPosition","sunPosition"],vec4:["bendShadow1","bendShadow2","umbraShadow"],sampler2D:["cube0","cube1","cube2","cube3","cube4","cube5","eclipsePenumbra"]},prepend:["vec4 sampleEarth() {","   float gamma = 1.3;","   vec4 earthColor = sampleCube(cube0, cube1, cube2, cube3, cube4, cube5, getCubeUV(vuv0 + vec2(0.25, 0.0)));","   float correctedRed = pow(earthColor.x, 1.0 / gamma);","   float correctedGreen= pow(earthColor.y, 1.0 / gamma);","   float correctedBlue = pow(earthColor.z, 1.0 / gamma);","   vec4 specTex = texture2D(specular0, vuv0);","   float brightness = 1.0;","   if(length(specTex) > 0.9){","       brightness = 1.75;","   }","   vec4 col = vec4(correctedRed, correctedGreen, correctedBlue, 1.0) * brightness;","   return col;","}"],operations:[{op:"assign",sample:"sampleEarth()",sampleIsCall:!1},{op:"sub",sample:"eclipse(moonRadius, moonPosition, sunRadius, sunPosition, naturalMode)",sampleIsCall:!1}]},normal:{include:["channel/unpackNormal","channel/unpackedTangent"],uniform:{sampler2D:["norm"],"float":["normalStrength"]},operations:[{op:"assign",sample:"unpackNormal((1.0 - normalStrength) * vec4(0.5, 0.5, 1.0, 1.0) + texture2D(norm, vuv0) * normalStrength)",sampleIsCall:!1,extract:"normalFromTangent",extractIsCall:!0}]},emissive:{include:[],uniform:{sampler2D:["earthNight","eclipsePenumbra"]},prepend:["vec4 eclipseBand() {","   vec4 colorShadow = vec4(0.0, 0.0, 0.0, 0.0);","   vec4 tex = texture2D(eclipsePenumbra, vuv0);","   if(tex.a != 0.0) {","       float gamma = 0.6;","       float corrected = pow(length(tex), 1.0 / gamma);","       colorShadow = vec4(corrected, corrected, corrected, 1.0);","   }","   return colorShadow * 2.0;","}","vec4 sampleEarthNight(){","   vec4 nightLightColor = vec4(0.0, 0.0, 0.0, 0.0);","   float product = dot(vnormal, -normalize(sunPosition));","   float seamWidth = -0.3;","   if (product > seamWidth && product < 0.0) // blend light seam ","       nightLightColor = texture2D(earthNight, vuv0) * (seamWidth - product) / seamWidth; // offset so lights are weaker in the sun","   else if (product > 0.0) // only show lights on dark side ","       nightLightColor = texture2D(earthNight, vuv0);","   return nightLightColor;","}"],operations:[{op:"assign",sample:"sampleEarthNight()",sampleIsCall:!1},{op:"sub",sample:"eclipseBand()",sampleIsCall:!1}]}},bindings:{vec4:{color:"$color",specular:"$specularColor",neutralLighting:"$neutralColor",bendShadow1:"$bendShadow1",bendShadow2:"$bendShadow2",umbraShadow:"$umbraShadow"},vec3:{moonPosition:"$moonPosition",sunPosition:"$sunPosition"},"float":{bendPercent1:"$bendPercent1",bendPercent2:"$bendPercent2",naturalMode:"$naturalMode",moonRadius:"$moonRadius",sunRadius:"$sunRadius",specularStrength:"$specularStrength",specularExponent:"$specularExponent",normalStrength:"$normalStrength"},sampler2D:{eclipsePenumbra:{uv:"vuv0",texture:"$eclipsePenumbra"},earthNight:{uv:"vuv0",texture:"$earthNight"},specular:{uv:"vuv0",texture:"$specularTexture"},norm:{uv:"vuv0",texture:"$normalTexture"},cube0:{uv:"vuv0",texture:["$cubeTemplate",{index:0,params:"$cubeTemplateParams"}]},cube1:{uv:"vuv0",texture:["$cubeTemplate",{index:1,params:"$cubeTemplateParams"}]},cube2:{uv:"vuv0",texture:["$cubeTemplate",{index:2,params:"$cubeTemplateParams"}]},cube3:{uv:"vuv0",texture:["$cubeTemplate",{index:3,params:"$cubeTemplateParams"}]},cube4:{uv:"vuv0",texture:["$cubeTemplate",{index:4,params:"$cubeTemplateParams"}]},cube5:{uv:"vuv0",texture:["$cubeTemplate",{index:5,params:"$cubeTemplateParams"}]}},"function":{vec3:{moonPosition:["var f = function(context) {","   var moonPosition = [0.0, 0.0, 0.0];","   if(__ranger.scene.get('Moon')){","       var frame = {parent: __ranger.scene.get('Moon'), position: [0,0,0], orientation: [0,0,0,1]};","       moonPosition = __ranger.scene.get('Earth').frame.convert(frame, __ranger.app.getWin()._window.camera).position;","   }","   return moonPosition;","}; f"],sunPosition:["var f = function(context) {","   var sunPosition = [0.0, 0.0, 0.0];","   if(__ranger.scene.get('Sun')){","       var frame = {parent: __ranger.scene.get('Sun'), position: [0,0,0], orientation: [0,0,0,1]};","       sunPosition = __ranger.scene.get('Earth').frame.convert(frame, __ranger.app.getWin()._window.camera).position;","   }","   return sunPosition;","}; f"]}}}},parameters:{color:[1,1,1,1],specularColor:[1,1,1,1],neutralColor:[1,1,1,1],specularStrength:0,specularExponent:1,normalStrength:1,cubeTemplate:"$StringPrefixIndexSuffix",cubeTemplateParams:{}}},e.exports={SolarEclipseShadow:r.SolarEclipseShadow}},function(e,t,n){var r=n(17);r.MaterialMoon={value:{channel:{color:{include:["channel/cubemap"],uniform:{sampler2D:["cube0","cube1","cube2","cube3","cube4","cube5"]},operations:[{op:"assign",sample:"sampleCube(cube0, cube1, cube2, cube3, cube4, cube5, getCubeUV(vuv0))",sampleIsCall:!1}]},normal:{include:["channel/unpackNormal","channel/unpackedTangent"],uniform:{sampler2D:["norm"],"float":["normalStrength"]},operations:[{op:"assign",sample:"unpackNormal((1.0 - normalStrength) * vec4(0.5, 0.5, 1.0, 1.0) + texture2D(norm, vuv0) * normalStrength)",sampleIsCall:!1,extract:"normalFromTangent",extractIsCall:!0}]}},bindings:{vec4:{color:"$color",specular:"$specularColor",neutralLighting:"$neutralColor"},"float":{normalStrength:"$normalStrength",specularStrength:"$specularStrength",specularExponent:"$specularExponent"},sampler2D:{cube0:{uv:"vuv0",texture:["$cubeTemplate",{index:0,params:"$cubeTemplateParams"}]},cube1:{uv:"vuv0",texture:["$cubeTemplate",{index:1,params:"$cubeTemplateParams"}]},cube2:{uv:"vuv0",texture:["$cubeTemplate",{index:2,params:"$cubeTemplateParams"}]},cube3:{uv:"vuv0",texture:["$cubeTemplate",{index:3,params:"$cubeTemplateParams"}]},cube4:{uv:"vuv0",texture:["$cubeTemplate",{index:4,params:"$cubeTemplateParams"}]},cube5:{uv:"vuv0",texture:["$cubeTemplate",{index:5,params:"$cubeTemplateParams"}]},specular:{uv:"vuv0",texture:"$specularTexture"},norm:{uv:"vuv0",texture:"$normalTexture"}}}},parameters:{color:[1,1,1,1],specularColor:[1,1,1,1],neutralColor:[1,1,1,1],normalStrength:1,specularStrength:0,specularExponent:1,cubeTemplate:"$StringPrefixIndexSuffix",cubeTemplateParams:{}}},e.exports={MaterialMoon:r.MaterialMoon}},function(e,t,n){var r=n(17);r.EarthPolitical={value:{lightingModel:"none",channel:{color:{include:["channel/eclipseShadow","channel/cubemap"],uniform:{"float":["moonRadius","sunRadius","naturalMode","bendPercent1","bendPercent2"],vec3:["moonPosition","sunPosition"],vec4:["bendShadow1","bendShadow2","umbraShadow"],sampler2D:["cube0","cube1","cube2","cube3","cube4","cube5","eclipsePenumbra"]},prepend:["vec4 eclipseBand(){","   vec4 colorShadow = vec4(0.0, 0.0, 0.0, 0.0);","   vec4 tex = texture2D(eclipsePenumbra, vuv0);","   if(tex.a != 0.0){","       float gamma = 0.6;","       float corrected = pow(length(tex), 1.0 / gamma);","       colorShadow = vec4(corrected, corrected, corrected, 1.0);","   }","   return colorShadow;","}","vec3 changeColor(vec3 colIn, vec3 colOut, vec3 margin){","   if(colIn.r > colOut.r - margin.r && colIn.r < colOut.r + margin.r){","       if(colIn.g > colOut.g - margin.g && colIn.g < colOut.g + margin.g){","           if(colIn.b > colOut.b - margin.b && colIn.b < colOut.b + margin.b){","               colIn.r = colOut.r;","               colIn.g = colOut.g;","               colIn.b = colOut.b;","           }","       }","   }","   return colIn;","}","vec3 filterColor(vec3 colIn){","    vec3 margin = vec3(0.1, 0.1, 0.1);","    vec3 newColor = vec3(121.0 / 255.0, 199.0 / 255.0, 237.0 / 255.0);","    if(newColor == changeColor(colIn, newColor, margin)){","       return newColor;","    }","    newColor = vec3(138.0 / 255.0, 183.0 / 255.0, 102.0 / 255.0);","    if(newColor == changeColor(colIn, newColor, margin)){","       return newColor;","    }","    newColor = vec3(247.0 / 255.0, 184.0 / 255.0, 177.0 / 255.0);","    if(newColor == changeColor(colIn, newColor, margin)){","       return newColor;","    }","    newColor = vec3(224.0 / 255.0, 206.0 / 255.0, 116.0 / 255.0);","    if(newColor == changeColor(colIn, newColor, margin)){","       return newColor;","    }","    newColor = vec3(206.0 / 255.0, 168.0 / 255.0, 96.0 / 255.0);","    if(newColor == changeColor(colIn, newColor, margin)){","       return newColor;","    }","    newColor = vec3(160.0 / 255.0, 168.0 / 255.0, 201.0 / 255.0);","    if(newColor == changeColor(colIn, newColor, margin)){","       return newColor;","    }","    newColor = vec3(229.0 / 255.0, 241.0 / 255.0, 243.0 / 255.0);","    if(newColor == changeColor(colIn, newColor, margin)){","       return newColor;","    }","    newColor = vec3(191.0 / 255.0, 167.0 / 255.0, 129.0 / 255.0);","    if(newColor == changeColor(colIn, newColor, margin)){","       return newColor;","    }","    return colIn;","}"],operations:[{op:"assign",sample:"sampleCube(cube0, cube1, cube2, cube3, cube4, cube5, getCubeUV(vuv0 + vec2(0.25, 0.0)))",sampleIsCall:!1},{op:"assign",sample:"vec4(filterColor(ret.rgb), 1.0)",sampleIsCall:!1},{op:"sub",sample:"eclipseBand()",sampleIsCall:!1},{op:"sub",sample:"eclipse(moonRadius, moonPosition, sunRadius, sunPosition, naturalMode)",sampleIsCall:!1}]}},bindings:{vec4:{color:"$color",specular:"$specularColor",neutralLighting:"$neutralColor",bendShadow1:"$bendShadow1",bendShadow2:"$bendShadow2",umbraShadow:"$umbraShadow"},vec3:{moonPosition:"$moonPosition",sunPosition:"$sunPosition"},"float":{naturalMode:"$naturalMode",moonRadius:"$moonRadius",sunRadius:"$sunRadius",bendPercent1:"$bendPercent1",bendPercent2:"$bendPercent2",specularStrength:"$specularStrength",specularExponent:"$specularExponent"},sampler2D:{eclipsePenumbra:{uv:"vuv0",texture:"$eclipsePenumbra"},cube0:{uv:"vuv0",texture:["$cubeTemplate",{index:0,params:"$cubeTemplateParams"}]},cube1:{uv:"vuv0",texture:["$cubeTemplate",{index:1,params:"$cubeTemplateParams"}]},cube2:{uv:"vuv0",texture:["$cubeTemplate",{index:2,params:"$cubeTemplateParams"}]},cube3:{uv:"vuv0",texture:["$cubeTemplate",{index:3,params:"$cubeTemplateParams"}]},cube4:{uv:"vuv0",texture:["$cubeTemplate",{index:4,params:"$cubeTemplateParams"}]},cube5:{uv:"vuv0",texture:["$cubeTemplate",{index:5,params:"$cubeTemplateParams"}]}},"function":{vec3:{moonPosition:["var f = function(context) {","   var moonPosition = [0.0, 0.0, 0.0];","   if(__ranger.scene.get('Moon')){","       var frame = {parent: __ranger.scene.get('Moon'), position: [0,0,0], orientation: [0,0,0,1]};","       moonPosition = __ranger.scene.get('Earth').frame.convert(frame, __ranger.app.getWin()._window.camera).position;","   }","   return moonPosition;","}; f"],sunPosition:["var f = function(context) {","   var sunPosition = [0.0, 0.0, 0.0];","   if(__ranger.scene.get('Sun')){","       var frame = {parent: __ranger.scene.get('Sun'), position: [0,0,0], orientation: [0,0,0,1]};","       sunPosition = __ranger.scene.get('Earth').frame.convert(frame, __ranger.app.getWin()._window.camera).position;","   }","   return sunPosition;","}; f"]}}}},parameters:{color:[1,1,1,1],specularColor:[1,1,1,1],neutralColor:[1,1,1,1],specularStrength:0,specularExponent:1,cubeTemplate:"$StringPrefixIndexSuffix",cubeTemplateParams:{}}},e.exports={EarthPolitical:r.EarthPolitical}},function(e,t,n){(function(t){var r=n(4),a=n(28),i=n(19),o=n(21),s=n(59);n(60),e.exports=function(e,n,u,c,l,d){function M(){g._window.width=g.element.width,g._window.height=g.element.height}console.verboseLog('ranger/Window: Creating a ranger.Window("'+e+'", '+n+"x"+u+", "+c+", "+l+' interface: "'+d+'"');var g={title:e,_window:r.app.newWindow(e,n,u,c,l),element:d,_camera:null,cameraState:null,updates:{},postTransformUpdates:{},postCameraUpdates:{},endFrameUpdates:{},inputHandlers:[a.KeyBinder("bindings")],cursorPosition:[0,0],backgroundHandlers:[],touchDown:!1,allowKeypress:!0};return g.id=g._window.id,console.verboseLog("ranger/Window: ID: "+g.id),t.window&&(t.window.addEventListener("resize",M),g.element.addEventListener("mouseout",a.eventHandlers.cursorOut),g.element.addEventListener("mousemove",a.eventHandlers.cursorMoved),t.window.addEventListener("keydown",a.eventHandlers.keyPress),g.element.addEventListener("mousedown",a.eventHandlers.mouseDown),g.element.addEventListener("mouseup",a.eventHandlers.mouseUp),g.element.addEventListener("DOMMouseScroll",a.eventHandlers.scroll),g.element.addEventListener("mousewheel",a.eventHandlers.scroll),g.element.addEventListener("wheel",a.eventHandlers.scroll),g.element.addEventListener("touchstart",a.eventHandlers.touchStart),g.element.addEventListener("touchmove",a.eventHandlers.touchMove),g.element.addEventListener("touchend",a.eventHandlers.touchEnd),g.element.addEventListener("touchcancel",a.eventHandlers.touchCancel),g.element.addEventListener("touchleave",a.eventHandlers.touchCancel),M()),g.pick=function(){return g._window.pickedFragmentInfo},g.updates.camera=function(e,t){t.cameraState&&(t.cameraState.update(t._camera,e),t.cameraState.frame?(r.scene.cameraData[t._camera.id].attachedNode=t.cameraState.frame.parent,t._camera.frame=t.cameraState.frame,t.cameraDebug&&(console.log("ranger/Window: camera: "+t.cameraState.name()),console.log(t.cameraState.frame.position),console.log(t.cameraState.frame.orientation))):console.error("ranger/Window: Error: Invalid camera state"))},g.setCamera=function(e){g.cameraState&&g.cameraState.exit(g),g.cameraState=e,e.enter&&e.enter(g)},g.initCamera=function(e){var t=e.clock||r.clock.Clock(0,0),n=e.target||r.scene.get("Star_Sun");console.verboseLog("ranger/Window: "+g.id+": addCamera("+t.time.value+", "+t.rate+")"),g._camera=g._window.addCamera(t),g._camera.fov=Math.PI/6;var o={parent:n,position:e.position||[0,0,0],orientation:e.orientation||[0,0,0,1]};g._camera.frame=o,r.scene.cameraData[g._camera.id]||(r.scene.cameraData[g._camera.id]={}),r.scene.cameraData[g._camera.id].attachedNode=n,console.verboseLog("ranger/Window: "+g.id+": camera init complete"),navigator.getVRDisplays().then(function(e){return e.length?(g.vrDevice=e[0],void(g.vrDevice&&console.log("VR Device detected."))):void console.log("No VRDisplays are found.")})["catch"](function(e){console.error("Could not get VRDevices",e.stack)}),g._camera.stereoBindings=a.KeyBinder("stereo_bindings",{P:function(){g._camera.eyeSeparation+=.0025},O:function(){g._camera.eyeSeparation-=.0025},I:function(){g._camera.focalDistance+=.0025},U:function(){g._camera.focalDistance-=.0025}}),g.addInputHandler(g._camera.stereoBindings),i.generateLabelSystem(g,g._camera)},g.getInputHandler=function(e){for(var t in g.inputHandlers)if(g.inputHandlers[t].name==e)return g.inputHandlers[t];return null},g.addInputHandler=function(e){for(var t in g.inputHandlers)if(g.inputHandlers[t].name==e.name)return void(g.inputHandlers[t]=e);g.inputHandlers.push(e)},g.deleteInputHandler=function(e){for(var t in g.inputHandlers)if(g.inputHandlers[t].name==e)return void delete g.inputHandlers[t]},g.addBackgroundHandler=function(e){for(var t in g.backgroundHandlers)if(g.backgroundHandlers[t].name==e.name)return void(g.backgroundHandlers[t]=e);g.backgroundHandlers.push(e)},g.deleteBackgroundHandler=function(e){for(var t in g.backgroundHandlers)if(g.backgroundHandlers[t].name==e)return void delete g.backgroundHandlers[t]},g.bind=function(e,t){g.getInputHandler("bindings").Bind(e,t),g.getInputHandler("bindings").Bind(e,t)},g.unbind=function(e){g.getInputHandler("bindings").Unbind(e)},g.passInputEvent=function(e,t){var n,r=!1;for(n in g.inputHandlers)try{if(void 0!==g.inputHandlers[n]&&g.inputHandlers[n].handle(e,t)){r=!0;break}}catch(a){console.exception('ranger/Window: Updating "'+g.title+'" failed in input handler "'+g.inputHandlers[n].name+'": ',a)}if(!r)for(n in g.backgroundHandlers)try{if(void 0!==g.backgroundHandlers[n]&&g.backgroundHandlers[n].handle(e,t)){r=!0;break}}catch(a){console.exception('ranger/Window: Updating "'+g.title+'" failed in input handler "'+g.inputHandlers[n].name+'": ',a)}},g.loop=function(e,t,n,r){try{n[r](t,g),n[r].failed&&console.verboseLog('ranger/Window: Updating "'+g.title+'" succeded after '+n[r].failed+" tries"),n[r].failed=0}catch(a){n[r].failed||(n[r].failed=0),(++n[r].failed<3||g.doDebug)&&console.exception('ranger/Window: Updating "'+g.title+'" failed '+(n[r].failed<2?"":"(supressing messages)")+" in "+e+': "'+r+'": ',a);
}},g._window.windowUpdate=function(e){for(var t in g.updates)g.loop("windowUpdate",e,g.updates,t)},g._window.postTransformUpdate=function(e){for(var t in g.postTransformUpdates)g.loop("postTransformUpdate",e,g.postTransformUpdates,t)},g._window.postCameraUpdate=function(e){for(var t in g.postCameraUpdates)g.loop("postCameraUpdates",e,g.postCameraUpdates,t)},g.endFrame=function(e){for(var t in g.endFrameUpdates)g.loop("endFrameUpdates",e,g.endFrameUpdates,t)},g.getClock=function(){return g._camera?g._camera.clock:r.clock.Clock(NaN,NaN)},g.setRate=function(e){return g._camera?g._camera.clock={time:g._camera.clock.time,rate:e}:r.clock.Clock(NaN,NaN)},g.setTime=function(e){return g._camera?g._camera.clock={time:{value:e},rate:g._camera.clock.rate}:r.clock.Clock(NaN,NaN)},g.getRate=function(){return g._camera?g._camera.clock.rate:0},g.getTime=function(){return g._camera?g._camera.clock.time.value:0},g.getCorrectedCursorPosition=function(){var e=g.element.getBoundingClientRect(),t=[0,0],n=e.top,r=e.left;return t[0]=g.cursorPosition[0]-r,t[1]=g.cursorPosition[1]-n,t},g.getCorrectedPosition=function(e,t){var n=g.element.getBoundingClientRect(),r=[0,0],a=n.top,i=n.left;return r[0]=e-i,r[1]=t-a,r},g.getCorrectedPositionNDC=function(e,t){var n=g.getCorrectedPosition(e,t);return[(n[0]-g._window.width/2)/(g._window.width/2),(g._window.height-n[1]-g._window.height/2)/(g._window.height/2)]},o.init(g),s.setAnimation(g),r.graphics.init(),a.init(g),console.verboseLog("ranger/Window: init complete"),g}}).call(t,function(){return this}())},function(e,t,n){function r(){if(o)return o;o=document.createElement("div"),o.id="loadingDiv",o.className="uil-spin-css";var e=document.createElement("style");e.innerHTML=u,o.appendChild(e),o.style.left="50%",o.style.top="50%",o.style.position="absolute",o.style.transform="translate(-100px, -100px) scale(0.25)",o.style["pointer-events"]="none";for(var t,n=0;n<8;n++)t=document.createElement("div"),t.appendChild(document.createElement("div")),o.appendChild(t);return o}function a(){s.app.downloadManager.downloadCount>0?document.getElementById("loadingDiv")||document.getElementById("ranger-container").appendChild(o):document.getElementById("loadingDiv")&&o.parentNode.removeChild(o)}function i(e){r(),e.endFrameUpdates.loadingAnimation=a}var o,s=n(4),u=".uil-spin-css {background: none;position: relative;width: 200px;height: 200px;}width: 100%;@-webkit-keyframes uil-spin-css {0% {opacity: 1;-ms-transform: scale(1.5);-moz-transform: scale(1.5);-webkit-transform: scale(1.5);-o-transform: scale(1.5);transform: scale(1.5);}100% {opacity: 0.1;-ms-transform: scale(1);-moz-transform: scale(1);-webkit-transform: scale(1);-o-transform: scale(1);transform: scale(1);}}@-webkit-keyframes uil-spin-css {0% {opacity: 1;-ms-transform: scale(1.5);-moz-transform: scale(1.5);-webkit-transform: scale(1.5);-o-transform: scale(1.5);transform: scale(1.5);}100% {opacity: 0.1;-ms-transform: scale(1);-moz-transform: scale(1);-webkit-transform: scale(1);-o-transform: scale(1);transform: scale(1);}}@-moz-keyframes uil-spin-css {0% {opacity: 1;-ms-transform: scale(1.5);-moz-transform: scale(1.5);-webkit-transform: scale(1.5);-o-transform: scale(1.5);transform: scale(1.5);}100% {opacity: 0.1;-ms-transform: scale(1);-moz-transform: scale(1);-webkit-transform: scale(1);-o-transform: scale(1);transform: scale(1);}}@-ms-keyframes uil-spin-css {0% {opacity: 1;-ms-transform: scale(1.5);-moz-transform: scale(1.5);-webkit-transform: scale(1.5);-o-transform: scale(1.5);transform: scale(1.5);}100% {opacity: 0.1;-ms-transform: scale(1);-moz-transform: scale(1);-webkit-transform: scale(1);-o-transform: scale(1);transform: scale(1);}}@-moz-keyframes uil-spin-css {0% {opacity: 1;-ms-transform: scale(1.5);-moz-transform: scale(1.5);-webkit-transform: scale(1.5);-o-transform: scale(1.5);transform: scale(1.5);}100% {opacity: 0.1;-ms-transform: scale(1);-moz-transform: scale(1);-webkit-transform: scale(1);-o-transform: scale(1);transform: scale(1);}}@-webkit-keyframes uil-spin-css {0% {opacity: 1;-ms-transform: scale(1.5);-moz-transform: scale(1.5);-webkit-transform: scale(1.5);-o-transform: scale(1.5);transform: scale(1.5);}100% {opacity: 0.1;-ms-transform: scale(1);-moz-transform: scale(1);-webkit-transform: scale(1);-o-transform: scale(1);transform: scale(1);}}@-o-keyframes uil-spin-css {0% {opacity: 1;-ms-transform: scale(1.5);-moz-transform: scale(1.5);-webkit-transform: scale(1.5);-o-transform: scale(1.5);transform: scale(1.5);}100% {opacity: 0.1;-ms-transform: scale(1);-moz-transform: scale(1);-webkit-transform: scale(1);-o-transform: scale(1);transform: scale(1);}}@keyframes uil-spin-css {0% {opacity: 1;-ms-transform: scale(1.5);-moz-transform: scale(1.5);-webkit-transform: scale(1.5);-o-transform: scale(1.5);transform: scale(1.5);}100% {opacity: 0.1;-ms-transform: scale(1);-moz-transform: scale(1);-webkit-transform: scale(1);-o-transform: scale(1);transform: scale(1);}}.uil-spin-css > div {width: 24px;height: 24px;margin-left: 4px;margin-top: 4px;position: absolute;}.uil-spin-css > div > div {width: 100%;height: 100%;border-radius: 15px;background: #bdbcbc;}.uil-spin-css > div:nth-of-type(1) > div {-ms-animation: uil-spin-css 1s linear infinite;-moz-animation: uil-spin-css 1s linear infinite;-webkit-animation: uil-spin-css 1s linear infinite;-o-animation: uil-spin-css 1s linear infinite;animation: uil-spin-css 1s linear infinite;-ms-animation-delay: 0s;-moz-animation-delay: 0s;-webkit-animation-delay: 0s;-o-animation-delay: 0s;animation-delay: 0s;}.uil-spin-css > div:nth-of-type(1) {-ms-transform: translate(84px, 84px) rotate(45deg) translate(70px, 0);-moz-transform: translate(84px, 84px) rotate(45deg) translate(70px, 0);-webkit-transform: translate(84px, 84px) rotate(45deg) translate(70px, 0);-o-transform: translate(84px, 84px) rotate(45deg) translate(70px, 0);transform: translate(84px, 84px) rotate(45deg) translate(70px, 0);}.uil-spin-css > div:nth-of-type(2) > div {-ms-animation: uil-spin-css 1s linear infinite;-moz-animation: uil-spin-css 1s linear infinite;-webkit-animation: uil-spin-css 1s linear infinite;-o-animation: uil-spin-css 1s linear infinite;animation: uil-spin-css 1s linear infinite;-ms-animation-delay: 0.12s;-moz-animation-delay: 0.12s;-webkit-animation-delay: 0.12s;-o-animation-delay: 0.12s;animation-delay: 0.12s;}.uil-spin-css > div:nth-of-type(2) {-ms-transform: translate(84px, 84px) rotate(90deg) translate(70px, 0);-moz-transform: translate(84px, 84px) rotate(90deg) translate(70px, 0);-webkit-transform: translate(84px, 84px) rotate(90deg) translate(70px, 0);-o-transform: translate(84px, 84px) rotate(90deg) translate(70px, 0);transform: translate(84px, 84px) rotate(90deg) translate(70px, 0);}.uil-spin-css > div:nth-of-type(3) > div {-ms-animation: uil-spin-css 1s linear infinite;-moz-animation: uil-spin-css 1s linear infinite;-webkit-animation: uil-spin-css 1s linear infinite;-o-animation: uil-spin-css 1s linear infinite;animation: uil-spin-css 1s linear infinite;-ms-animation-delay: 0.25s;-moz-animation-delay: 0.25s;-webkit-animation-delay: 0.25s;-o-animation-delay: 0.25s;animation-delay: 0.25s;}.uil-spin-css > div:nth-of-type(3) {-ms-transform: translate(84px, 84px) rotate(135deg) translate(70px, 0);-moz-transform: translate(84px, 84px) rotate(135deg) translate(70px, 0);-webkit-transform: translate(84px, 84px) rotate(135deg) translate(70px, 0);-o-transform: translate(84px, 84px) rotate(135deg) translate(70px, 0);transform: translate(84px, 84px) rotate(135deg) translate(70px, 0);}.uil-spin-css > div:nth-of-type(4) > div {-ms-animation: uil-spin-css 1s linear infinite;-moz-animation: uil-spin-css 1s linear infinite;-webkit-animation: uil-spin-css 1s linear infinite;-o-animation: uil-spin-css 1s linear infinite;animation: uil-spin-css 1s linear infinite;-ms-animation-delay: 0.37s;-moz-animation-delay: 0.37s;-webkit-animation-delay: 0.37s;-o-animation-delay: 0.37s;animation-delay: 0.37s;}.uil-spin-css > div:nth-of-type(4) {-ms-transform: translate(84px, 84px) rotate(180deg) translate(70px, 0);-moz-transform: translate(84px, 84px) rotate(180deg) translate(70px, 0);-webkit-transform: translate(84px, 84px) rotate(180deg) translate(70px, 0);-o-transform: translate(84px, 84px) rotate(180deg) translate(70px, 0);transform: translate(84px, 84px) rotate(180deg) translate(70px, 0);}.uil-spin-css > div:nth-of-type(5) > div {-ms-animation: uil-spin-css 1s linear infinite;-moz-animation: uil-spin-css 1s linear infinite;-webkit-animation: uil-spin-css 1s linear infinite;-o-animation: uil-spin-css 1s linear infinite;animation: uil-spin-css 1s linear infinite;-ms-animation-delay: 0.5s;-moz-animation-delay: 0.5s;-webkit-animation-delay: 0.5s;-o-animation-delay: 0.5s;animation-delay: 0.5s;}.uil-spin-css > div:nth-of-type(5) {-ms-transform: translate(84px, 84px) rotate(225deg) translate(70px, 0);-moz-transform: translate(84px, 84px) rotate(225deg) translate(70px, 0);-webkit-transform: translate(84px, 84px) rotate(225deg) translate(70px, 0);-o-transform: translate(84px, 84px) rotate(225deg) translate(70px, 0);transform: translate(84px, 84px) rotate(225deg) translate(70px, 0);}.uil-spin-css > div:nth-of-type(6) > div {-ms-animation: uil-spin-css 1s linear infinite;-moz-animation: uil-spin-css 1s linear infinite;-webkit-animation: uil-spin-css 1s linear infinite;-o-animation: uil-spin-css 1s linear infinite;animation: uil-spin-css 1s linear infinite;-ms-animation-delay: 0.62s;-moz-animation-delay: 0.62s;-webkit-animation-delay: 0.62s;-o-animation-delay: 0.62s;animation-delay: 0.62s;}.uil-spin-css > div:nth-of-type(6) {-ms-transform: translate(84px, 84px) rotate(270deg) translate(70px, 0);-moz-transform: translate(84px, 84px) rotate(270deg) translate(70px, 0);-webkit-transform: translate(84px, 84px) rotate(270deg) translate(70px, 0);-o-transform: translate(84px, 84px) rotate(270deg) translate(70px, 0);transform: translate(84px, 84px) rotate(270deg) translate(70px, 0);}.uil-spin-css > div:nth-of-type(7) > div {-ms-animation: uil-spin-css 1s linear infinite;-moz-animation: uil-spin-css 1s linear infinite;-webkit-animation: uil-spin-css 1s linear infinite;-o-animation: uil-spin-css 1s linear infinite;animation: uil-spin-css 1s linear infinite;-ms-animation-delay: 0.75s;-moz-animation-delay: 0.75s;-webkit-animation-delay: 0.75s;-o-animation-delay: 0.75s;animation-delay: 0.75s;}.uil-spin-css > div:nth-of-type(7) {-ms-transform: translate(84px, 84px) rotate(315deg) translate(70px, 0);-moz-transform: translate(84px, 84px) rotate(315deg) translate(70px, 0);-webkit-transform: translate(84px, 84px) rotate(315deg) translate(70px, 0);-o-transform: translate(84px, 84px) rotate(315deg) translate(70px, 0);transform: translate(84px, 84px) rotate(315deg) translate(70px, 0);}.uil-spin-css > div:nth-of-type(8) > div {-ms-animation: uil-spin-css 1s linear infinite;-moz-animation: uil-spin-css 1s linear infinite;-webkit-animation: uil-spin-css 1s linear infinite;-o-animation: uil-spin-css 1s linear infinite;animation: uil-spin-css 1s linear infinite;-ms-animation-delay: 0.87s;-moz-animation-delay: 0.87s;-webkit-animation-delay: 0.87s;-o-animation-delay: 0.87s;animation-delay: 0.87s;}.uil-spin-css > div:nth-of-type(8) {-ms-transform: translate(84px, 84px) rotate(360deg) translate(70px, 0);-moz-transform: translate(84px, 84px) rotate(360deg) translate(70px, 0);-webkit-transform: translate(84px, 84px) rotate(360deg) translate(70px, 0);-o-transform: translate(84px, 84px) rotate(360deg) translate(70px, 0);transform: translate(84px, 84px) rotate(360deg) translate(70px, 0);}";e.exports={loadingDiv:o,getLoadingDiv:r,loadingAnimation:a,setAnimation:i}},function(e,t){!function n(e,t,r){function a(o,s){if(!t[o]){if(!e[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(i)return i(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var l=t[o]={exports:{}};e[o][0].call(l.exports,function(t){var n=e[o][1][t];return a(n?n:t)},l,l.exports,n,e,t,r)}return t[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)a(r[o]);return a}({1:[function(e,t,n){"use strict";function r(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function a(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"!==r.join(""))return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach(function(e){a[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},a)).join("")}catch(i){return!1}}var i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;t.exports=a()?Object.assign:function(e,t){for(var n,a,s=r(e),u=1;u<arguments.length;u++){n=Object(arguments[u]);for(var c in n)i.call(n,c)&&(s[c]=n[c]);if(Object.getOwnPropertySymbols){a=Object.getOwnPropertySymbols(n);for(var l=0;l<a.length;l++)o.call(n,a[l])&&(s[a[l]]=n[a[l]])}}return s}},{}],2:[function(e,t,n){function r(){this.isPolyfilled=!0,this.displayId=c++,this.displayName="webvr-polyfill displayName",this.isConnected=!0,this.isPresenting=!1,this.capabilities={hasPosition:!1,hasOrientation:!1,hasExternalDisplay:!1,canPresent:!1,maxLayers:1},this.stageParameters=null,this.waitingForPresent_=!1,this.layer_=null,this.fullscreenElement_=null,this.fullscreenWrapper_=null,this.fullscreenElementCachedStyle_=null,this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null,this.wakelock_=new u}function a(){this.isPolyfilled=!0,this.hardwareUnitId="webvr-polyfill hardwareUnitId",this.deviceId="webvr-polyfill deviceId",this.deviceName="webvr-polyfill deviceName"}function i(){}function o(){}var s=e("./util.js"),u=e("./wakelock.js"),c=1e3,l=!1,d=[0,0,.5,1],M=[.5,0,.5,1];r.prototype.getPose=function(){return this.getImmediatePose()},r.prototype.requestAnimationFrame=function(e){return window.requestAnimationFrame(e)},r.prototype.cancelAnimationFrame=function(e){return window.cancelAnimationFrame(e)},r.prototype.wrapForFullscreen=function(e){function t(){if(a.fullscreenElement_){var e=["position: absolute","top: 0","left: 0","width: "+Math.max(screen.width,screen.height)+"px","height: "+Math.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0"];a.fullscreenElement_.setAttribute("style",e.join("; ")+";")}}if(s.isIOS())return e;if(!this.fullscreenWrapper_){this.fullscreenWrapper_=document.createElement("div");var n=["height: "+Math.min(screen.height,screen.width)+"px !important","top: 0 !important","left: 0 !important","right: 0 !important","border: 0","margin: 0","padding: 0","z-index: 999999 !important","position: fixed"];this.fullscreenWrapper_.setAttribute("style",n.join("; ")+";"),this.fullscreenWrapper_.classList.add("webvr-polyfill-fullscreen-wrapper")}if(this.fullscreenElement_==e)return this.fullscreenWrapper_;this.removeFullscreenWrapper(),this.fullscreenElement_=e;var r=this.fullscreenElement_.parentElement;r.insertBefore(this.fullscreenWrapper_,this.fullscreenElement_),r.removeChild(this.fullscreenElement_),this.fullscreenWrapper_.insertBefore(this.fullscreenElement_,this.fullscreenWrapper_.firstChild),this.fullscreenElementCachedStyle_=this.fullscreenElement_.getAttribute("style");var a=this;return t(),this.fullscreenWrapper_},r.prototype.removeFullscreenWrapper=function(){if(this.fullscreenElement_){var e=this.fullscreenElement_;this.fullscreenElementCachedStyle_?e.setAttribute("style",this.fullscreenElementCachedStyle_):e.removeAttribute("style"),this.fullscreenElement_=null,this.fullscreenElementCachedStyle_=null;var t=this.fullscreenWrapper_.parentElement;return this.fullscreenWrapper_.removeChild(e),t.insertBefore(e,this.fullscreenWrapper_),t.removeChild(this.fullscreenWrapper_),e}},r.prototype.requestPresent=function(e){var t=this.isPresenting,n=this;return e instanceof Array||(l||(console.warn("Using a deprecated form of requestPresent. Should pass in an array of VRLayers."),l=!0),e=[e]),new Promise(function(r,a){function i(){var e=s.getFullscreenElement();n.isPresenting=m===e,n.isPresenting?(screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape-primary")["catch"](function(e){console.error("screen.orientation.lock() failed due to",e.message)}),n.waitingForPresent_=!1,n.beginPresent_(),r()):(screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),n.removeFullscreenWrapper(),n.wakelock_.release(),n.endPresent_(),n.removeFullscreenListeners_()),n.fireVRDisplayPresentChange_()}function o(){n.waitingForPresent_&&(n.removeFullscreenWrapper(),n.removeFullscreenListeners_(),n.wakelock_.release(),n.waitingForPresent_=!1,n.isPresenting=!1,a(new Error("Unable to present.")))}if(!n.capabilities.canPresent)return void a(new Error("VRDisplay is not capable of presenting."));if(0==e.length||e.length>n.capabilities.maxLayers)return void a(new Error("Invalid number of layers."));var u=e[0];if(!u.source)return void r();var c=u.leftBounds||d,l=u.rightBounds||M;if(t){var g=!1,p=n.layer_;p.source!==u.source&&(p.source=u.source,g=!0);for(var A=0;A<4;A++)p.leftBounds[A]!==c[A]&&(p.leftBounds[A]=c[A],g=!0),p.rightBounds[A]!==l[A]&&(p.rightBounds[A]=l[A],g=!0);return g&&n.fireVRDisplayPresentChange_(),void r()}if(n.layer_={predistorted:u.predistorted,source:u.source,leftBounds:c.slice(0),rightBounds:l.slice(0)},n.waitingForPresent_=!1,n.layer_&&n.layer_.source){var m=n.wrapForFullscreen(n.layer_.source);n.addFullscreenListeners_(m,i,o),s.requestFullscreen(m)?(n.wakelock_.request(),n.waitingForPresent_=!0):s.isIOS()&&(n.wakelock_.request(),n.isPresenting=!0,n.beginPresent_(),n.fireVRDisplayPresentChange_(),r())}n.waitingForPresent_||s.isIOS()||(s.exitFullscreen(),a(new Error("Unable to present.")))})},r.prototype.exitPresent=function(){var e=this.isPresenting,t=this;return this.isPresenting=!1,this.layer_=null,this.wakelock_.release(),new Promise(function(n,r){e?(!s.exitFullscreen()&&s.isIOS()&&(t.endPresent_(),t.fireVRDisplayPresentChange_()),n()):r(new Error("Was not presenting to VRDisplay."))})},r.prototype.getLayers=function(){return this.layer_?[this.layer_]:[]},r.prototype.fireVRDisplayPresentChange_=function(){var e=new CustomEvent("vrdisplaypresentchange",{detail:{vrdisplay:this}});window.dispatchEvent(e)},r.prototype.addFullscreenListeners_=function(e,t,n){this.removeFullscreenListeners_(),this.fullscreenEventTarget_=e,this.fullscreenChangeHandler_=t,this.fullscreenErrorHandler_=n,t&&(e.addEventListener("fullscreenchange",t,!1),e.addEventListener("webkitfullscreenchange",t,!1),document.addEventListener("mozfullscreenchange",t,!1),e.addEventListener("msfullscreenchange",t,!1)),n&&(e.addEventListener("fullscreenerror",n,!1),e.addEventListener("webkitfullscreenerror",n,!1),document.addEventListener("mozfullscreenerror",n,!1),e.addEventListener("msfullscreenerror",n,!1))},r.prototype.removeFullscreenListeners_=function(){if(this.fullscreenEventTarget_){var e=this.fullscreenEventTarget_;if(this.fullscreenChangeHandler_){var t=this.fullscreenChangeHandler_;e.removeEventListener("fullscreenchange",t,!1),e.removeEventListener("webkitfullscreenchange",t,!1),document.removeEventListener("mozfullscreenchange",t,!1),e.removeEventListener("msfullscreenchange",t,!1)}if(this.fullscreenErrorHandler_){var n=this.fullscreenErrorHandler_;e.removeEventListener("fullscreenerror",n,!1),e.removeEventListener("webkitfullscreenerror",n,!1),document.removeEventListener("mozfullscreenerror",n,!1),e.removeEventListener("msfullscreenerror",n,!1)}this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null}},r.prototype.beginPresent_=function(){},r.prototype.endPresent_=function(){},r.prototype.submitFrame=function(e){},r.prototype.getEyeParameters=function(e){return null},i.prototype=new a,o.prototype=new a,t.exports.VRDisplay=r,t.exports.VRDevice=a,t.exports.HMDVRDevice=i,t.exports.PositionSensorVRDevice=o},{"./util.js":22,"./wakelock.js":24}],3:[function(e,t,n){function r(e){this.gl=e,this.ctxAttribs=e.getContextAttributes(),this.meshWidth=20,this.meshHeight=20,this.bufferScale=WebVRConfig.BUFFER_SCALE,this.bufferWidth=e.drawingBufferWidth,this.bufferHeight=e.drawingBufferHeight,this.realBindFramebuffer=e.bindFramebuffer,this.realEnable=e.enable,this.realDisable=e.disable,this.realColorMask=e.colorMask,this.realClearColor=e.clearColor,this.realViewport=e.viewport,i.isIOS()||(this.realCanvasWidth=Object.getOwnPropertyDescriptor(e.canvas.__proto__,"width"),this.realCanvasHeight=Object.getOwnPropertyDescriptor(e.canvas.__proto__,"height")),this.isPatched=!1,this.lastBoundFramebuffer=null,this.cullFace=!1,this.depthTest=!1,this.blend=!1,this.scissorTest=!1,this.stencilTest=!1,this.viewport=[0,0,0,0],this.colorMask=[!0,!0,!0,!0],this.clearColor=[0,0,0,0],this.attribs={position:0,texCoord:1},this.program=i.linkProgram(e,s,u,this.attribs),this.uniforms=i.getProgramUniforms(e,this.program),this.viewportOffsetScale=new Float32Array(8),this.setTextureBounds(),this.vertexBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),this.indexCount=0,this.renderTarget=e.createTexture(),this.framebuffer=e.createFramebuffer(),this.depthStencilBuffer=null,this.depthBuffer=null,this.stencilBuffer=null,this.ctxAttribs.depth&&this.ctxAttribs.stencil?this.depthStencilBuffer=e.createRenderbuffer():this.ctxAttribs.depth?this.depthBuffer=e.createRenderbuffer():this.ctxAttribs.stencil&&(this.stencilBuffer=e.createRenderbuffer()),this.patch(),this.onResize(),WebVRConfig.CARDBOARD_UI_DISABLED||(this.cardboardUI=new a(e))}var a=e("./cardboard-ui.js"),i=e("./util.js"),o=e("./deps/wglu-preserve-state.js"),s=["attribute vec2 position;","attribute vec3 texCoord;","varying vec2 vTexCoord;","uniform vec4 viewportOffsetScale[2];","void main() {","  vec4 viewport = viewportOffsetScale[int(texCoord.z)];","  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;","  gl_Position = vec4( position, 1.0, 1.0 );","}"].join("\n"),u=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join("\n");r.prototype.destroy=function(){var e=this.gl;this.unpatch(),e.deleteProgram(this.program),e.deleteBuffer(this.vertexBuffer),e.deleteBuffer(this.indexBuffer),e.deleteTexture(this.renderTarget),e.deleteFramebuffer(this.framebuffer),this.depthStencilBuffer&&e.deleteRenderbuffer(this.depthStencilBuffer),this.depthBuffer&&e.deleteRenderbuffer(this.depthBuffer),this.stencilBuffer&&e.deleteRenderbuffer(this.stencilBuffer),this.cardboardUI&&this.cardboardUI.destroy()},r.prototype.onResize=function(){var e=this.gl,t=this,n=[e.RENDERBUFFER_BINDING,e.TEXTURE_BINDING_2D,e.TEXTURE0];o(e,n,function(e){t.realBindFramebuffer.call(e,e.FRAMEBUFFER,null),t.scissorTest&&t.realDisable.call(e,e.SCISSOR_TEST),t.realColorMask.call(e,!0,!0,!0,!0),t.realViewport.call(e,0,0,e.drawingBufferWidth,e.drawingBufferHeight),t.realClearColor.call(e,0,0,0,1),e.clear(e.COLOR_BUFFER_BIT),t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.framebuffer),e.bindTexture(e.TEXTURE_2D,t.renderTarget),e.texImage2D(e.TEXTURE_2D,0,t.ctxAttribs.alpha?e.RGBA:e.RGB,t.bufferWidth,t.bufferHeight,0,t.ctxAttribs.alpha?e.RGBA:e.RGB,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t.renderTarget,0),t.ctxAttribs.depth&&t.ctxAttribs.stencil?(e.bindRenderbuffer(e.RENDERBUFFER,t.depthStencilBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t.depthStencilBuffer)):t.ctxAttribs.depth?(e.bindRenderbuffer(e.RENDERBUFFER,t.depthBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t.depthBuffer)):t.ctxAttribs.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,t.stencilBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.STENCIL_INDEX8,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.STENCIL_ATTACHMENT,e.RENDERBUFFER,t.stencilBuffer)),!e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer incomplete!"),t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.lastBoundFramebuffer),t.scissorTest&&t.realEnable.call(e,e.SCISSOR_TEST),t.realColorMask.apply(e,t.colorMask),t.realViewport.apply(e,t.viewport),t.realClearColor.apply(e,t.clearColor)}),this.cardboardUI&&this.cardboardUI.onResize()},r.prototype.patch=function(){if(!this.isPatched){var e=this,t=this.gl.canvas,n=this.gl;i.isIOS()||(t.width=i.getScreenWidth()*this.bufferScale,t.height=i.getScreenHeight()*this.bufferScale,Object.defineProperty(t,"width",{configurable:!0,enumerable:!0,get:function(){return e.bufferWidth},set:function(t){e.bufferWidth=t,e.onResize()}}),Object.defineProperty(t,"height",{configurable:!0,enumerable:!0,get:function(){return e.bufferHeight},set:function(t){e.bufferHeight=t,e.onResize()}})),this.lastBoundFramebuffer=n.getParameter(n.FRAMEBUFFER_BINDING),null==this.lastBoundFramebuffer&&(this.lastBoundFramebuffer=this.framebuffer,this.gl.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer)),this.gl.bindFramebuffer=function(t,r){e.lastBoundFramebuffer=r?r:e.framebuffer,e.realBindFramebuffer.call(n,t,e.lastBoundFramebuffer)},this.cullFace=n.getParameter(n.CULL_FACE),this.depthTest=n.getParameter(n.DEPTH_TEST),this.blend=n.getParameter(n.BLEND),this.scissorTest=n.getParameter(n.SCISSOR_TEST),this.stencilTest=n.getParameter(n.STENCIL_TEST),n.enable=function(t){switch(t){case n.CULL_FACE:e.cullFace=!0;break;case n.DEPTH_TEST:e.depthTest=!0;break;case n.BLEND:e.blend=!0;break;case n.SCISSOR_TEST:e.scissorTest=!0;break;case n.STENCIL_TEST:e.stencilTest=!0}e.realEnable.call(n,t)},n.disable=function(t){switch(t){case n.CULL_FACE:e.cullFace=!1;break;case n.DEPTH_TEST:e.depthTest=!1;break;case n.BLEND:e.blend=!1;break;case n.SCISSOR_TEST:e.scissorTest=!1;break;case n.STENCIL_TEST:e.stencilTest=!1}e.realDisable.call(n,t)},this.colorMask=n.getParameter(n.COLOR_WRITEMASK),n.colorMask=function(t,r,a,i){e.colorMask[0]=t,e.colorMask[1]=r,e.colorMask[2]=a,e.colorMask[3]=i,e.realColorMask.call(n,t,r,a,i)},this.clearColor=n.getParameter(n.COLOR_CLEAR_VALUE),n.clearColor=function(t,r,a,i){e.clearColor[0]=t,e.clearColor[1]=r,e.clearColor[2]=a,e.clearColor[3]=i,e.realClearColor.call(n,t,r,a,i)},this.viewport=n.getParameter(n.VIEWPORT),n.viewport=function(t,r,a,i){e.viewport[0]=t,e.viewport[1]=r,e.viewport[2]=a,e.viewport[3]=i,e.realViewport.call(n,t,r,a,i)},this.isPatched=!0,i.safariCssSizeWorkaround(t)}},r.prototype.unpatch=function(){if(this.isPatched){var e=this.gl,t=this.gl.canvas;i.isIOS()||(Object.defineProperty(t,"width",this.realCanvasWidth),Object.defineProperty(t,"height",this.realCanvasHeight)),t.width=this.bufferWidth,t.height=this.bufferHeight,e.bindFramebuffer=this.realBindFramebuffer,e.enable=this.realEnable,e.disable=this.realDisable,e.colorMask=this.realColorMask,e.clearColor=this.realClearColor,e.viewport=this.realViewport,this.lastBoundFramebuffer==this.framebuffer&&e.bindFramebuffer(e.FRAMEBUFFER,null),this.isPatched=!1,setTimeout(function(){i.safariCssSizeWorkaround(t)},1)}},r.prototype.setTextureBounds=function(e,t){e||(e=[0,0,.5,1]),t||(t=[.5,0,.5,1]),this.viewportOffsetScale[0]=e[0],this.viewportOffsetScale[1]=e[1],this.viewportOffsetScale[2]=e[2],this.viewportOffsetScale[3]=e[3],this.viewportOffsetScale[4]=t[0],this.viewportOffsetScale[5]=t[1],this.viewportOffsetScale[6]=t[2],this.viewportOffsetScale[7]=t[3]},r.prototype.submitFrame=function(){var e=this.gl,t=this,n=[];if(WebVRConfig.DIRTY_SUBMIT_FRAME_BINDINGS||n.push(e.CURRENT_PROGRAM,e.ARRAY_BUFFER_BINDING,e.ELEMENT_ARRAY_BUFFER_BINDING,e.TEXTURE_BINDING_2D,e.TEXTURE0),o(e,n,function(e){t.realBindFramebuffer.call(e,e.FRAMEBUFFER,null),t.cullFace&&t.realDisable.call(e,e.CULL_FACE),t.depthTest&&t.realDisable.call(e,e.DEPTH_TEST),t.blend&&t.realDisable.call(e,e.BLEND),t.scissorTest&&t.realDisable.call(e,e.SCISSOR_TEST),t.stencilTest&&t.realDisable.call(e,e.STENCIL_TEST),t.realColorMask.call(e,!0,!0,!0,!0),t.realViewport.call(e,0,0,e.drawingBufferWidth,e.drawingBufferHeight),(t.ctxAttribs.alpha||i.isIOS())&&(t.realClearColor.call(e,0,0,0,1),e.clear(e.COLOR_BUFFER_BIT)),e.useProgram(t.program),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.indexBuffer),e.bindBuffer(e.ARRAY_BUFFER,t.vertexBuffer),e.enableVertexAttribArray(t.attribs.position),e.enableVertexAttribArray(t.attribs.texCoord),e.vertexAttribPointer(t.attribs.position,2,e.FLOAT,!1,20,0),e.vertexAttribPointer(t.attribs.texCoord,3,e.FLOAT,!1,20,8),e.activeTexture(e.TEXTURE0),e.uniform1i(t.uniforms.diffuse,0),e.bindTexture(e.TEXTURE_2D,t.renderTarget),e.uniform4fv(t.uniforms.viewportOffsetScale,t.viewportOffsetScale),e.drawElements(e.TRIANGLES,t.indexCount,e.UNSIGNED_SHORT,0),t.cardboardUI&&t.cardboardUI.renderNoState(),t.realBindFramebuffer.call(t.gl,e.FRAMEBUFFER,t.framebuffer),t.ctxAttribs.preserveDrawingBuffer||(t.realClearColor.call(e,0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)),WebVRConfig.DIRTY_SUBMIT_FRAME_BINDINGS||t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.lastBoundFramebuffer),t.cullFace&&t.realEnable.call(e,e.CULL_FACE),t.depthTest&&t.realEnable.call(e,e.DEPTH_TEST),t.blend&&t.realEnable.call(e,e.BLEND),t.scissorTest&&t.realEnable.call(e,e.SCISSOR_TEST),t.stencilTest&&t.realEnable.call(e,e.STENCIL_TEST),t.realColorMask.apply(e,t.colorMask),t.realViewport.apply(e,t.viewport),!t.ctxAttribs.alpha&&t.ctxAttribs.preserveDrawingBuffer||t.realClearColor.apply(e,t.clearColor)}),i.isIOS()){var r=e.canvas;r.width==t.bufferWidth&&r.height==t.bufferHeight||(t.bufferWidth=r.width,t.bufferHeight=r.height,t.onResize())}},r.prototype.updateDeviceInfo=function(e){var t=this.gl,n=this,r=[t.ARRAY_BUFFER_BINDING,t.ELEMENT_ARRAY_BUFFER_BINDING];o(t,r,function(t){var r=n.computeMeshVertices_(n.meshWidth,n.meshHeight,e);if(t.bindBuffer(t.ARRAY_BUFFER,n.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,r,t.STATIC_DRAW),!n.indexCount){var a=n.computeMeshIndices_(n.meshWidth,n.meshHeight);t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,a,t.STATIC_DRAW),n.indexCount=a.length}})},r.prototype.computeMeshVertices_=function(e,t,n){for(var r=new Float32Array(2*e*t*5),a=n.getLeftEyeVisibleTanAngles(),o=n.getLeftEyeNoLensTanAngles(),s=n.getLeftEyeVisibleScreenRect(o),u=0,c=0;c<2;c++){for(var l=0;l<t;l++)for(var d=0;d<e;d++,u++){var M=d/(e-1),g=l/(t-1),p=M,A=g,m=i.lerp(a[0],a[2],M),f=i.lerp(a[3],a[1],g),D=Math.sqrt(m*m+f*f),N=n.distortion.distortInverse(D),h=m*N/D,T=f*N/D;M=(h-o[0])/(o[2]-o[0]),g=(T-o[3])/(o[1]-o[3]);n.device.widthMeters/n.device.heightMeters;M=2*(s.x+M*s.width-.5),g=2*(s.y+g*s.height-.5),r[5*u+0]=M,r[5*u+1]=g,r[5*u+2]=p,r[5*u+3]=A,r[5*u+4]=c}var y=a[2]-a[0];a[0]=-(y+a[0]),a[2]=y-a[2],y=o[2]-o[0],o[0]=-(y+o[0]),o[2]=y-o[2],s.x=1-(s.x+s.width)}return r},r.prototype.computeMeshIndices_=function(e,t){for(var n=new Uint16Array(2*(e-1)*(t-1)*6),r=e/2,a=t/2,i=0,o=0,s=0;s<2;s++)for(var u=0;u<t;u++)for(var c=0;c<e;c++,i++)0!=c&&0!=u&&(c<=r==u<=a?(n[o++]=i,n[o++]=i-e-1,n[o++]=i-e,n[o++]=i-e-1,n[o++]=i,n[o++]=i-1):(n[o++]=i-1,n[o++]=i-e,n[o++]=i,n[o++]=i-e,n[o++]=i-1,n[o++]=i-e-1));return n},r.prototype.getOwnPropertyDescriptor_=function(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return void 0!==n.get&&void 0!==n.set||(n.configurable=!0,n.enumerable=!0,n.get=function(){return this.getAttribute(t)},n.set=function(e){this.setAttribute(t,e)}),n},t.exports=r},{"./cardboard-ui.js":4,"./deps/wglu-preserve-state.js":6,"./util.js":22}],4:[function(e,t,n){function r(e){this.gl=e,this.attribs={position:0},this.program=a.linkProgram(e,o,s,this.attribs),this.uniforms=a.getProgramUniforms(e,this.program),
this.vertexBuffer=e.createBuffer(),this.gearOffset=0,this.gearVertexCount=0,this.arrowOffset=0,this.arrowVertexCount=0,this.projMat=new Float32Array(16),this.listener=null,this.onResize()}var a=e("./util.js"),i=e("./deps/wglu-preserve-state.js"),o=["attribute vec2 position;","uniform mat4 projectionMat;","void main() {","  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );","}"].join("\n"),s=["precision mediump float;","uniform vec4 color;","void main() {","  gl_FragColor = color;","}"].join("\n"),u=Math.PI/180,c=60,l=12,d=20,M=1,g=.75,p=.3125,A=4,m=28,f=1.5;r.prototype.destroy=function(){var e=this.gl;this.listener&&e.canvas.removeEventListener("click",this.listener,!1),e.deleteProgram(this.program),e.deleteBuffer(this.vertexBuffer)},r.prototype.listen=function(e,t){var n=this.gl.canvas;this.listener=function(r){var a=n.clientWidth/2,i=m*f;r.clientX>a-i&&r.clientX<a+i&&r.clientY>n.clientHeight-i?e(r):r.clientX<i&&r.clientY<i&&t(r)},n.addEventListener("click",this.listener,!1)},r.prototype.onResize=function(){var e=this.gl,t=this,n=[e.ARRAY_BUFFER_BINDING];i(e,n,function(e){function n(e,t){var n=(90-e)*u,r=Math.cos(n),a=Math.sin(n);i.push(p*r*h+o,p*a*h+h),i.push(t*r*h+o,t*a*h+h)}function r(t,n){i.push(T+t,e.drawingBufferHeight-T-n)}var i=[],o=e.drawingBufferWidth/2,s=e.drawingBufferWidth/(screen.width*window.devicePixelRatio);a.isIOS()||(s*=window.devicePixelRatio);var D=A*s/2,N=m*f*s,h=m*s/2,T=(m*f-m)*s;i.push(o-D,N),i.push(o-D,e.drawingBufferHeight),i.push(o+D,N),i.push(o+D,e.drawingBufferHeight),t.gearOffset=i.length/2;for(var y=0;y<=6;y++){var L=y*c;n(L,M),n(L+l,M),n(L+d,g),n(L+(c-d),g),n(L+(c-l),M)}t.gearVertexCount=i.length/2-t.gearOffset,t.arrowOffset=i.length/2;var v=D/Math.sin(45*u);r(0,h),r(h,0),r(h+v,v),r(v,h+v),r(v,h-v),r(0,h),r(h,2*h),r(h+v,2*h-v),r(v,h-v),r(0,h),r(v,h-D),r(m*s,h-D),r(v,h+D),r(m*s,h+D),t.arrowVertexCount=i.length/2-t.arrowOffset,e.bindBuffer(e.ARRAY_BUFFER,t.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,new Float32Array(i),e.STATIC_DRAW)})},r.prototype.render=function(){var e=this.gl,t=this,n=[e.CULL_FACE,e.DEPTH_TEST,e.BLEND,e.SCISSOR_TEST,e.STENCIL_TEST,e.COLOR_WRITEMASK,e.VIEWPORT,e.CURRENT_PROGRAM,e.ARRAY_BUFFER_BINDING];i(e,n,function(e){e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.BLEND),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.colorMask(!0,!0,!0,!0),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight),t.renderNoState()})},r.prototype.renderNoState=function(){var e=this.gl;e.useProgram(this.program),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.enableVertexAttribArray(this.attribs.position),e.vertexAttribPointer(this.attribs.position,2,e.FLOAT,!1,8,0),e.uniform4f(this.uniforms.color,1,1,1,1),a.orthoMatrix(this.projMat,0,e.drawingBufferWidth,0,e.drawingBufferHeight,.1,1024),e.uniformMatrix4fv(this.uniforms.projectionMat,!1,this.projMat),e.drawArrays(e.TRIANGLE_STRIP,0,4),e.drawArrays(e.TRIANGLE_STRIP,this.gearOffset,this.gearVertexCount),e.drawArrays(e.TRIANGLE_STRIP,this.arrowOffset,this.arrowVertexCount)},t.exports=r},{"./deps/wglu-preserve-state.js":6,"./util.js":22}],5:[function(e,t,n){function r(){this.displayName="Cardboard VRDisplay (webvr-polyfill)",this.capabilities.hasOrientation=!0,this.capabilities.canPresent=!0,this.bufferScale_=WebVRConfig.BUFFER_SCALE,this.poseSensor_=new u,this.distorter_=null,this.cardboardUI_=null,this.dpdb_=new s((!0),this.onDeviceParamsUpdated_.bind(this)),this.deviceInfo_=new o(this.dpdb_.getDeviceParams()),this.viewerSelector_=new l,this.viewerSelector_.on("change",this.onViewerChanged_.bind(this)),this.deviceInfo_.setViewer(this.viewerSelector_.getCurrentViewer()),WebVRConfig.ROTATE_INSTRUCTIONS_DISABLED||(this.rotateInstructions_=new c),M.isIOS()&&window.addEventListener("resize",this.onResize_.bind(this))}var a=e("./cardboard-distorter.js"),i=e("./cardboard-ui.js"),o=e("./device-info.js"),s=e("./dpdb/dpdb.js"),u=e("./sensor-fusion/fusion-pose-sensor.js"),c=e("./rotate-instructions.js"),l=e("./viewer-selector.js"),d=e("./base.js").VRDisplay,M=e("./util.js"),g={LEFT:"left",RIGHT:"right"};r.prototype=new d,r.prototype.getImmediatePose=function(){return{position:this.poseSensor_.getPosition(),orientation:this.poseSensor_.getOrientation(),linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},r.prototype.resetPose=function(){this.poseSensor_.resetPose()},r.prototype.getEyeParameters=function(e){var t,n=[.5*this.deviceInfo_.viewer.interLensDistance,0,0];if(e==g.LEFT)n[0]*=-1,t=this.deviceInfo_.getFieldOfViewLeftEye();else{if(e!=g.RIGHT)return console.error("Invalid eye provided: %s",e),null;t=this.deviceInfo_.getFieldOfViewRightEye()}return{fieldOfView:t,offset:n,renderWidth:.5*this.deviceInfo_.device.width*this.bufferScale_,renderHeight:this.deviceInfo_.device.height*this.bufferScale_}},r.prototype.onDeviceParamsUpdated_=function(e){console.log("DPDB reported that device params were updated."),this.deviceInfo_.updateDeviceParams(e),this.distorter_&&this.distorter.updateDeviceInfo(this.deviceInfo_)},r.prototype.updateBounds_=function(){this.layer_&&this.distorter_&&(this.layer_.leftBounds||this.layer_.rightBounds)&&this.distorter_.setTextureBounds(this.layer_.leftBounds,this.layer_.rightBounds)},r.prototype.beginPresent_=function(){var e=this.layer_.source.getContext("webgl");e||(e=this.layer_.source.getContext("experimental-webgl")),e||(e=this.layer_.source.getContext("webgl2")),e&&(this.layer_.predistorted?WebVRConfig.CARDBOARD_UI_DISABLED||(e.canvas.width=M.getScreenWidth()*this.bufferScale_,e.canvas.height=M.getScreenHeight()*this.bufferScale_,this.cardboardUI_=new i(e)):(this.distorter_=new a(e),this.distorter_.updateDeviceInfo(this.deviceInfo_),this.cardboardUI_=this.distorter_.cardboardUI),this.cardboardUI_&&this.cardboardUI_.listen(function(e){this.viewerSelector_.show(this.layer_.source.parentElement),e.stopPropagation(),e.preventDefault()}.bind(this),function(e){this.exitPresent(),e.stopPropagation(),e.preventDefault()}.bind(this)),this.rotateInstructions_&&(M.isLandscapeMode()&&M.isMobile()?this.rotateInstructions_.showTemporarily(3e3,this.layer_.source.parentElement):this.rotateInstructions_.update()),this.orientationHandler=this.onOrientationChange_.bind(this),window.addEventListener("orientationchange",this.orientationHandler),this.vrdisplaypresentchangeHandler=this.updateBounds_.bind(this),window.addEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler),this.fireVRDisplayDeviceParamsChange_())},r.prototype.endPresent_=function(){this.distorter_&&(this.distorter_.destroy(),this.distorter_=null),this.cardboardUI_&&(this.cardboardUI_.destroy(),this.cardboardUI_=null),this.rotateInstructions_&&this.rotateInstructions_.hide(),this.viewerSelector_.hide(),window.removeEventListener("orientationchange",this.orientationHandler),window.removeEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler)},r.prototype.submitFrame=function(e){if(this.distorter_)this.distorter_.submitFrame();else if(this.cardboardUI_&&this.layer_){var t=this.layer_.source.getContext("webgl").canvas;t.width==this.lastWidth&&t.height==this.lastHeight||this.cardboardUI_.onResize(),this.lastWidth=t.width,this.lastHeight=t.height,this.cardboardUI_.render()}},r.prototype.onOrientationChange_=function(e){console.log("onOrientationChange_"),this.viewerSelector_.hide(),this.rotateInstructions_&&this.rotateInstructions_.update(),this.onResize_()},r.prototype.onResize_=function(e){if(this.layer_){var t=this.layer_.source.getContext("webgl"),n=["position: absolute","top: 0","left: 0","width: "+Math.max(screen.width,screen.height)+"px","height: "+Math.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0 10px 10px 0"];t.canvas.setAttribute("style",n.join("; ")+";"),M.safariCssSizeWorkaround(t.canvas)}},r.prototype.onViewerChanged_=function(e){this.deviceInfo_.setViewer(e),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_),this.fireVRDisplayDeviceParamsChange_()},r.prototype.fireVRDisplayDeviceParamsChange_=function(){var e=new CustomEvent("vrdisplaydeviceparamschange",{detail:{vrdisplay:this,deviceInfo:this.deviceInfo_}});window.dispatchEvent(e)},t.exports=r},{"./base.js":2,"./cardboard-distorter.js":3,"./cardboard-ui.js":4,"./device-info.js":7,"./dpdb/dpdb.js":11,"./rotate-instructions.js":16,"./sensor-fusion/fusion-pose-sensor.js":18,"./util.js":22,"./viewer-selector.js":23}],6:[function(e,t,n){function r(e,t,n){if(!t)return void n(e);for(var r=[],a=null,i=0;i<t.length;++i){var o=t[i];switch(o){case e.TEXTURE_BINDING_2D:case e.TEXTURE_BINDING_CUBE_MAP:var s=t[++i];if(s<e.TEXTURE0||s>e.TEXTURE31){console.error("TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit"),r.push(null,null);break}a||(a=e.getParameter(e.ACTIVE_TEXTURE)),e.activeTexture(s),r.push(e.getParameter(o),null);break;case e.ACTIVE_TEXTURE:a=e.getParameter(e.ACTIVE_TEXTURE),r.push(null);break;default:r.push(e.getParameter(o))}}n(e);for(var i=0;i<t.length;++i){var o=t[i],u=r[i];switch(o){case e.ACTIVE_TEXTURE:break;case e.ARRAY_BUFFER_BINDING:e.bindBuffer(e.ARRAY_BUFFER,u);break;case e.COLOR_CLEAR_VALUE:e.clearColor(u[0],u[1],u[2],u[3]);break;case e.COLOR_WRITEMASK:e.colorMask(u[0],u[1],u[2],u[3]);break;case e.CURRENT_PROGRAM:e.useProgram(u);break;case e.ELEMENT_ARRAY_BUFFER_BINDING:e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,u);break;case e.FRAMEBUFFER_BINDING:e.bindFramebuffer(e.FRAMEBUFFER,u);break;case e.RENDERBUFFER_BINDING:e.bindRenderbuffer(e.RENDERBUFFER,u);break;case e.TEXTURE_BINDING_2D:var s=t[++i];if(s<e.TEXTURE0||s>e.TEXTURE31)break;e.activeTexture(s),e.bindTexture(e.TEXTURE_2D,u);break;case e.TEXTURE_BINDING_CUBE_MAP:var s=t[++i];if(s<e.TEXTURE0||s>e.TEXTURE31)break;e.activeTexture(s),e.bindTexture(e.TEXTURE_CUBE_MAP,u);break;case e.VIEWPORT:e.viewport(u[0],u[1],u[2],u[3]);break;case e.BLEND:case e.CULL_FACE:case e.DEPTH_TEST:case e.SCISSOR_TEST:case e.STENCIL_TEST:u?e.enable(o):e.disable(o);break;default:console.log("No GL restore behavior for 0x"+o.toString(16))}a&&e.activeTexture(a)}}t.exports=r},{}],7:[function(e,t,n){function r(e){this.width=e.width||u.getScreenWidth(),this.height=e.height||u.getScreenHeight(),this.widthMeters=e.widthMeters,this.heightMeters=e.heightMeters,this.bevelMeters=e.bevelMeters}function a(e){this.viewer=d.CardboardV2,this.updateDeviceParams(e),this.distortion=new o(this.viewer.distortionCoefficients)}function i(e){this.id=e.id,this.label=e.label,this.fov=e.fov,this.interLensDistance=e.interLensDistance,this.baselineLensDistance=e.baselineLensDistance,this.screenLensDistance=e.screenLensDistance,this.distortionCoefficients=e.distortionCoefficients,this.inverseCoefficients=e.inverseCoefficients}var o=e("./distortion/distortion.js"),s=e("./math-util.js"),u=e("./util.js"),c=new r({widthMeters:.11,heightMeters:.062,bevelMeters:.004}),l=new r({widthMeters:.1038,heightMeters:.0584,bevelMeters:.004}),d={CardboardV1:new i({id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]}),CardboardV2:new i({id:"CardboardV2",label:"Cardboard I/O 2015",fov:60,interLensDistance:.064,baselineLensDistance:.035,screenLensDistance:.039,distortionCoefficients:[.34,.55],inverseCoefficients:[-.33836704,-.18162185,.862655,-1.2462051,1.0560602,-.58208317,.21609078,-.05444823,.009177956,-.0009904169,6183535e-11,-16981803e-13]})};a.prototype.updateDeviceParams=function(e){this.device=this.determineDevice_(e)||this.device},a.prototype.getDevice=function(){return this.device},a.prototype.setViewer=function(e){this.viewer=e,this.distortion=new o(this.viewer.distortionCoefficients)},a.prototype.determineDevice_=function(e){if(!e)return u.isIOS()?(console.warn("Using fallback iOS device measurements."),l):(console.warn("Using fallback Android device measurements."),c);var t=.0254,n=t/e.xdpi,a=t/e.ydpi,i=u.getScreenWidth(),o=u.getScreenHeight();return new r({widthMeters:n*i,heightMeters:a*o,bevelMeters:.001*e.bevelMm})},a.prototype.getDistortedFieldOfViewLeftEye=function(){var e=this.viewer,t=this.device,n=this.distortion,r=e.screenLensDistance,a=(t.widthMeters-e.interLensDistance)/2,i=e.interLensDistance/2,o=e.baselineLensDistance-t.bevelMeters,u=t.heightMeters-o,c=s.radToDeg*Math.atan(n.distort(a/r)),l=s.radToDeg*Math.atan(n.distort(i/r)),d=s.radToDeg*Math.atan(n.distort(o/r)),M=s.radToDeg*Math.atan(n.distort(u/r));return{leftDegrees:Math.min(c,e.fov),rightDegrees:Math.min(l,e.fov),downDegrees:Math.min(d,e.fov),upDegrees:Math.min(M,e.fov)}},a.prototype.getLeftEyeVisibleTanAngles=function(){var e=this.viewer,t=this.device,n=this.distortion,r=Math.tan(-s.degToRad*e.fov),a=Math.tan(s.degToRad*e.fov),i=Math.tan(s.degToRad*e.fov),o=Math.tan(-s.degToRad*e.fov),u=t.widthMeters/4,c=t.heightMeters/2,l=e.baselineLensDistance-t.bevelMeters-c,d=e.interLensDistance/2-u,M=-l,g=e.screenLensDistance,p=n.distort((d-u)/g),A=n.distort((M+c)/g),m=n.distort((d+u)/g),f=n.distort((M-c)/g),D=new Float32Array(4);return D[0]=Math.max(r,p),D[1]=Math.min(a,A),D[2]=Math.min(i,m),D[3]=Math.max(o,f),D},a.prototype.getLeftEyeNoLensTanAngles=function(){var e=this.viewer,t=this.device,n=this.distortion,r=new Float32Array(4),a=n.distortInverse(Math.tan(-s.degToRad*e.fov)),i=n.distortInverse(Math.tan(s.degToRad*e.fov)),o=n.distortInverse(Math.tan(s.degToRad*e.fov)),u=n.distortInverse(Math.tan(-s.degToRad*e.fov)),c=t.widthMeters/4,l=t.heightMeters/2,d=e.baselineLensDistance-t.bevelMeters-l,M=e.interLensDistance/2-c,g=-d,p=e.screenLensDistance,A=(M-c)/p,m=(g+l)/p,f=(M+c)/p,D=(g-l)/p;return r[0]=Math.max(a,A),r[1]=Math.min(i,m),r[2]=Math.min(o,f),r[3]=Math.max(u,D),r},a.prototype.getLeftEyeVisibleScreenRect=function(e){var t=this.viewer,n=this.device,r=t.screenLensDistance,a=(n.widthMeters-t.interLensDistance)/2,i=t.baselineLensDistance-n.bevelMeters,o=(e[0]*r+a)/n.widthMeters,s=(e[1]*r+i)/n.heightMeters,u=(e[2]*r+a)/n.widthMeters,c=(e[3]*r+i)/n.heightMeters;return{x:o,y:c,width:u-o,height:s-c}},a.prototype.getFieldOfViewLeftEye=function(e){return e?this.getUndistortedFieldOfViewLeftEye():this.getDistortedFieldOfViewLeftEye()},a.prototype.getFieldOfViewRightEye=function(e){var t=this.getFieldOfViewLeftEye(e);return{leftDegrees:t.rightDegrees,rightDegrees:t.leftDegrees,upDegrees:t.upDegrees,downDegrees:t.downDegrees}},a.prototype.getUndistortedFieldOfViewLeftEye=function(){var e=this.getUndistortedParams_();return{leftDegrees:s.radToDeg*Math.atan(e.outerDist),rightDegrees:s.radToDeg*Math.atan(e.innerDist),downDegrees:s.radToDeg*Math.atan(e.bottomDist),upDegrees:s.radToDeg*Math.atan(e.topDist)}},a.prototype.getUndistortedViewportLeftEye=function(){var e=this.getUndistortedParams_(),t=this.viewer,n=this.device,r=t.screenLensDistance,a=n.widthMeters/r,i=n.heightMeters/r,o=n.width/a,s=n.height/i,u=Math.round((e.eyePosX-e.outerDist)*o),c=Math.round((e.eyePosY-e.bottomDist)*s);return{x:u,y:c,width:Math.round((e.eyePosX+e.innerDist)*o)-u,height:Math.round((e.eyePosY+e.topDist)*s)-c}},a.prototype.getUndistortedParams_=function(){var e=this.viewer,t=this.device,n=this.distortion,r=e.screenLensDistance,a=e.interLensDistance/2/r,i=t.widthMeters/r,o=t.heightMeters/r,u=i/2-a,c=(e.baselineLensDistance-t.bevelMeters)/r,l=e.fov,d=n.distortInverse(Math.tan(s.degToRad*l)),M=Math.min(u,d),g=Math.min(a,d),p=Math.min(c,d),A=Math.min(o-c,d);return{outerDist:M,innerDist:g,topDist:A,bottomDist:p,eyePosX:u,eyePosY:c}},a.Viewers=d,t.exports=a},{"./distortion/distortion.js":9,"./math-util.js":14,"./util.js":22}],8:[function(e,t,n){function r(e){this.display=e,this.hardwareUnitId=e.displayId,this.deviceId="webvr-polyfill:HMD:"+e.displayId,this.deviceName=e.displayName+" (HMD)"}function a(e){this.display=e,this.hardwareUnitId=e.displayId,this.deviceId="webvr-polyfill:PositionSensor: "+e.displayId,this.deviceName=e.displayName+" (PositionSensor)"}var i=(e("./base.js").VRDisplay,e("./base.js").HMDVRDevice),o=e("./base.js").PositionSensorVRDevice;r.prototype=new i,r.prototype.getEyeParameters=function(e){var t=this.display.getEyeParameters(e);return{currentFieldOfView:t.fieldOfView,maximumFieldOfView:t.fieldOfView,minimumFieldOfView:t.fieldOfView,recommendedFieldOfView:t.fieldOfView,eyeTranslation:{x:t.offset[0],y:t.offset[1],z:t.offset[2]},renderRect:{x:"right"==e?t.renderWidth:0,y:0,width:t.renderWidth,height:t.renderHeight}}},r.prototype.setFieldOfView=function(e,t,n,r){},a.prototype=new o,a.prototype.getState=function(){var e=this.display.getPose();return{position:e.position?{x:e.position[0],y:e.position[1],z:e.position[2]}:null,orientation:e.orientation?{x:e.orientation[0],y:e.orientation[1],z:e.orientation[2],w:e.orientation[3]}:null,linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},a.prototype.resetState=function(){return this.positionDevice.resetPose()},t.exports.VRDisplayHMDDevice=r,t.exports.VRDisplayPositionSensorDevice=a},{"./base.js":2}],9:[function(e,t,n){function r(e){this.coefficients=e}r.prototype.distortInverse=function(e){for(var t=0,n=1,r=e-this.distort(t);Math.abs(n-t)>1e-4;){var a=e-this.distort(n),i=n-a*((n-t)/(a-r));t=n,n=i,r=a}return n},r.prototype.distort=function(e){for(var t=e*e,n=0,r=0;r<this.coefficients.length;r++)n=t*(n+this.coefficients[r]);return(n+1)*e},r.prototype.solveLinear_=function(e,t){for(var n=e.length,r=0;r<n-1;++r)for(var a=r+1;a<n;++a){for(var i=e[r][a]/e[r][r],o=r+1;o<n;++o)e[o][a]-=i*e[o][r];t[a]-=i*t[r]}for(var s=new Array(n),r=n-1;r>=0;--r){for(var u=t[r],o=r+1;o<n;++o)u-=e[o][r]*s[o];s[r]=u/e[r][r]}return s},r.prototype.solveLeastSquares_=function(e,t){var n,r,a,i,o=e.length,s=e[0].length;if(o!=t.Length)throw new Error("Matrix / vector dimension mismatch");var u=new Array(s);for(a=0;a<s;++a)for(u[a]=new Array(s),r=0;r<s;++r){for(i=0,n=0;n<o;++n)i+=e[r][n]*e[a][n];u[a][r]=i}var c=new Array(s);for(r=0;r<s;++r){for(i=0,n=0;n<o;++n)i+=e[r][n]*t[n];c[r]=i}return this.solveLinear_(u,c)},r.prototype.approximateInverse=function(e,t){e=e||1,t=t||100;var n,a,i=6,o=new Array(i);for(a=0;a<i;++a)o[a]=new Array(t);var s=new Array(t);for(n=0;n<t;++n){var u=e*(n+1)/t,c=this.distort(u),l=c;for(a=0;a<i;++a)l*=c*c,o[a][n]=l;s[n]=u-c}var d=this.solveLeastSquares_(o,s);return new r(d)},t.exports=r},{}],10:[function(e,t,n){var r={format:1,last_updated:"2016-01-20T00:18:35Z",devices:[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 "}],dpi:[442.4,444.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 "}],dpi:[494.3,489.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1e3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1e3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1e3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1e3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1e3}]};t.exports=r},{}],11:[function(e,t,n){function r(e,t){if(this.dpdb=i,this.recalculateDeviceParams_(),e){this.onDeviceParamsUpdated=t,console.log("Fetching DPDB...");var n=new XMLHttpRequest,r=this;n.open("GET",s,!0),n.addEventListener("load",function(){r.loading=!1,n.status>=200&&n.status<=299?(console.log("Successfully loaded online DPDB."),r.dpdb=JSON.parse(n.response),r.recalculateDeviceParams_()):console.error("Error loading online DPDB!")}),n.send()}}function a(e){this.xdpi=e.xdpi,this.ydpi=e.ydpi,this.bevelMm=e.bevelMm}var i=e("./dpdb-cache.js"),o=e("../util.js"),s="https://storage.googleapis.com/cardboard-dpdb/dpdb.json";r.prototype.getDeviceParams=function(){return this.deviceParams},r.prototype.recalculateDeviceParams_=function(){console.log("Recalculating device params.");var e=this.calcDeviceParams_();console.log("New device parameters:"),console.log(e),e?(this.deviceParams=e,this.onDeviceParamsUpdated&&this.onDeviceParamsUpdated(this.deviceParams)):console.error("Failed to recalculate device parameters.")},r.prototype.calcDeviceParams_=function(){var e=this.dpdb;if(!e)return console.error("DPDB not available."),null;if(1!=e.format)return console.error("DPDB has unexpected format version."),null;if(!e.devices||!e.devices.length)return console.error("DPDB does not have a devices section."),null;var t=navigator.userAgent||navigator.vendor||window.opera,n=o.getScreenWidth(),r=o.getScreenHeight();if(console.log("User agent: "+t),console.log("Pixel width: "+n),console.log("Pixel height: "+r),!e.devices)return console.error("DPDB has no devices section."),null;for(var i=0;i<e.devices.length;i++){var s=e.devices[i];if(s.rules)if("ios"==s.type||"android"==s.type){if(o.isIOS()==("ios"==s.type)){for(var u=!1,c=0;c<s.rules.length;c++){var l=s.rules[c];if(this.matchRule_(l,t,n,r)){console.log("Rule matched:"),console.log(l),u=!0;break}}if(u){var d=s.dpi[0]||s.dpi,M=s.dpi[1]||s.dpi;return new a({xdpi:d,ydpi:M,bevelMm:s.bw})}}}else console.warn("Device["+i+"] has invalid type.");else console.warn("Device["+i+"] has no rules section.")}return console.warn("No DPDB device match."),null},r.prototype.matchRule_=function(e,t,n,r){if(!e.ua&&!e.res)return!1;if(e.ua&&t.indexOf(e.ua)<0)return!1;if(e.res){if(!e.res[0]||!e.res[1])return!1;var a=e.res[0],i=e.res[1];if(Math.min(n,r)!=Math.min(a,i)||Math.max(n,r)!=Math.max(a,i))return!1}return!0},t.exports=r},{"../util.js":22,"./dpdb-cache.js":10}],12:[function(e,t,n){function r(){this.callbacks={}}r.prototype.emit=function(e){var t=this.callbacks[e];if(t){var n=[].slice.call(arguments);n.shift();for(var r=0;r<t.length;r++)t[r].apply(this,n)}},r.prototype.on=function(e,t){e in this.callbacks?this.callbacks[e].push(t):this.callbacks[e]=[t]},t.exports=r},{}],13:[function(e,t,n){var r=e("./util.js"),a=e("./webvr-polyfill.js");window.WebVRConfig=r.extend({FORCE_ENABLE_VR:!1,K_FILTER:.98,PREDICTION_TIME_S:.04,TOUCH_PANNER_DISABLED:!1,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,MOUSE_KEYBOARD_CONTROLS_DISABLED:!1,DEFER_INITIALIZATION:!1,ENABLE_DEPRECATED_API:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1},window.WebVRConfig),window.WebVRConfig.DEFER_INITIALIZATION?window.InitializeWebVRPolyfill=function(){new a}:new a},{"./util.js":22,"./webvr-polyfill.js":25}],14:[function(e,t,n){var r=window.MathUtil||{};r.degToRad=Math.PI/180,r.radToDeg=180/Math.PI,r.Vector2=function(e,t){this.x=e||0,this.y=t||0},r.Vector2.prototype={constructor:r.Vector2,set:function(e,t){return this.x=e,this.y=t,this},copy:function(e){return this.x=e.x,this.y=e.y,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},r.Vector3=function(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0},r.Vector3.prototype={constructor:r.Vector3,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var e=this.length();if(0!==e){var t=1/e;this.multiplyScalar(t)}else this.x=0,this.y=0,this.z=0;return this},multiplyScalar:function(e){this.x*=e,this.y*=e,this.z*=e},applyQuaternion:function(e){var t=this.x,n=this.y,r=this.z,a=e.x,i=e.y,o=e.z,s=e.w,u=s*t+i*r-o*n,c=s*n+o*t-a*r,l=s*r+a*n-i*t,d=-a*t-i*n-o*r;return this.x=u*s+d*-a+c*-o-l*-i,this.y=c*s+d*-i+l*-a-u*-o,this.z=l*s+d*-o+u*-i-c*-a,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},crossVectors:function(e,t){var n=e.x,r=e.y,a=e.z,i=t.x,o=t.y,s=t.z;return this.x=r*s-a*o,this.y=a*i-n*s,this.z=n*o-r*i,this}},r.Quaternion=function(e,t,n,r){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==r?r:1},r.Quaternion.prototype={constructor:r.Quaternion,set:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this},setFromEulerXYZ:function(e,t,n){var r=Math.cos(e/2),a=Math.cos(t/2),i=Math.cos(n/2),o=Math.sin(e/2),s=Math.sin(t/2),u=Math.sin(n/2);return this.x=o*a*i+r*s*u,this.y=r*s*i-o*a*u,this.z=r*a*u+o*s*i,this.w=r*a*i-o*s*u,this},setFromEulerYXZ:function(e,t,n){var r=Math.cos(e/2),a=Math.cos(t/2),i=Math.cos(n/2),o=Math.sin(e/2),s=Math.sin(t/2),u=Math.sin(n/2);
return this.x=o*a*i+r*s*u,this.y=r*s*i-o*a*u,this.z=r*a*u-o*s*i,this.w=r*a*i+o*s*u,this},setFromAxisAngle:function(e,t){var n=t/2,r=Math.sin(n);return this.x=e.x*r,this.y=e.y*r,this.z=e.z*r,this.w=Math.cos(n),this},multiply:function(e){return this.multiplyQuaternions(this,e)},multiplyQuaternions:function(e,t){var n=e.x,r=e.y,a=e.z,i=e.w,o=t.x,s=t.y,u=t.z,c=t.w;return this.x=n*c+i*o+r*u-a*s,this.y=r*c+i*s+a*o-n*u,this.z=a*c+i*u+n*s-r*o,this.w=i*c-n*o-r*s-a*u,this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.normalize(),this},normalize:function(){var e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===e?(this.x=0,this.y=0,this.z=0,this.w=1):(e=1/e,this.x=this.x*e,this.y=this.y*e,this.z=this.z*e,this.w=this.w*e),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this.x,r=this.y,a=this.z,i=this.w,o=i*e.w+n*e.x+r*e.y+a*e.z;if(o<0?(this.w=-e.w,this.x=-e.x,this.y=-e.y,this.z=-e.z,o=-o):this.copy(e),o>=1)return this.w=i,this.x=n,this.y=r,this.z=a,this;var s=Math.acos(o),u=Math.sqrt(1-o*o);if(Math.abs(u)<.001)return this.w=.5*(i+this.w),this.x=.5*(n+this.x),this.y=.5*(r+this.y),this.z=.5*(a+this.z),this;var c=Math.sin((1-t)*s)/u,l=Math.sin(t*s)/u;return this.w=i*c+this.w*l,this.x=n*c+this.x*l,this.y=r*c+this.y*l,this.z=a*c+this.z*l,this},setFromUnitVectors:function(){var e,t,n=1e-6;return function(a,i){return void 0===e&&(e=new r.Vector3),t=a.dot(i)+1,t<n?(t=0,Math.abs(a.x)>Math.abs(a.z)?e.set(-a.y,a.x,0):e.set(0,-a.z,a.y)):e.crossVectors(a,i),this.x=e.x,this.y=e.y,this.z=e.z,this.w=t,this.normalize(),this}}()},t.exports=r},{}],15:[function(e,t,n){function r(){this.displayName="Mouse and Keyboard VRDisplay (webvr-polyfill)",this.capabilities.hasOrientation=!0,window.addEventListener("keydown",this.onKeyDown_.bind(this)),window.addEventListener("mousemove",this.onMouseMove_.bind(this)),window.addEventListener("mousedown",this.onMouseDown_.bind(this)),window.addEventListener("mouseup",this.onMouseUp_.bind(this)),this.phi_=0,this.theta_=0,this.targetAngle_=null,this.angleAnimation_=null,this.orientation_=new i.Quaternion,this.rotateStart_=new i.Vector2,this.rotateEnd_=new i.Vector2,this.rotateDelta_=new i.Vector2,this.isDragging_=!1,this.orientationOut_=new Float32Array(4)}var a=e("./base.js").VRDisplay,i=e("./math-util.js"),o=e("./util.js"),s=.15,u=80,c=.5,l=.3;r.prototype=new a,r.prototype.getImmediatePose=function(){return this.orientation_.setFromEulerYXZ(this.phi_,this.theta_,0),this.orientationOut_[0]=this.orientation_.x,this.orientationOut_[1]=this.orientation_.y,this.orientationOut_[2]=this.orientation_.z,this.orientationOut_[3]=this.orientation_.w,{position:null,orientation:this.orientationOut_,linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},r.prototype.onKeyDown_=function(e){38==e.keyCode?this.animatePhi_(this.phi_+s):39==e.keyCode?this.animateTheta_(this.theta_-s):40==e.keyCode?this.animatePhi_(this.phi_-s):37==e.keyCode&&this.animateTheta_(this.theta_+s)},r.prototype.animateTheta_=function(e){this.animateKeyTransitions_("theta_",e)},r.prototype.animatePhi_=function(e){e=o.clamp(e,-Math.PI/2,Math.PI/2),this.animateKeyTransitions_("phi_",e)},r.prototype.animateKeyTransitions_=function(e,t){this.angleAnimation_&&cancelAnimationFrame(this.angleAnimation_);var n=this[e],r=new Date;this.angleAnimation_=requestAnimationFrame(function a(){var i=new Date-r;if(i>=u)return this[e]=t,void cancelAnimationFrame(this.angleAnimation_);this.angleAnimation_=requestAnimationFrame(a.bind(this));var o=i/u;this[e]=n+(t-n)*o}.bind(this))},r.prototype.onMouseDown_=function(e){this.rotateStart_.set(e.clientX,e.clientY),this.isDragging_=!0},r.prototype.onMouseMove_=function(e){if(this.isDragging_||this.isPointerLocked_()){if(this.isPointerLocked_()){var t=e.movementX||e.mozMovementX||0,n=e.movementY||e.mozMovementY||0;this.rotateEnd_.set(this.rotateStart_.x-t,this.rotateStart_.y-n)}else this.rotateEnd_.set(e.clientX,e.clientY);this.rotateDelta_.subVectors(this.rotateEnd_,this.rotateStart_),this.rotateStart_.copy(this.rotateEnd_),this.phi_+=2*Math.PI*this.rotateDelta_.y/screen.height*l,this.theta_+=2*Math.PI*this.rotateDelta_.x/screen.width*c,this.phi_=o.clamp(this.phi_,-Math.PI/2,Math.PI/2)}},r.prototype.onMouseUp_=function(e){this.isDragging_=!1},r.prototype.isPointerLocked_=function(){var e=document.pointerLockElement||document.mozPointerLockElement||document.webkitPointerLockElement;return void 0!==e},r.prototype.resetPose=function(){this.phi_=0,this.theta_=0},t.exports=r},{"./base.js":2,"./math-util.js":14,"./util.js":22}],16:[function(e,t,n){function r(){this.loadIcon_();var e=document.createElement("div"),t=e.style;t.position="fixed",t.top=0,t.right=0,t.bottom=0,t.left=0,t.backgroundColor="gray",t.fontFamily="sans-serif",t.zIndex=1e6;var n=document.createElement("img");n.src=this.icon;var t=n.style;t.marginLeft="25%",t.marginTop="25%",t.width="50%",e.appendChild(n);var r=document.createElement("div"),t=r.style;t.textAlign="center",t.fontSize="16px",t.lineHeight="24px",t.margin="24px 25%",t.width="50%",r.innerHTML="Place your phone into your Cardboard viewer.",e.appendChild(r);var a=document.createElement("div"),t=a.style;t.backgroundColor="#CFD8DC",t.position="fixed",t.bottom=0,t.width="100%",t.height="48px",t.padding="14px 24px",t.boxSizing="border-box",t.color="#656A6B",e.appendChild(a);var i=document.createElement("div");i.style["float"]="left",i.innerHTML="No Cardboard viewer?";var o=document.createElement("a");o.href="https://www.google.com/get/cardboard/get-cardboard/",o.innerHTML="get one",o.target="_blank";var t=o.style;t["float"]="right",t.fontWeight=600,t.textTransform="uppercase",t.borderLeft="1px solid gray",t.paddingLeft="24px",t.textDecoration="none",t.color="#656A6B",a.appendChild(i),a.appendChild(o),this.overlay=e,this.text=r,this.hide()}var a=e("./util.js");r.prototype.show=function(e){e||this.overlay.parentElement?e&&(this.overlay.parentElement&&this.overlay.parentElement!=e&&this.overlay.parentElement.removeChild(this.overlay),e.appendChild(this.overlay)):document.body.appendChild(this.overlay),this.overlay.style.display="block";var t=this.overlay.querySelector("img"),n=t.style;a.isLandscapeMode()?(n.width="20%",n.marginLeft="40%",n.marginTop="3%"):(n.width="50%",n.marginLeft="25%",n.marginTop="25%")},r.prototype.hide=function(){this.overlay.style.display="none"},r.prototype.showTemporarily=function(e,t){this.show(t),this.timer=setTimeout(this.hide.bind(this),e)},r.prototype.disableShowTemporarily=function(){clearTimeout(this.timer)},r.prototype.update=function(){this.disableShowTemporarily(),!a.isLandscapeMode()&&a.isMobile()?this.show():this.hide()},r.prototype.loadIcon_=function(){this.icon=a.base64("image/svg+xml","PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjE5OHB4IiBoZWlnaHQ9IjI0MHB4IiB2aWV3Qm94PSIwIDAgMTk4IDI0MCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWxuczpza2V0Y2g9Imh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaC9ucyI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDMuMy4zICgxMjA4MSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+dHJhbnNpdGlvbjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHNrZXRjaDp0eXBlPSJNU1BhZ2UiPgogICAgICAgIDxnIGlkPSJ0cmFuc2l0aW9uIiBza2V0Y2g6dHlwZT0iTVNBcnRib2FyZEdyb3VwIj4KICAgICAgICAgICAgPGcgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTQtKy1JbXBvcnRlZC1MYXllcnMtQ29weS0rLUltcG9ydGVkLUxheWVycy1Db3B5LTItQ29weSIgc2tldGNoOnR5cGU9Ik1TTGF5ZXJHcm91cCI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHktNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDEwNy4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjYyNSwyLjUyNyBDMTQ5LjYyNSwyLjUyNyAxNTUuODA1LDYuMDk2IDE1Ni4zNjIsNi40MTggTDE1Ni4zNjIsNy4zMDQgQzE1Ni4zNjIsNy40ODEgMTU2LjM3NSw3LjY2NCAxNTYuNCw3Ljg1MyBDMTU2LjQxLDcuOTM0IDE1Ni40Miw4LjAxNSAxNTYuNDI3LDguMDk1IEMxNTYuNTY3LDkuNTEgMTU3LjQwMSwxMS4wOTMgMTU4LjUzMiwxMi4wOTQgTDE2NC4yNTIsMTcuMTU2IEwxNjQuMzMzLDE3LjA2NiBDMTY0LjMzMywxNy4wNjYgMTY4LjcxNSwxNC41MzYgMTY5LjU2OCwxNC4wNDIgQzE3MS4wMjUsMTQuODgzIDE5NS41MzgsMjkuMDM1IDE5NS41MzgsMjkuMDM1IEwxOTUuNTM4LDgzLjAzNiBDMTk1LjUzOCw4My44MDcgMTk1LjE1Miw4NC4yNTMgMTk0LjU5LDg0LjI1MyBDMTk0LjM1Nyw4NC4yNTMgMTk0LjA5NSw4NC4xNzcgMTkzLjgxOCw4NC4wMTcgTDE2OS44NTEsNzAuMTc5IEwxNjkuODM3LDcwLjIwMyBMMTQyLjUxNSw4NS45NzggTDE0MS42NjUsODQuNjU1IEMxMzYuOTM0LDgzLjEyNiAxMzEuOTE3LDgxLjkxNSAxMjYuNzE0LDgxLjA0NSBDMTI2LjcwOSw4MS4wNiAxMjYuNzA3LDgxLjA2OSAxMjYuNzA3LDgxLjA2OSBMMTIxLjY0LDk4LjAzIEwxMTMuNzQ5LDEwMi41ODYgTDExMy43MTIsMTAyLjUyMyBMMTEzLjcxMiwxMzAuMTEzIEMxMTMuNzEyLDEzMC44ODUgMTEzLjMyNiwxMzEuMzMgMTEyLjc2NCwxMzEuMzMgQzExMi41MzIsMTMxLjMzIDExMi4yNjksMTMxLjI1NCAxMTEuOTkyLDEzMS4wOTQgTDY5LjUxOSwxMDYuNTcyIEM2OC41NjksMTA2LjAyMyA2Ny43OTksMTA0LjY5NSA2Ny43OTksMTAzLjYwNSBMNjcuNzk5LDEwMi41NyBMNjcuNzc4LDEwMi42MTcgQzY3LjI3LDEwMi4zOTMgNjYuNjQ4LDEwMi4yNDkgNjUuOTYyLDEwMi4yMTggQzY1Ljg3NSwxMDIuMjE0IDY1Ljc4OCwxMDIuMjEyIDY1LjcwMSwxMDIuMjEyIEM2NS42MDYsMTAyLjIxMiA2NS41MTEsMTAyLjIxNSA2NS40MTYsMTAyLjIxOSBDNjUuMTk1LDEwMi4yMjkgNjQuOTc0LDEwMi4yMzUgNjQuNzU0LDEwMi4yMzUgQzY0LjMzMSwxMDIuMjM1IDYzLjkxMSwxMDIuMjE2IDYzLjQ5OCwxMDIuMTc4IEM2MS44NDMsMTAyLjAyNSA2MC4yOTgsMTAxLjU3OCA1OS4wOTQsMTAwLjg4MiBMMTIuNTE4LDczLjk5MiBMMTIuNTIzLDc0LjAwNCBMMi4yNDUsNTUuMjU0IEMxLjI0NCw1My40MjcgMi4wMDQsNTEuMDM4IDMuOTQzLDQ5LjkxOCBMNTkuOTU0LDE3LjU3MyBDNjAuNjI2LDE3LjE4NSA2MS4zNSwxNy4wMDEgNjIuMDUzLDE3LjAwMSBDNjMuMzc5LDE3LjAwMSA2NC42MjUsMTcuNjYgNjUuMjgsMTguODU0IEw2NS4yODUsMTguODUxIEw2NS41MTIsMTkuMjY0IEw2NS41MDYsMTkuMjY4IEM2NS45MDksMjAuMDAzIDY2LjQwNSwyMC42OCA2Ni45ODMsMjEuMjg2IEw2Ny4yNiwyMS41NTYgQzY5LjE3NCwyMy40MDYgNzEuNzI4LDI0LjM1NyA3NC4zNzMsMjQuMzU3IEM3Ni4zMjIsMjQuMzU3IDc4LjMyMSwyMy44NCA4MC4xNDgsMjIuNzg1IEM4MC4xNjEsMjIuNzg1IDg3LjQ2NywxOC41NjYgODcuNDY3LDE4LjU2NiBDODguMTM5LDE4LjE3OCA4OC44NjMsMTcuOTk0IDg5LjU2NiwxNy45OTQgQzkwLjg5MiwxNy45OTQgOTIuMTM4LDE4LjY1MiA5Mi43OTIsMTkuODQ3IEw5Ni4wNDIsMjUuNzc1IEw5Ni4wNjQsMjUuNzU3IEwxMDIuODQ5LDI5LjY3NCBMMTAyLjc0NCwyOS40OTIgTDE0OS42MjUsMi41MjcgTTE0OS42MjUsMC44OTIgQzE0OS4zNDMsMC44OTIgMTQ5LjA2MiwwLjk2NSAxNDguODEsMS4xMSBMMTAyLjY0MSwyNy42NjYgTDk3LjIzMSwyNC41NDIgTDk0LjIyNiwxOS4wNjEgQzkzLjMxMywxNy4zOTQgOTEuNTI3LDE2LjM1OSA4OS41NjYsMTYuMzU4IEM4OC41NTUsMTYuMzU4IDg3LjU0NiwxNi42MzIgODYuNjQ5LDE3LjE1IEM4My44NzgsMTguNzUgNzkuNjg3LDIxLjE2OSA3OS4zNzQsMjEuMzQ1IEM3OS4zNTksMjEuMzUzIDc5LjM0NSwyMS4zNjEgNzkuMzMsMjEuMzY5IEM3Ny43OTgsMjIuMjU0IDc2LjA4NCwyMi43MjIgNzQuMzczLDIyLjcyMiBDNzIuMDgxLDIyLjcyMiA2OS45NTksMjEuODkgNjguMzk3LDIwLjM4IEw2OC4xNDUsMjAuMTM1IEM2Ny43MDYsMTkuNjcyIDY3LjMyMywxOS4xNTYgNjcuMDA2LDE4LjYwMSBDNjYuOTg4LDE4LjU1OSA2Ni45NjgsMTguNTE5IDY2Ljk0NiwxOC40NzkgTDY2LjcxOSwxOC4wNjUgQzY2LjY5LDE4LjAxMiA2Ni42NTgsMTcuOTYgNjYuNjI0LDE3LjkxMSBDNjUuNjg2LDE2LjMzNyA2My45NTEsMTUuMzY2IDYyLjA1MywxNS4zNjYgQzYxLjA0MiwxNS4zNjYgNjAuMDMzLDE1LjY0IDU5LjEzNiwxNi4xNTggTDMuMTI1LDQ4LjUwMiBDMC40MjYsNTAuMDYxIC0wLjYxMyw1My40NDIgMC44MTEsNTYuMDQgTDExLjA4OSw3NC43OSBDMTEuMjY2LDc1LjExMyAxMS41MzcsNzUuMzUzIDExLjg1LDc1LjQ5NCBMNTguMjc2LDEwMi4yOTggQzU5LjY3OSwxMDMuMTA4IDYxLjQzMywxMDMuNjMgNjMuMzQ4LDEwMy44MDYgQzYzLjgxMiwxMDMuODQ4IDY0LjI4NSwxMDMuODcgNjQuNzU0LDEwMy44NyBDNjUsMTAzLjg3IDY1LjI0OSwxMDMuODY0IDY1LjQ5NCwxMDMuODUyIEM2NS41NjMsMTAzLjg0OSA2NS42MzIsMTAzLjg0NyA2NS43MDEsMTAzLjg0NyBDNjUuNzY0LDEwMy44NDcgNjUuODI4LDEwMy44NDkgNjUuODksMTAzLjg1MiBDNjUuOTg2LDEwMy44NTYgNjYuMDgsMTAzLjg2MyA2Ni4xNzMsMTAzLjg3NCBDNjYuMjgyLDEwNS40NjcgNjcuMzMyLDEwNy4xOTcgNjguNzAyLDEwNy45ODggTDExMS4xNzQsMTMyLjUxIEMxMTEuNjk4LDEzMi44MTIgMTEyLjIzMiwxMzIuOTY1IDExMi43NjQsMTMyLjk2NSBDMTE0LjI2MSwxMzIuOTY1IDExNS4zNDcsMTMxLjc2NSAxMTUuMzQ3LDEzMC4xMTMgTDExNS4zNDcsMTAzLjU1MSBMMTIyLjQ1OCw5OS40NDYgQzEyMi44MTksOTkuMjM3IDEyMy4wODcsOTguODk4IDEyMy4yMDcsOTguNDk4IEwxMjcuODY1LDgyLjkwNSBDMTMyLjI3OSw4My43MDIgMTM2LjU1Nyw4NC43NTMgMTQwLjYwNyw4Ni4wMzMgTDE0MS4xNCw4Ni44NjIgQzE0MS40NTEsODcuMzQ2IDE0MS45NzcsODcuNjEzIDE0Mi41MTYsODcuNjEzIEMxNDIuNzk0LDg3LjYxMyAxNDMuMDc2LDg3LjU0MiAxNDMuMzMzLDg3LjM5MyBMMTY5Ljg2NSw3Mi4wNzYgTDE5Myw4NS40MzMgQzE5My41MjMsODUuNzM1IDE5NC4wNTgsODUuODg4IDE5NC41OSw4NS44ODggQzE5Ni4wODcsODUuODg4IDE5Ny4xNzMsODQuNjg5IDE5Ny4xNzMsODMuMDM2IEwxOTcuMTczLDI5LjAzNSBDMTk3LjE3MywyOC40NTEgMTk2Ljg2MSwyNy45MTEgMTk2LjM1NSwyNy42MTkgQzE5Ni4zNTUsMjcuNjE5IDE3MS44NDMsMTMuNDY3IDE3MC4zODUsMTIuNjI2IEMxNzAuMTMyLDEyLjQ4IDE2OS44NSwxMi40MDcgMTY5LjU2OCwxMi40MDcgQzE2OS4yODUsMTIuNDA3IDE2OS4wMDIsMTIuNDgxIDE2OC43NDksMTIuNjI3IEMxNjguMTQzLDEyLjk3OCAxNjUuNzU2LDE0LjM1NyAxNjQuNDI0LDE1LjEyNSBMMTU5LjYxNSwxMC44NyBDMTU4Ljc5NiwxMC4xNDUgMTU4LjE1NCw4LjkzNyAxNTguMDU0LDcuOTM0IEMxNTguMDQ1LDcuODM3IDE1OC4wMzQsNy43MzkgMTU4LjAyMSw3LjY0IEMxNTguMDA1LDcuNTIzIDE1Ny45OTgsNy40MSAxNTcuOTk4LDcuMzA0IEwxNTcuOTk4LDYuNDE4IEMxNTcuOTk4LDUuODM0IDE1Ny42ODYsNS4yOTUgMTU3LjE4MSw1LjAwMiBDMTU2LjYyNCw0LjY4IDE1MC40NDIsMS4xMTEgMTUwLjQ0MiwxLjExMSBDMTUwLjE4OSwwLjk2NSAxNDkuOTA3LDAuODkyIDE0OS42MjUsMC44OTIiIGlkPSJGaWxsLTEiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTYuMDI3LDI1LjYzNiBMMTQyLjYwMyw1Mi41MjcgQzE0My44MDcsNTMuMjIyIDE0NC41ODIsNTQuMTE0IDE0NC44NDUsNTUuMDY4IEwxNDQuODM1LDU1LjA3NSBMNjMuNDYxLDEwMi4wNTcgTDYzLjQ2LDEwMi4wNTcgQzYxLjgwNiwxMDEuOTA1IDYwLjI2MSwxMDEuNDU3IDU5LjA1NywxMDAuNzYyIEwxMi40ODEsNzMuODcxIEw5Ni4wMjcsMjUuNjM2IiBpZD0iRmlsbC0yIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYzLjQ2MSwxMDIuMTc0IEM2My40NTMsMTAyLjE3NCA2My40NDYsMTAyLjE3NCA2My40MzksMTAyLjE3MiBDNjEuNzQ2LDEwMi4wMTYgNjAuMjExLDEwMS41NjMgNTguOTk4LDEwMC44NjMgTDEyLjQyMiw3My45NzMgQzEyLjM4Niw3My45NTIgMTIuMzY0LDczLjkxNCAxMi4zNjQsNzMuODcxIEMxMi4zNjQsNzMuODMgMTIuMzg2LDczLjc5MSAxMi40MjIsNzMuNzcgTDk1Ljk2OCwyNS41MzUgQzk2LjAwNCwyNS41MTQgOTYuMDQ5LDI1LjUxNCA5Ni4wODUsMjUuNTM1IEwxNDIuNjYxLDUyLjQyNiBDMTQzLjg4OCw1My4xMzQgMTQ0LjY4Miw1NC4wMzggMTQ0Ljk1Nyw1NS4wMzcgQzE0NC45Nyw1NS4wODMgMTQ0Ljk1Myw1NS4xMzMgMTQ0LjkxNSw1NS4xNjEgQzE0NC45MTEsNTUuMTY1IDE0NC44OTgsNTUuMTc0IDE0NC44OTQsNTUuMTc3IEw2My41MTksMTAyLjE1OCBDNjMuNTAxLDEwMi4xNjkgNjMuNDgxLDEwMi4xNzQgNjMuNDYxLDEwMi4xNzQgTDYzLjQ2MSwxMDIuMTc0IFogTTEyLjcxNCw3My44NzEgTDU5LjExNSwxMDAuNjYxIEM2MC4yOTMsMTAxLjM0MSA2MS43ODYsMTAxLjc4MiA2My40MzUsMTAxLjkzNyBMMTQ0LjcwNyw1NS4wMTUgQzE0NC40MjgsNTQuMTA4IDE0My42ODIsNTMuMjg1IDE0Mi41NDQsNTIuNjI4IEw5Ni4wMjcsMjUuNzcxIEwxMi43MTQsNzMuODcxIEwxMi43MTQsNzMuODcxIFoiIGlkPSJGaWxsLTMiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ4LjMyNyw1OC40NzEgQzE0OC4xNDUsNTguNDggMTQ3Ljk2Miw1OC40OCAxNDcuNzgxLDU4LjQ3MiBDMTQ1Ljg4Nyw1OC4zODkgMTQ0LjQ3OSw1Ny40MzQgMTQ0LjYzNiw1Ni4zNCBDMTQ0LjY4OSw1NS45NjcgMTQ0LjY2NCw1NS41OTcgMTQ0LjU2NCw1NS4yMzUgTDYzLjQ2MSwxMDIuMDU3IEM2NC4wODksMTAyLjExNSA2NC43MzMsMTAyLjEzIDY1LjM3OSwxMDIuMDk5IEM2NS41NjEsMTAyLjA5IDY1Ljc0MywxMDIuMDkgNjUuOTI1LDEwMi4wOTggQzY3LjgxOSwxMDIuMTgxIDY5LjIyNywxMDMuMTM2IDY5LjA3LDEwNC4yMyBMMTQ4LjMyNyw1OC40NzEiIGlkPSJGaWxsLTQiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNjkuMDcsMTA0LjM0NyBDNjkuMDQ4LDEwNC4zNDcgNjkuMDI1LDEwNC4zNCA2OS4wMDUsMTA0LjMyNyBDNjguOTY4LDEwNC4zMDEgNjguOTQ4LDEwNC4yNTcgNjguOTU1LDEwNC4yMTMgQzY5LDEwMy44OTYgNjguODk4LDEwMy41NzYgNjguNjU4LDEwMy4yODggQzY4LjE1MywxMDIuNjc4IDY3LjEwMywxMDIuMjY2IDY1LjkyLDEwMi4yMTQgQzY1Ljc0MiwxMDIuMjA2IDY1LjU2MywxMDIuMjA3IDY1LjM4NSwxMDIuMjE1IEM2NC43NDIsMTAyLjI0NiA2NC4wODcsMTAyLjIzMiA2My40NSwxMDIuMTc0IEM2My4zOTksMTAyLjE2OSA2My4zNTgsMTAyLjEzMiA2My4zNDcsMTAyLjA4MiBDNjMuMzM2LDEwMi4wMzMgNjMuMzU4LDEwMS45ODEgNjMuNDAyLDEwMS45NTYgTDE0NC41MDYsNTUuMTM0IEMxNDQuNTM3LDU1LjExNiAxNDQuNTc1LDU1LjExMyAxNDQuNjA5LDU1LjEyNyBDMTQ0LjY0Miw1NS4xNDEgMTQ0LjY2OCw1NS4xNyAxNDQuNjc3LDU1LjIwNCBDMTQ0Ljc4MSw1NS41ODUgMTQ0LjgwNiw1NS45NzIgMTQ0Ljc1MSw1Ni4zNTcgQzE0NC43MDYsNTYuNjczIDE0NC44MDgsNTYuOTk0IDE0NS4wNDcsNTcuMjgyIEMxNDUuNTUzLDU3Ljg5MiAxNDYuNjAyLDU4LjMwMyAxNDcuNzg2LDU4LjM1NSBDMTQ3Ljk2NCw1OC4zNjMgMTQ4LjE0Myw1OC4zNjMgMTQ4LjMyMSw1OC4zNTQgQzE0OC4zNzcsNTguMzUyIDE0OC40MjQsNTguMzg3IDE0OC40MzksNTguNDM4IEMxNDguNDU0LDU4LjQ5IDE0OC40MzIsNTguNTQ1IDE0OC4zODUsNTguNTcyIEw2OS4xMjksMTA0LjMzMSBDNjkuMTExLDEwNC4zNDIgNjkuMDksMTA0LjM0NyA2OS4wNywxMDQuMzQ3IEw2OS4wNywxMDQuMzQ3IFogTTY1LjY2NSwxMDEuOTc1IEM2NS43NTQsMTAxLjk3NSA2NS44NDIsMTAxLjk3NyA2NS45MywxMDEuOTgxIEM2Ny4xOTYsMTAyLjAzNyA2OC4yODMsMTAyLjQ2OSA2OC44MzgsMTAzLjEzOSBDNjkuMDY1LDEwMy40MTMgNjkuMTg4LDEwMy43MTQgNjkuMTk4LDEwNC4wMjEgTDE0Ny44ODMsNTguNTkyIEMxNDcuODQ3LDU4LjU5MiAxNDcuODExLDU4LjU5MSAxNDcuNzc2LDU4LjU4OSBDMTQ2LjUwOSw1OC41MzMgMTQ1LjQyMiw1OC4xIDE0NC44NjcsNTcuNDMxIEMxNDQuNTg1LDU3LjA5MSAxNDQuNDY1LDU2LjcwNyAxNDQuNTIsNTYuMzI0IEMxNDQuNTYzLDU2LjAyMSAxNDQuNTUyLDU1LjcxNiAxNDQuNDg4LDU1LjQxNCBMNjMuODQ2LDEwMS45NyBDNjQuMzUzLDEwMi4wMDIgNjQuODY3LDEwMi4wMDYgNjUuMzc0LDEwMS45ODIgQzY1LjQ3MSwxMDEuOTc3IDY1LjU2OCwxMDEuOTc1IDY1LjY2NSwxMDEuOTc1IEw2NS42NjUsMTAxLjk3NSBaIiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTIuMjA4LDU1LjEzNCBDMS4yMDcsNTMuMzA3IDEuOTY3LDUwLjkxNyAzLjkwNiw0OS43OTcgTDU5LjkxNywxNy40NTMgQzYxLjg1NiwxNi4zMzMgNjQuMjQxLDE2LjkwNyA2NS4yNDMsMTguNzM0IEw2NS40NzUsMTkuMTQ0IEM2NS44NzIsMTkuODgyIDY2LjM2OCwyMC41NiA2Ni45NDUsMjEuMTY1IEw2Ny4yMjMsMjEuNDM1IEM3MC41NDgsMjQuNjQ5IDc1LjgwNiwyNS4xNTEgODAuMTExLDIyLjY2NSBMODcuNDMsMTguNDQ1IEM4OS4zNywxNy4zMjYgOTEuNzU0LDE3Ljg5OSA5Mi43NTUsMTkuNzI3IEw5Ni4wMDUsMjUuNjU1IEwxMi40ODYsNzMuODg0IEwyLjIwOCw1NS4xMzQgWiIgaWQ9IkZpbGwtNiIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMi40ODYsNzQuMDAxIEMxMi40NzYsNzQuMDAxIDEyLjQ2NSw3My45OTkgMTIuNDU1LDczLjk5NiBDMTIuNDI0LDczLjk4OCAxMi4zOTksNzMuOTY3IDEyLjM4NCw3My45NCBMMi4xMDYsNTUuMTkgQzEuMDc1LDUzLjMxIDEuODU3LDUwLjg0NSAzLjg0OCw0OS42OTYgTDU5Ljg1OCwxNy4zNTIgQzYwLjUyNSwxNi45NjcgNjEuMjcxLDE2Ljc2NCA2Mi4wMTYsMTYuNzY0IEM2My40MzEsMTYuNzY0IDY0LjY2NiwxNy40NjYgNjUuMzI3LDE4LjY0NiBDNjUuMzM3LDE4LjY1NCA2NS4zNDUsMTguNjYzIDY1LjM1MSwxOC42NzQgTDY1LjU3OCwxOS4wODggQzY1LjU4NCwxOS4xIDY1LjU4OSwxOS4xMTIgNjUuNTkxLDE5LjEyNiBDNjUuOTg1LDE5LjgzOCA2Ni40NjksMjAuNDk3IDY3LjAzLDIxLjA4NSBMNjcuMzA1LDIxLjM1MSBDNjkuMTUxLDIzLjEzNyA3MS42NDksMjQuMTIgNzQuMzM2LDI0LjEyIEM3Ni4zMTMsMjQuMTIgNzguMjksMjMuNTgyIDgwLjA1MywyMi41NjMgQzgwLjA2NCwyMi41NTcgODAuMDc2LDIyLjU1MyA4MC4wODgsMjIuNTUgTDg3LjM3MiwxOC4zNDQgQzg4LjAzOCwxNy45NTkgODguNzg0LDE3Ljc1NiA4OS41MjksMTcuNzU2IEM5MC45NTYsMTcuNzU2IDkyLjIwMSwxOC40NzIgOTIuODU4LDE5LjY3IEw5Ni4xMDcsMjUuNTk5IEM5Ni4xMzgsMjUuNjU0IDk2LjExOCwyNS43MjQgOTYuMDYzLDI1Ljc1NiBMMTIuNTQ1LDczLjk4NSBDMTIuNTI2LDczLjk5NiAxMi41MDYsNzQuMDAxIDEyLjQ4Niw3NC4wMDEgTDEyLjQ4Niw3NC4wMDEgWiBNNjIuMDE2LDE2Ljk5NyBDNjEuMzEyLDE2Ljk5NyA2MC42MDYsMTcuMTkgNTkuOTc1LDE3LjU1NCBMMy45NjUsNDkuODk5IEMyLjA4Myw1MC45ODUgMS4zNDEsNTMuMzA4IDIuMzEsNTUuMDc4IEwxMi41MzEsNzMuNzIzIEw5NS44NDgsMjUuNjExIEw5Mi42NTMsMTkuNzgyIEM5Mi4wMzgsMTguNjYgOTAuODcsMTcuOTkgODkuNTI5LDE3Ljk5IEM4OC44MjUsMTcuOTkgODguMTE5LDE4LjE4MiA4Ny40ODksMTguNTQ3IEw4MC4xNzIsMjIuNzcyIEM4MC4xNjEsMjIuNzc4IDgwLjE0OSwyMi43ODIgODAuMTM3LDIyLjc4NSBDNzguMzQ2LDIzLjgxMSA3Ni4zNDEsMjQuMzU0IDc0LjMzNiwyNC4zNTQgQzcxLjU4OCwyNC4zNTQgNjkuMDMzLDIzLjM0NyA2Ny4xNDIsMjEuNTE5IEw2Ni44NjQsMjEuMjQ5IEM2Ni4yNzcsMjAuNjM0IDY1Ljc3NCwxOS45NDcgNjUuMzY3LDE5LjIwMyBDNjUuMzYsMTkuMTkyIDY1LjM1NiwxOS4xNzkgNjUuMzU0LDE5LjE2NiBMNjUuMTYzLDE4LjgxOSBDNjUuMTU0LDE4LjgxMSA2NS4xNDYsMTguODAxIDY1LjE0LDE4Ljc5IEM2NC41MjUsMTcuNjY3IDYzLjM1NywxNi45OTcgNjIuMDE2LDE2Ljk5NyBMNjIuMDE2LDE2Ljk5NyBaIiBpZD0iRmlsbC03IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTQyLjQzNCw0OC44MDggTDQyLjQzNCw0OC44MDggQzM5LjkyNCw0OC44MDcgMzcuNzM3LDQ3LjU1IDM2LjU4Miw0NS40NDMgQzM0Ljc3MSw0Mi4xMzkgMzYuMTQ0LDM3LjgwOSAzOS42NDEsMzUuNzg5IEw1MS45MzIsMjguNjkxIEM1My4xMDMsMjguMDE1IDU0LjQxMywyNy42NTggNTUuNzIxLDI3LjY1OCBDNTguMjMxLDI3LjY1OCA2MC40MTgsMjguOTE2IDYxLjU3MywzMS4wMjMgQzYzLjM4NCwzNC4zMjcgNjIuMDEyLDM4LjY1NyA1OC41MTQsNDAuNjc3IEw0Ni4yMjMsNDcuNzc1IEM0NS4wNTMsNDguNDUgNDMuNzQyLDQ4LjgwOCA0Mi40MzQsNDguODA4IEw0Mi40MzQsNDguODA4IFogTTU1LjcyMSwyOC4xMjUgQzU0LjQ5NSwyOC4xMjUgNTMuMjY1LDI4LjQ2MSA1Mi4xNjYsMjkuMDk2IEwzOS44NzUsMzYuMTk0IEMzNi41OTYsMzguMDg3IDM1LjMwMiw0Mi4xMzYgMzYuOTkyLDQ1LjIxOCBDMzguMDYzLDQ3LjE3MyA0MC4wOTgsNDguMzQgNDIuNDM0LDQ4LjM0IEM0My42NjEsNDguMzQgNDQuODksNDguMDA1IDQ1Ljk5LDQ3LjM3IEw1OC4yODEsNDAuMjcyIEM2MS41NiwzOC4zNzkgNjIuODUzLDM0LjMzIDYxLjE2NCwzMS4yNDggQzYwLjA5MiwyOS4yOTMgNTguMDU4LDI4LjEyNSA1NS43MjEsMjguMTI1IEw1NS43MjEsMjguMTI1IFoiIGlkPSJGaWxsLTgiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjU4OCwyLjQwNyBDMTQ5LjU4OCwyLjQwNyAxNTUuNzY4LDUuOTc1IDE1Ni4zMjUsNi4yOTcgTDE1Ni4zMjUsNy4xODQgQzE1Ni4zMjUsNy4zNiAxNTYuMzM4LDcuNTQ0IDE1Ni4zNjIsNy43MzMgQzE1Ni4zNzMsNy44MTQgMTU2LjM4Miw3Ljg5NCAxNTYuMzksNy45NzUgQzE1Ni41Myw5LjM5IDE1Ny4zNjMsMTAuOTczIDE1OC40OTUsMTEuOTc0IEwxNjUuODkxLDE4LjUxOSBDMTY2LjA2OCwxOC42NzUgMTY2LjI0OSwxOC44MTQgMTY2LjQzMiwxOC45MzQgQzE2OC4wMTEsMTkuOTc0IDE2OS4zODIsMTkuNCAxNjkuNDk0LDE3LjY1MiBDMTY5LjU0MywxNi44NjggMTY5LjU1MSwxNi4wNTcgMTY5LjUxNywxNS4yMjMgTDE2OS41MTQsMTUuMDYzIEwxNjkuNTE0LDEzLjkxMiBDMTcwLjc4LDE0LjY0MiAxOTUuNTAxLDI4LjkxNSAxOTUuNTAxLDI4LjkxNSBMMTk1LjUwMSw4Mi45MTUgQzE5NS41MDEsODQuMDA1IDE5NC43MzEsODQuNDQ1IDE5My43ODEsODMuODk3IEwxNTEuMzA4LDU5LjM3NCBDMTUwLjM1OCw1OC44MjYgMTQ5LjU4OCw1Ny40OTcgMTQ5LjU4OCw1Ni40MDggTDE0OS41ODgsMjIuMzc1IiBpZD0iRmlsbC05IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE5NC41NTMsODQuMjUgQzE5NC4yOTYsODQuMjUgMTk0LjAxMyw4NC4xNjUgMTkzLjcyMiw4My45OTcgTDE1MS4yNSw1OS40NzYgQzE1MC4yNjksNTguOTA5IDE0OS40NzEsNTcuNTMzIDE0OS40NzEsNTYuNDA4IEwxNDkuNDcxLDIyLjM3NSBMMTQ5LjcwNSwyMi4zNzUgTDE0OS43MDUsNTYuNDA4IEMxNDkuNzA1LDU3LjQ1OSAxNTAuNDUsNTguNzQ0IDE1MS4zNjYsNTkuMjc0IEwxOTMuODM5LDgzLjc5NSBDMTk0LjI2Myw4NC4wNCAxOTQuNjU1LDg0LjA4MyAxOTQuOTQyLDgzLjkxNyBDMTk1LjIyNyw4My43NTMgMTk1LjM4NCw4My4zOTcgMTk1LjM4NCw4Mi45MTUgTDE5NS4zODQsMjguOTgyIEMxOTQuMTAyLDI4LjI0MiAxNzIuMTA0LDE1LjU0MiAxNjkuNjMxLDE0LjExNCBMMTY5LjYzNCwxNS4yMiBDMTY5LjY2OCwxNi4wNTIgMTY5LjY2LDE2Ljg3NCAxNjkuNjEsMTcuNjU5IEMxNjkuNTU2LDE4LjUwMyAxNjkuMjE0LDE5LjEyMyAxNjguNjQ3LDE5LjQwNSBDMTY4LjAyOCwxOS43MTQgMTY3LjE5NywxOS41NzggMTY2LjM2NywxOS4wMzIgQzE2Ni4xODEsMTguOTA5IDE2NS45OTUsMTguNzY2IDE2NS44MTQsMTguNjA2IEwxNTguNDE3LDEyLjA2MiBDMTU3LjI1OSwxMS4wMzYgMTU2LjQxOCw5LjQzNyAxNTYuMjc0LDcuOTg2IEMxNTYuMjY2LDcuOTA3IDE1Ni4yNTcsNy44MjcgMTU2LjI0Nyw3Ljc0OCBDMTU2LjIyMSw3LjU1NSAxNTYuMjA5LDcuMzY1IDE1Ni4yMDksNy4xODQgTDE1Ni4yMDksNi4zNjQgQzE1NS4zNzUsNS44ODMgMTQ5LjUyOSwyLjUwOCAxNDkuNTI5LDIuNTA4IEwxNDkuNjQ2LDIuMzA2IEMxNDkuNjQ2LDIuMzA2IDE1NS44MjcsNS44NzQgMTU2LjM4NCw2LjE5NiBMMTU2LjQ0Miw2LjIzIEwxNTYuNDQyLDcuMTg0IEMxNTYuNDQyLDcuMzU1IDE1Ni40NTQsNy41MzUgMTU2LjQ3OCw3LjcxNyBDMTU2LjQ4OSw3LjggMTU2LjQ5OSw3Ljg4MiAxNTYuNTA3LDcuOTYzIEMxNTYuNjQ1LDkuMzU4IDE1Ny40NTUsMTAuODk4IDE1OC41NzIsMTEuODg2IEwxNjUuOTY5LDE4LjQzMSBDMTY2LjE0MiwxOC41ODQgMTY2LjMxOSwxOC43MiAxNjYuNDk2LDE4LjgzNyBDMTY3LjI1NCwxOS4zMzYgMTY4LDE5LjQ2NyAxNjguNTQzLDE5LjE5NiBDMTY5LjAzMywxOC45NTMgMTY5LjMyOSwxOC40MDEgMTY5LjM3NywxNy42NDUgQzE2OS40MjcsMTYuODY3IDE2OS40MzQsMTYuMDU0IDE2OS40MDEsMTUuMjI4IEwxNjkuMzk3LDE1LjA2NSBMMTY5LjM5NywxMy43MSBMMTY5LjU3MiwxMy44MSBDMTcwLjgzOSwxNC41NDEgMTk1LjU1OSwyOC44MTQgMTk1LjU1OSwyOC44MTQgTDE5NS42MTgsMjguODQ3IEwxOTUuNjE4LDgyLjkxNSBDMTk1LjYxOCw4My40ODQgMTk1LjQyLDgzLjkxMSAxOTUuMDU5LDg0LjExOSBDMTk0LjkwOCw4NC4yMDYgMTk0LjczNyw4NC4yNSAxOTQuNTUzLDg0LjI1IiBpZD0iRmlsbC0xMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDUuNjg1LDU2LjE2MSBMMTY5LjgsNzAuMDgzIEwxNDMuODIyLDg1LjA4MSBMMTQyLjM2LDg0Ljc3NCBDMTM1LjgyNiw4Mi42MDQgMTI4LjczMiw4MS4wNDYgMTIxLjM0MSw4MC4xNTggQzExNi45NzYsNzkuNjM0IDExMi42NzgsODEuMjU0IDExMS43NDMsODMuNzc4IEMxMTEuNTA2LDg0LjQxNCAxMTEuNTAzLDg1LjA3MSAxMTEuNzMyLDg1LjcwNiBDMTEzLjI3LDg5Ljk3MyAxMTUuOTY4LDk0LjA2OSAxMTkuNzI3LDk3Ljg0MSBMMTIwLjI1OSw5OC42ODYgQzEyMC4yNiw5OC42ODUgOTQuMjgyLDExMy42ODMgOTQuMjgyLDExMy42ODMgTDcwLjE2Nyw5OS43NjEgTDE0NS42ODUsNTYuMTYxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik05NC4yODIsMTEzLjgxOCBMOTQuMjIzLDExMy43ODUgTDY5LjkzMyw5OS43NjEgTDcwLjEwOCw5OS42NiBMMTQ1LjY4NSw1Ni4wMjYgTDE0NS43NDMsNTYuMDU5IEwxNzAuMDMzLDcwLjA4MyBMMTQzLjg0Miw4NS4yMDUgTDE0My43OTcsODUuMTk1IEMxNDMuNzcyLDg1LjE5IDE0Mi4zMzYsODQuODg4IDE0Mi4zMzYsODQuODg4IEMxMzUuNzg3LDgyLjcxNCAxMjguNzIzLDgxLjE2MyAxMjEuMzI3LDgwLjI3NCBDMTIwLjc4OCw4MC4yMDkgMTIwLjIzNiw4MC4xNzcgMTE5LjY4OSw4MC4xNzcgQzExNS45MzEsODAuMTc3IDExMi42MzUsODEuNzA4IDExMS44NTIsODMuODE5IEMxMTEuNjI0LDg0LjQzMiAxMTEuNjIxLDg1LjA1MyAxMTEuODQyLDg1LjY2NyBDMTEzLjM3Nyw4OS45MjUgMTE2LjA1OCw5My45OTMgMTE5LjgxLDk3Ljc1OCBMMTE5LjgyNiw5Ny43NzkgTDEyMC4zNTIsOTguNjE0IEMxMjAuMzU0LDk4LjYxNyAxMjAuMzU2LDk4LjYyIDEyMC4zNTgsOTguNjI0IEwxMjAuNDIyLDk4LjcyNiBMMTIwLjMxNyw5OC43ODcgQzEyMC4yNjQsOTguODE4IDk0LjU5OSwxMTMuNjM1IDk0LjM0LDExMy43ODUgTDk0LjI4MiwxMTMuODE4IEw5NC4yODIsMTEzLjgxOCBaIE03MC40MDEsOTkuNzYxIEw5NC4yODIsMTEzLjU0OSBMMTE5LjA4NCw5OS4yMjkgQzExOS42Myw5OC45MTQgMTE5LjkzLDk4Ljc0IDEyMC4xMDEsOTguNjU0IEwxMTkuNjM1LDk3LjkxNCBDMTE1Ljg2NCw5NC4xMjcgMTEzLjE2OCw5MC4wMzMgMTExLjYyMiw4NS43NDYgQzExMS4zODIsODUuMDc5IDExMS4zODYsODQuNDA0IDExMS42MzMsODMuNzM4IEMxMTIuNDQ4LDgxLjUzOSAxMTUuODM2LDc5Ljk0MyAxMTkuNjg5LDc5Ljk0MyBDMTIwLjI0Niw3OS45NDMgMTIwLjgwNiw3OS45NzYgMTIxLjM1NSw4MC4wNDIgQzEyOC43NjcsODAuOTMzIDEzNS44NDYsODIuNDg3IDE0Mi4zOTYsODQuNjYzIEMxNDMuMjMyLDg0LjgzOCAxNDMuNjExLDg0LjkxNyAxNDMuNzg2LDg0Ljk2NyBMMTY5LjU2Niw3MC4wODMgTDE0NS42ODUsNTYuMjk1IEw3MC40MDEsOTkuNzYxIEw3MC40MDEsOTkuNzYxIFoiIGlkPSJGaWxsLTEyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2Ny4yMywxOC45NzkgTDE2Ny4yMyw2OS44NSBMMTM5LjkwOSw4NS42MjMgTDEzMy40NDgsNzEuNDU2IEMxMzIuNTM4LDY5LjQ2IDEzMC4wMiw2OS43MTggMTI3LjgyNCw3Mi4wMyBDMTI2Ljc2OSw3My4xNCAxMjUuOTMxLDc0LjU4NSAxMjUuNDk0LDc2LjA0OCBMMTE5LjAzNCw5Ny42NzYgTDkxLjcxMiwxMTMuNDUgTDkxLjcxMiw2Mi41NzkgTDE2Ny4yMywxOC45NzkiIGlkPSJGaWxsLTEzIiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTkxLjcxMiwxMTMuNTY3IEM5MS42OTIsMTEzLjU2NyA5MS42NzIsMTEzLjU2MSA5MS42NTMsMTEzLjU1MSBDOTEuNjE4LDExMy41MyA5MS41OTUsMTEzLjQ5MiA5MS41OTUsMTEzLjQ1IEw5MS41OTUsNjIuNTc5IEM5MS41OTUsNjIuNTM3IDkxLjYxOCw2Mi40OTkgOTEuNjUzLDYyLjQ3OCBMMTY3LjE3MiwxOC44NzggQzE2Ny4yMDgsMTguODU3IDE2Ny4yNTIsMTguODU3IDE2Ny4yODgsMTguODc4IEMxNjcuMzI0LDE4Ljg5OSAxNjcuMzQ3LDE4LjkzNyAxNjcuMzQ3LDE4Ljk3OSBMMTY3LjM0Nyw2OS44NSBDMTY3LjM0Nyw2OS44OTEgMTY3LjMyNCw2OS45MyAxNjcuMjg4LDY5Ljk1IEwxMzkuOTY3LDg1LjcyNSBDMTM5LjkzOSw4NS43NDEgMTM5LjkwNSw4NS43NDUgMTM5Ljg3Myw4NS43MzUgQzEzOS44NDIsODUuNzI1IDEzOS44MTYsODUuNzAyIDEzOS44MDIsODUuNjcyIEwxMzMuMzQyLDcxLjUwNCBDMTMyLjk2Nyw3MC42ODIgMTMyLjI4LDcwLjIyOSAxMzEuNDA4LDcwLjIyOSBDMTMwLjMxOSw3MC4yMjkgMTI5LjA0NCw3MC45MTUgMTI3LjkwOCw3Mi4xMSBDMTI2Ljg3NCw3My4yIDEyNi4wMzQsNzQuNjQ3IDEyNS42MDYsNzYuMDgyIEwxMTkuMTQ2LDk3LjcwOSBDMTE5LjEzNyw5Ny43MzggMTE5LjExOCw5Ny43NjIgMTE5LjA5Miw5Ny43NzcgTDkxLjc3LDExMy41NTEgQzkxLjc1MiwxMTMuNTYxIDkxLjczMiwxMTMuNTY3IDkxLjcxMiwxMTMuNTY3IEw5MS43MTIsMTEzLjU2NyBaIE05MS44MjksNjIuNjQ3IEw5MS44MjksMTEzLjI0OCBMMTE4LjkzNSw5Ny41OTggTDEyNS4zODIsNzYuMDE1IEMxMjUuODI3LDc0LjUyNSAxMjYuNjY0LDczLjA4MSAxMjcuNzM5LDcxLjk1IEMxMjguOTE5LDcwLjcwOCAxMzAuMjU2LDY5Ljk5NiAxMzEuNDA4LDY5Ljk5NiBDMTMyLjM3Nyw2OS45OTYgMTMzLjEzOSw3MC40OTcgMTMzLjU1NCw3MS40MDcgTDEzOS45NjEsODUuNDU4IEwxNjcuMTEzLDY5Ljc4MiBMMTY3LjExMywxOS4xODEgTDkxLjgyOSw2Mi42NDcgTDkxLjgyOSw2Mi42NDcgWiIgaWQ9IkZpbGwtMTQiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTY4LjU0MywxOS4yMTMgTDE2OC41NDMsNzAuMDgzIEwxNDEuMjIxLDg1Ljg1NyBMMTM0Ljc2MSw3MS42ODkgQzEzMy44NTEsNjkuNjk0IDEzMS4zMzMsNjkuOTUxIDEyOS4xMzcsNzIuMjYzIEMxMjguMDgyLDczLjM3NCAxMjcuMjQ0LDc0LjgxOSAxMjYuODA3LDc2LjI4MiBMMTIwLjM0Niw5Ny45MDkgTDkzLjAyNSwxMTMuNjgzIEw5My4wMjUsNjIuODEzIEwxNjguNTQzLDE5LjIxMyIgaWQ9IkZpbGwtMTUiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTMuMDI1LDExMy44IEM5My4wMDUsMTEzLjggOTIuOTg0LDExMy43OTUgOTIuOTY2LDExMy43ODUgQzkyLjkzMSwxMTMuNzY0IDkyLjkwOCwxMTMuNzI1IDkyLjkwOCwxMTMuNjg0IEw5Mi45MDgsNjIuODEzIEM5Mi45MDgsNjIuNzcxIDkyLjkzMSw2Mi43MzMgOTIuOTY2LDYyLjcxMiBMMTY4LjQ4NCwxOS4xMTIgQzE2OC41MiwxOS4wOSAxNjguNTY1LDE5LjA5IDE2OC42MDEsMTkuMTEyIEMxNjguNjM3LDE5LjEzMiAxNjguNjYsMTkuMTcxIDE2OC42NiwxOS4yMTIgTDE2OC42Niw3MC4wODMgQzE2OC42Niw3MC4xMjUgMTY4LjYzNyw3MC4xNjQgMTY4LjYwMSw3MC4xODQgTDE0MS4yOCw4NS45NTggQzE0MS4yNTEsODUuOTc1IDE0MS4yMTcsODUuOTc5IDE0MS4xODYsODUuOTY4IEMxNDEuMTU0LDg1Ljk1OCAxNDEuMTI5LDg1LjkzNiAxNDEuMTE1LDg1LjkwNiBMMTM0LjY1NSw3MS43MzggQzEzNC4yOCw3MC45MTUgMTMzLjU5Myw3MC40NjMgMTMyLjcyLDcwLjQ2MyBDMTMxLjYzMiw3MC40NjMgMTMwLjM1Nyw3MS4xNDggMTI5LjIyMSw3Mi4zNDQgQzEyOC4xODYsNzMuNDMzIDEyNy4zNDcsNzQuODgxIDEyNi45MTksNzYuMzE1IEwxMjAuNDU4LDk3Ljk0MyBDMTIwLjQ1LDk3Ljk3MiAxMjAuNDMxLDk3Ljk5NiAxMjAuNDA1LDk4LjAxIEw5My4wODMsMTEzLjc4NSBDOTMuMDY1LDExMy43OTUgOTMuMDQ1LDExMy44IDkzLjAyNSwxMTMuOCBMOTMuMDI1LDExMy44IFogTTkzLjE0Miw2Mi44ODEgTDkzLjE0MiwxMTMuNDgxIEwxMjAuMjQ4LDk3LjgzMiBMMTI2LjY5NSw3Ni4yNDggQzEyNy4xNCw3NC43NTggMTI3Ljk3Nyw3My4zMTUgMTI5LjA1Miw3Mi4xODMgQzEzMC4yMzEsNzAuOTQyIDEzMS41NjgsNzAuMjI5IDEzMi43Miw3MC4yMjkgQzEzMy42ODksNzAuMjI5IDEzNC40NTIsNzAuNzMxIDEzNC44NjcsNzEuNjQxIEwxNDEuMjc0LDg1LjY5MiBMMTY4LjQyNiw3MC4wMTYgTDE2OC40MjYsMTkuNDE1IEw5My4xNDIsNjIuODgxIEw5My4xNDIsNjIuODgxIFoiIGlkPSJGaWxsLTE2IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS44LDcwLjA4MyBMMTQyLjQ3OCw4NS44NTcgTDEzNi4wMTgsNzEuNjg5IEMxMzUuMTA4LDY5LjY5NCAxMzIuNTksNjkuOTUxIDEzMC4zOTMsNzIuMjYzIEMxMjkuMzM5LDczLjM3NCAxMjguNSw3NC44MTkgMTI4LjA2NCw3Ni4yODIgTDEyMS42MDMsOTcuOTA5IEw5NC4yODIsMTEzLjY4MyBMOTQuMjgyLDYyLjgxMyBMMTY5LjgsMTkuMjEzIEwxNjkuOCw3MC4wODMgWiIgaWQ9IkZpbGwtMTciIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTQuMjgyLDExMy45MTcgQzk0LjI0MSwxMTMuOTE3IDk0LjIwMSwxMTMuOTA3IDk0LjE2NSwxMTMuODg2IEM5NC4wOTMsMTEzLjg0NSA5NC4wNDgsMTEzLjc2NyA5NC4wNDgsMTEzLjY4NCBMOTQuMDQ4LDYyLjgxMyBDOTQuMDQ4LDYyLjczIDk0LjA5Myw2Mi42NTIgOTQuMTY1LDYyLjYxMSBMMTY5LjY4MywxOS4wMSBDMTY5Ljc1NSwxOC45NjkgMTY5Ljg0NCwxOC45NjkgMTY5LjkxNywxOS4wMSBDMTY5Ljk4OSwxOS4wNTIgMTcwLjAzMywxOS4xMjkgMTcwLjAzMywxOS4yMTIgTDE3MC4wMzMsNzAuMDgzIEMxNzAuMDMzLDcwLjE2NiAxNjkuOTg5LDcwLjI0NCAxNjkuOTE3LDcwLjI4NSBMMTQyLjU5NSw4Ni4wNiBDMTQyLjUzOCw4Ni4wOTIgMTQyLjQ2OSw4Ni4xIDE0Mi40MDcsODYuMDggQzE0Mi4zNDQsODYuMDYgMTQyLjI5Myw4Ni4wMTQgMTQyLjI2Niw4NS45NTQgTDEzNS44MDUsNzEuNzg2IEMxMzUuNDQ1LDcwLjk5NyAxMzQuODEzLDcwLjU4IDEzMy45NzcsNzAuNTggQzEzMi45MjEsNzAuNTggMTMxLjY3Niw3MS4yNTIgMTMwLjU2Miw3Mi40MjQgQzEyOS41NCw3My41MDEgMTI4LjcxMSw3NC45MzEgMTI4LjI4Nyw3Ni4zNDggTDEyMS44MjcsOTcuOTc2IEMxMjEuODEsOTguMDM0IDEyMS43NzEsOTguMDgyIDEyMS43Miw5OC4xMTIgTDk0LjM5OCwxMTMuODg2IEM5NC4zNjIsMTEzLjkwNyA5NC4zMjIsMTEzLjkxNyA5NC4yODIsMTEzLjkxNyBMOTQuMjgyLDExMy45MTcgWiBNOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDExMy4yNzkgTDEyMS40MDYsOTcuNzU0IEwxMjcuODQsNzYuMjE1IEMxMjguMjksNzQuNzA4IDEyOS4xMzcsNzMuMjQ3IDEzMC4yMjQsNzIuMTAzIEMxMzEuNDI1LDcwLjgzOCAxMzIuNzkzLDcwLjExMiAxMzMuOTc3LDcwLjExMiBDMTM0Ljk5NSw3MC4xMTIgMTM1Ljc5NSw3MC42MzggMTM2LjIzLDcxLjU5MiBMMTQyLjU4NCw4NS41MjYgTDE2OS41NjYsNjkuOTQ4IEwxNjkuNTY2LDE5LjYxNyBMOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDYyLjk0OCBaIiBpZD0iRmlsbC0xOCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMDkuODk0LDkyLjk0MyBMMTA5Ljg5NCw5Mi45NDMgQzEwOC4xMiw5Mi45NDMgMTA2LjY1Myw5Mi4yMTggMTA1LjY1LDkwLjgyMyBDMTA1LjU4Myw5MC43MzEgMTA1LjU5Myw5MC42MSAxMDUuNjczLDkwLjUyOSBDMTA1Ljc1Myw5MC40NDggMTA1Ljg4LDkwLjQ0IDEwNS45NzQsOTAuNTA2IEMxMDYuNzU0LDkxLjA1MyAxMDcuNjc5LDkxLjMzMyAxMDguNzI0LDkxLjMzMyBDMTEwLjA0Nyw5MS4zMzMgMTExLjQ3OCw5MC44OTQgMTEyLjk4LDkwLjAyNyBDMTE4LjI5MSw4Ni45NiAxMjIuNjExLDc5LjUwOSAxMjIuNjExLDczLjQxNiBDMTIyLjYxMSw3MS40ODkgMTIyLjE2OSw2OS44NTYgMTIxLjMzMyw2OC42OTIgQzEyMS4yNjYsNjguNiAxMjEuMjc2LDY4LjQ3MyAxMjEuMzU2LDY4LjM5MiBDMTIxLjQzNiw2OC4zMTEgMTIxLjU2Myw2OC4yOTkgMTIxLjY1Niw2OC4zNjUgQzEyMy4zMjcsNjkuNTM3IDEyNC4yNDcsNzEuNzQ2IDEyNC4yNDcsNzQuNTg0IEMxMjQuMjQ3LDgwLjgyNiAxMTkuODIxLDg4LjQ0NyAxMTQuMzgyLDkxLjU4NyBDMTEyLjgwOCw5Mi40OTUgMTExLjI5OCw5Mi45NDMgMTA5Ljg5NCw5Mi45NDMgTDEwOS44OTQsOTIuOTQzIFogTTEwNi45MjUsOTEuNDAxIEMxMDcuNzM4LDkyLjA1MiAxMDguNzQ1LDkyLjI3OCAxMDkuODkzLDkyLjI3OCBMMTA5Ljg5NCw5Mi4yNzggQzExMS4yMTUsOTIuMjc4IDExMi42NDcsOTEuOTUxIDExNC4xNDgsOTEuMDg0IEMxMTkuNDU5LDg4LjAxNyAxMjMuNzgsODAuNjIxIDEyMy43OCw3NC41MjggQzEyMy43OCw3Mi41NDkgMTIzLjMxNyw3MC45MjkgMTIyLjQ1NCw2OS43NjcgQzEyMi44NjUsNzAuODAyIDEyMy4wNzksNzIuMDQyIDEyMy4wNzksNzMuNDAyIEMxMjMuMDc5LDc5LjY0NSAxMTguNjUzLDg3LjI4NSAxMTMuMjE0LDkwLjQyNSBDMTExLjY0LDkxLjMzNCAxMTAuMTMsOTEuNzQyIDEwOC43MjQsOTEuNzQyIEMxMDguMDgzLDkxLjc0MiAxMDcuNDgxLDkxLjU5MyAxMDYuOTI1LDkxLjQwMSBMMTA2LjkyNSw5MS40MDEgWiIgaWQ9IkZpbGwtMTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjA5Nyw5MC4yMyBDMTE4LjQ4MSw4Ny4xMjIgMTIyLjg0NSw3OS41OTQgMTIyLjg0NSw3My40MTYgQzEyMi44NDUsNzEuMzY1IDEyMi4zNjIsNjkuNzI0IDEyMS41MjIsNjguNTU2IEMxMTkuNzM4LDY3LjMwNCAxMTcuMTQ4LDY3LjM2MiAxMTQuMjY1LDY5LjAyNiBDMTA4Ljg4MSw3Mi4xMzQgMTA0LjUxNyw3OS42NjIgMTA0LjUxNyw4NS44NCBDMTA0LjUxNyw4Ny44OTEgMTA1LDg5LjUzMiAxMDUuODQsOTAuNyBDMTA3LjYyNCw5MS45NTIgMTEwLjIxNCw5MS44OTQgMTEzLjA5Nyw5MC4yMyIgaWQ9IkZpbGwtMjAiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTA4LjcyNCw5MS42MTQgTDEwOC43MjQsOTEuNjE0IEMxMDcuNTgyLDkxLjYxNCAxMDYuNTY2LDkxLjQwMSAxMDUuNzA1LDkwLjc5NyBDMTA1LjY4NCw5MC43ODMgMTA1LjY2NSw5MC44MTEgMTA1LjY1LDkwLjc5IEMxMDQuNzU2LDg5LjU0NiAxMDQuMjgzLDg3Ljg0MiAxMDQuMjgzLDg1LjgxNyBDMTA0LjI4Myw3OS41NzUgMTA4LjcwOSw3MS45NTMgMTE0LjE0OCw2OC44MTIgQzExNS43MjIsNjcuOTA0IDExNy4yMzIsNjcuNDQ5IDExOC42MzgsNjcuNDQ5IEMxMTkuNzgsNjcuNDQ5IDEyMC43OTYsNjcuNzU4IDEyMS42NTYsNjguMzYyIEMxMjEuNjc4LDY4LjM3NyAxMjEuNjk3LDY4LjM5NyAxMjEuNzEyLDY4LjQxOCBDMTIyLjYwNiw2OS42NjIgMTIzLjA3OSw3MS4zOSAxMjMuMDc5LDczLjQxNSBDMTIzLjA3OSw3OS42NTggMTE4LjY1Myw4Ny4xOTggMTEzLjIxNCw5MC4zMzggQzExMS42NCw5MS4yNDcgMTEwLjEzLDkxLjYxNCAxMDguNzI0LDkxLjYxNCBMMTA4LjcyNCw5MS42MTQgWiBNMTA2LjAwNiw5MC41MDUgQzEwNi43OCw5MS4wMzcgMTA3LjY5NCw5MS4yODEgMTA4LjcyNCw5MS4yODEgQzExMC4wNDcsOTEuMjgxIDExMS40NzgsOTAuODY4IDExMi45OCw5MC4wMDEgQzExOC4yOTEsODYuOTM1IDEyMi42MTEsNzkuNDk2IDEyMi42MTEsNzMuNDAzIEMxMjIuNjExLDcxLjQ5NCAxMjIuMTc3LDY5Ljg4IDEyMS4zNTYsNjguNzE4IEMxMjAuNTgyLDY4LjE4NSAxMTkuNjY4LDY3LjkxOSAxMTguNjM4LDY3LjkxOSBDMTE3LjMxNSw2Ny45MTkgMTE1Ljg4Myw2OC4zNiAxMTQuMzgyLDY5LjIyNyBDMTA5LjA3MSw3Mi4yOTMgMTA0Ljc1MSw3OS43MzMgMTA0Ljc1MSw4NS44MjYgQzEwNC43NTEsODcuNzM1IDEwNS4xODUsODkuMzQzIDEwNi4wMDYsOTAuNTA1IEwxMDYuMDA2LDkwLjUwNSBaIiBpZD0iRmlsbC0yMSIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDkuMzE4LDcuMjYyIEwxMzkuMzM0LDE2LjE0IEwxNTUuMjI3LDI3LjE3MSBMMTYwLjgxNiwyMS4wNTkgTDE0OS4zMTgsNy4yNjIiIGlkPSJGaWxsLTIyIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS42NzYsMTMuODQgTDE1OS45MjgsMTkuNDY3IEMxNTYuMjg2LDIxLjU3IDE1MC40LDIxLjU4IDE0Ni43ODEsMTkuNDkxIEMxNDMuMTYxLDE3LjQwMiAxNDMuMTgsMTQuMDAzIDE0Ni44MjIsMTEuOSBMMTU2LjMxNyw2LjI5MiBMMTQ5LjU4OCwyLjQwNyBMNjcuNzUyLDQ5LjQ3OCBMMTEzLjY3NSw3NS45OTIgTDExNi43NTYsNzQuMjEzIEMxMTcuMzg3LDczLjg0OCAxMTcuNjI1LDczLjMxNSAxMTcuMzc0LDcyLjgyMyBDMTE1LjAxNyw2OC4xOTEgMTE0Ljc4MSw2My4yNzcgMTE2LjY5MSw1OC41NjEgQzEyMi4zMjksNDQuNjQxIDE0MS4yLDMzLjc0NiAxNjUuMzA5LDMwLjQ5MSBDMTczLjQ3OCwyOS4zODggMTgxLjk4OSwyOS41MjQgMTkwLjAxMywzMC44ODUgQzE5MC44NjUsMzEuMDMgMTkxLjc4OSwzMC44OTMgMTkyLjQyLDMwLjUyOCBMMTk1LjUwMSwyOC43NSBMMTY5LjY3NiwxMy44NCIgaWQ9IkZpbGwtMjMiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3Ni40NTkgQzExMy41OTQsNzYuNDU5IDExMy41MTQsNzYuNDM4IDExMy40NDIsNzYuMzk3IEw2Ny41MTgsNDkuODgyIEM2Ny4zNzQsNDkuNzk5IDY3LjI4NCw0OS42NDUgNjcuMjg1LDQ5LjQ3OCBDNjcuMjg1LDQ5LjMxMSA2Ny4zNzQsNDkuMTU3IDY3LjUxOSw0OS4wNzMgTDE0OS4zNTUsMi4wMDIgQzE0OS40OTksMS45MTkgMTQ5LjY3NywxLjkxOSAxNDkuODIxLDIuMDAyIEwxNTYuNTUsNS44ODcgQzE1Ni43NzQsNi4wMTcgMTU2Ljg1LDYuMzAyIDE1Ni43MjIsNi41MjYgQzE1Ni41OTIsNi43NDkgMTU2LjMwNyw2LjgyNiAxNTYuMDgzLDYuNjk2IEwxNDkuNTg3LDIuOTQ2IEw2OC42ODcsNDkuNDc5IEwxMTMuNjc1LDc1LjQ1MiBMMTE2LjUyMyw3My44MDggQzExNi43MTUsNzMuNjk3IDExNy4xNDMsNzMuMzk5IDExNi45NTgsNzMuMDM1IEMxMTQuNTQyLDY4LjI4NyAxMTQuMyw2My4yMjEgMTE2LjI1OCw1OC4zODUgQzExOS4wNjQsNTEuNDU4IDEyNS4xNDMsNDUuMTQzIDEzMy44NCw0MC4xMjIgQzE0Mi40OTcsMzUuMTI0IDE1My4zNTgsMzEuNjMzIDE2NS4yNDcsMzAuMDI4IEMxNzMuNDQ1LDI4LjkyMSAxODIuMDM3LDI5LjA1OCAxOTAuMDkxLDMwLjQyNSBDMTkwLjgzLDMwLjU1IDE5MS42NTIsMzAuNDMyIDE5Mi4xODYsMzAuMTI0IEwxOTQuNTY3LDI4Ljc1IEwxNjkuNDQyLDE0LjI0NCBDMTY5LjIxOSwxNC4xMTUgMTY5LjE0MiwxMy44MjkgMTY5LjI3MSwxMy42MDYgQzE2OS40LDEzLjM4MiAxNjkuNjg1LDEzLjMwNiAxNjkuOTA5LDEzLjQzNSBMMTk1LjczNCwyOC4zNDUgQzE5NS44NzksMjguNDI4IDE5NS45NjgsMjguNTgzIDE5NS45NjgsMjguNzUgQzE5NS45NjgsMjguOTE2IDE5NS44NzksMjkuMDcxIDE5NS43MzQsMjkuMTU0IEwxOTIuNjUzLDMwLjkzMyBDMTkxLjkzMiwzMS4zNSAxOTAuODksMzEuNTA4IDE4OS45MzUsMzEuMzQ2IEMxODEuOTcyLDI5Ljk5NSAxNzMuNDc4LDI5Ljg2IDE2NS4zNzIsMzAuOTU0IEMxNTMuNjAyLDMyLjU0MyAxNDIuODYsMzUuOTkzIDEzNC4zMDcsNDAuOTMxIEMxMjUuNzkzLDQ1Ljg0NyAxMTkuODUxLDUyLjAwNCAxMTcuMTI0LDU4LjczNiBDMTE1LjI3LDYzLjMxNCAxMTUuNTAxLDY4LjExMiAxMTcuNzksNzIuNjExIEMxMTguMTYsNzMuMzM2IDExNy44NDUsNzQuMTI0IDExNi45OSw3NC42MTcgTDExMy45MDksNzYuMzk3IEMxMTMuODM2LDc2LjQzOCAxMTMuNzU2LDc2LjQ1OSAxMTMuNjc1LDc2LjQ1OSIgaWQ9IkZpbGwtMjQiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUzLjMxNiwyMS4yNzkgQzE1MC45MDMsMjEuMjc5IDE0OC40OTUsMjAuNzUxIDE0Ni42NjQsMTkuNjkzIEMxNDQuODQ2LDE4LjY0NCAxNDMuODQ0LDE3LjIzMiAxNDMuODQ0LDE1LjcxOCBDMTQzLjg0NCwxNC4xOTEgMTQ0Ljg2LDEyLjc2MyAxNDYuNzA1LDExLjY5OCBMMTU2LjE5OCw2LjA5MSBDMTU2LjMwOSw2LjAyNSAxNTYuNDUyLDYuMDYyIDE1Ni41MTgsNi4xNzMgQzE1Ni41ODMsNi4yODQgMTU2LjU0Nyw2LjQyNyAxNTYuNDM2LDYuNDkzIEwxNDYuOTQsMTIuMTAyIEMxNDUuMjQ0LDEzLjA4MSAxNDQuMzEyLDE0LjM2NSAxNDQuMzEyLDE1LjcxOCBDMTQ0LjMxMiwxNy4wNTggMTQ1LjIzLDE4LjMyNiAxNDYuODk3LDE5LjI4OSBDMTUwLjQ0NiwyMS4zMzggMTU2LjI0LDIxLjMyNyAxNTkuODExLDE5LjI2NSBMMTY5LjU1OSwxMy42MzcgQzE2OS42NywxMy41NzMgMTY5LjgxMywxMy42MTEgMTY5Ljg3OCwxMy43MjMgQzE2OS45NDMsMTMuODM0IDE2OS45MDQsMTMuOTc3IDE2OS43OTMsMTQuMDQyIEwxNjAuMDQ1LDE5LjY3IEMxNTguMTg3LDIwLjc0MiAxNTUuNzQ5LDIxLjI3OSAxNTMuMzE2LDIxLjI3OSIgaWQ9IkZpbGwtMjUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3NS45OTIgTDY3Ljc2Miw0OS40ODQiIGlkPSJGaWxsLTI2IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMy42NzUsNzYuMzQyIEMxMTMuNjE1LDc2LjM0MiAxMTMuNTU1LDc2LjMyNyAxMTMuNSw3Ni4yOTUgTDY3LjU4Nyw0OS43ODcgQzY3LjQxOSw0OS42OSA2Ny4zNjIsNDkuNDc2IDY3LjQ1OSw0OS4zMDkgQzY3LjU1Niw0OS4xNDEgNjcuNzcsNDkuMDgzIDY3LjkzNyw0OS4xOCBMMTEzLjg1LDc1LjY4OCBDMTE0LjAxOCw3NS43ODUgMTE0LjA3NSw3NiAxMTMuOTc4LDc2LjE2NyBDMTEzLjkxNCw3Ni4yNzkgMTEzLjc5Niw3Ni4zNDIgMTEzLjY3NSw3Ni4zNDIiIGlkPSJGaWxsLTI3IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY3Ljc2Miw0OS40ODQgTDY3Ljc2MiwxMDMuNDg1IEM2Ny43NjIsMTA0LjU3NSA2OC41MzIsMTA1LjkwMyA2OS40ODIsMTA2LjQ1MiBMMTExLjk1NSwxMzAuOTczIEMxMTIuOTA1LDEzMS41MjIgMTEzLjY3NSwxMzEuMDgzIDExMy42NzUsMTI5Ljk5MyBMMTEzLjY3NSw3NS45OTIiIGlkPSJGaWxsLTI4IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMi43MjcsMTMxLjU2MSBDMTEyLjQzLDEzMS41NjEgMTEyLjEwNywxMzEuNDY2IDExMS43OCwxMzEuMjc2IEw2OS4zMDcsMTA2Ljc1NSBDNjguMjQ0LDEwNi4xNDIgNjcuNDEyLDEwNC43MDUgNjcuNDEyLDEwMy40ODUgTDY3LjQxMiw0OS40ODQgQzY3LjQxMiw0OS4yOSA2Ny41NjksNDkuMTM0IDY3Ljc2Miw0OS4xMzQgQzY3Ljk1Niw0OS4xMzQgNjguMTEzLDQ5LjI5IDY4LjExMyw0OS40ODQgTDY4LjExMywxMDMuNDg1IEM2OC4xMTMsMTA0LjQ0NSA2OC44MiwxMDUuNjY1IDY5LjY1NywxMDYuMTQ4IEwxMTIuMTMsMTMwLjY3IEMxMTIuNDc0LDEzMC44NjggMTEyLjc5MSwxMzAuOTEzIDExMywxMzAuNzkyIEMxMTMuMjA2LDEzMC42NzMgMTEzLjMyNSwxMzAuMzgxIDExMy4zMjUsMTI5Ljk5MyBMMTEzLjMyNSw3NS45OTIgQzExMy4zMjUsNzUuNzk4IDExMy40ODIsNzUuNjQxIDExMy42NzUsNzUuNjQxIEMxMTMuODY5LDc1LjY0MSAxMTQuMDI1LDc1Ljc5OCAxMTQuMDI1LDc1Ljk5MiBMMTE0LjAyNSwxMjkuOTkzIEMxMTQuMDI1LDEzMC42NDggMTEzLjc4NiwxMzEuMTQ3IDExMy4zNSwxMzEuMzk5IEMxMTMuMTYyLDEzMS41MDcgMTEyLjk1MiwxMzEuNTYxIDExMi43MjcsMTMxLjU2MSIgaWQ9IkZpbGwtMjkiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEyLjg2LDQwLjUxMiBDMTEyLjg2LDQwLjUxMiAxMTIuODYsNDAuNTEyIDExMi44NTksNDAuNTEyIEMxMTAuNTQxLDQwLjUxMiAxMDguMzYsMzkuOTkgMTA2LjcxNywzOS4wNDEgQzEwNS4wMTIsMzguMDU3IDEwNC4wNzQsMzYuNzI2IDEwNC4wNzQsMzUuMjkyIEMxMDQuMDc0LDMzLjg0NyAxMDUuMDI2LDMyLjUwMSAxMDYuNzU0LDMxLjUwNCBMMTE4Ljc5NSwyNC41NTEgQzEyMC40NjMsMjMuNTg5IDEyMi42NjksMjMuMDU4IDEyNS4wMDcsMjMuMDU4IEMxMjcuMzI1LDIzLjA1OCAxMjkuNTA2LDIzLjU4MSAxMzEuMTUsMjQuNTMgQzEzMi44NTQsMjUuNTE0IDEzMy43OTMsMjYuODQ1IDEzMy43OTMsMjguMjc4IEMxMzMuNzkzLDI5LjcyNCAxMzIuODQxLDMxLjA2OSAxMzEuMTEzLDMyLjA2NyBMMTE5LjA3MSwzOS4wMTkgQzExNy40MDMsMzkuOTgyIDExNS4xOTcsNDAuNTEyIDExMi44Niw0MC41MTIgTDExMi44Niw0MC41MTIgWiBNMTI1LjAwNywyMy43NTkgQzEyMi43OSwyMy43NTkgMTIwLjcwOSwyNC4yNTYgMTE5LjE0NiwyNS4xNTggTDEwNy4xMDQsMzIuMTEgQzEwNS42MDIsMzIuOTc4IDEwNC43NzQsMzQuMTA4IDEwNC43NzQsMzUuMjkyIEMxMDQuNzc0LDM2LjQ2NSAxMDUuNTg5LDM3LjU4MSAxMDcuMDY3LDM4LjQzNCBDMTA4LjYwNSwzOS4zMjMgMTEwLjY2MywzOS44MTIgMTEyLjg1OSwzOS44MTIgTDExMi44NiwzOS44MTIgQzExNS4wNzYsMzkuODEyIDExNy4xNTgsMzkuMzE1IDExOC43MjEsMzguNDEzIEwxMzAuNzYyLDMxLjQ2IEMxMzIuMjY0LDMwLjU5MyAxMzMuMDkyLDI5LjQ2MyAxMzMuMDkyLDI4LjI3OCBDMTMzLjA5MiwyNy4xMDYgMTMyLjI3OCwyNS45OSAxMzAuOCwyNS4xMzYgQzEyOS4yNjEsMjQuMjQ4IDEyNy4yMDQsMjMuNzU5IDEyNS4wMDcsMjMuNzU5IEwxMjUuMDA3LDIzLjc1OSBaIiBpZD0iRmlsbC0zMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNjUuNjMsMTYuMjE5IEwxNTkuODk2LDE5LjUzIEMxNTYuNzI5LDIxLjM1OCAxNTEuNjEsMjEuMzY3IDE0OC40NjMsMTkuNTUgQzE0NS4zMTYsMTcuNzMzIDE0NS4zMzIsMTQuNzc4IDE0OC40OTksMTIuOTQ5IEwxNTQuMjMzLDkuNjM5IEwxNjUuNjMsMTYuMjE5IiBpZD0iRmlsbC0zMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNTQuMjMzLDEwLjQ0OCBMMTY0LjIyOCwxNi4yMTkgTDE1OS41NDYsMTguOTIzIEMxNTguMTEyLDE5Ljc1IDE1Ni4xOTQsMjAuMjA2IDE1NC4xNDcsMjAuMjA2IEMxNTIuMTE4LDIwLjIwNiAxNTAuMjI0LDE5Ljc1NyAxNDguODE0LDE4Ljk0MyBDMTQ3LjUyNCwxOC4xOTkgMTQ2LjgxNCwxNy4yNDkgMTQ2LjgxNCwxNi4yNjkgQzE0Ni44MTQsMTUuMjc4IDE0Ny41MzcsMTQuMzE0IDE0OC44NSwxMy41NTYgTDE1NC4yMzMsMTAuNDQ4IE0xNTQuMjMzLDkuNjM5IEwxNDguNDk5LDEyLjk0OSBDMTQ1LjMzMiwxNC43NzggMTQ1LjMxNiwxNy43MzMgMTQ4LjQ2MywxOS41NSBDMTUwLjAzMSwyMC40NTUgMTUyLjA4NiwyMC45MDcgMTU0LjE0NywyMC45MDcgQzE1Ni4yMjQsMjAuOTA3IDE1OC4zMDYsMjAuNDQ3IDE1OS44OTYsMTkuNTMgTDE2NS42MywxNi4yMTkgTDE1NC4yMzMsOS42MzkiIGlkPSJGaWxsLTMyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NS40NDUsNzIuNjY3IEwxNDUuNDQ1LDcyLjY2NyBDMTQzLjY3Miw3Mi42NjcgMTQyLjIwNCw3MS44MTcgMTQxLjIwMiw3MC40MjIgQzE0MS4xMzUsNzAuMzMgMTQxLjE0NSw3MC4xNDcgMTQxLjIyNSw3MC4wNjYgQzE0MS4zMDUsNjkuOTg1IDE0MS40MzIsNjkuOTQ2IDE0MS41MjUsNzAuMDExIEMxNDIuMzA2LDcwLjU1OSAxNDMuMjMxLDcwLjgyMyAxNDQuMjc2LDcwLjgyMiBDMTQ1LjU5OCw3MC44MjIgMTQ3LjAzLDcwLjM3NiAxNDguNTMyLDY5LjUwOSBDMTUzLjg0Miw2Ni40NDMgMTU4LjE2Myw1OC45ODcgMTU4LjE2Myw1Mi44OTQgQzE1OC4xNjMsNTAuOTY3IDE1Ny43MjEsNDkuMzMyIDE1Ni44ODQsNDguMTY4IEMxNTYuODE4LDQ4LjA3NiAxNTYuODI4LDQ3Ljk0OCAxNTYuOTA4LDQ3Ljg2NyBDMTU2Ljk4OCw0Ny43ODYgMTU3LjExNCw0Ny43NzQgMTU3LjIwOCw0Ny44NCBDMTU4Ljg3OCw0OS4wMTIgMTU5Ljc5OCw1MS4yMiAxNTkuNzk4LDU0LjA1OSBDMTU5Ljc5OCw2MC4zMDEgMTU1LjM3Myw2OC4wNDYgMTQ5LjkzMyw3MS4xODYgQzE0OC4zNiw3Mi4wOTQgMTQ2Ljg1LDcyLjY2NyAxNDUuNDQ1LDcyLjY2NyBMMTQ1LjQ0NSw3Mi42NjcgWiBNMTQyLjQ3Niw3MSBDMTQzLjI5LDcxLjY1MSAxNDQuMjk2LDcyLjAwMiAxNDUuNDQ1LDcyLjAwMiBDMTQ2Ljc2Nyw3Mi4wMDIgMTQ4LjE5OCw3MS41NSAxNDkuNyw3MC42ODIgQzE1NS4wMSw2Ny42MTcgMTU5LjMzMSw2MC4xNTkgMTU5LjMzMSw1NC4wNjUgQzE1OS4zMzEsNTIuMDg1IDE1OC44NjgsNTAuNDM1IDE1OC4wMDYsNDkuMjcyIEMxNTguNDE3LDUwLjMwNyAxNTguNjMsNTEuNTMyIDE1OC42Myw1Mi44OTIgQzE1OC42Myw1OS4xMzQgMTU0LjIwNSw2Ni43NjcgMTQ4Ljc2NSw2OS45MDcgQzE0Ny4xOTIsNzAuODE2IDE0NS42ODEsNzEuMjgzIDE0NC4yNzYsNzEuMjgzIEMxNDMuNjM0LDcxLjI4MyAxNDMuMDMzLDcxLjE5MiAxNDIuNDc2LDcxIEwxNDIuNDc2LDcxIFoiIGlkPSJGaWxsLTMzIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0OC42NDgsNjkuNzA0IEMxNTQuMDMyLDY2LjU5NiAxNTguMzk2LDU5LjA2OCAxNTguMzk2LDUyLjg5MSBDMTU4LjM5Niw1MC44MzkgMTU3LjkxMyw0OS4xOTggMTU3LjA3NCw0OC4wMyBDMTU1LjI4OSw0Ni43NzggMTUyLjY5OSw0Ni44MzYgMTQ5LjgxNiw0OC41MDEgQzE0NC40MzMsNTEuNjA5IDE0MC4wNjgsNTkuMTM3IDE0MC4wNjgsNjUuMzE0IEMxNDAuMDY4LDY3LjM2NSAxNDAuNTUyLDY5LjAwNiAxNDEuMzkxLDcwLjE3NCBDMTQzLjE3Niw3MS40MjcgMTQ1Ljc2NSw3MS4zNjkgMTQ4LjY0OCw2OS43MDQiIGlkPSJGaWxsLTM0IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NC4yNzYsNzEuMjc2IEwxNDQuMjc2LDcxLjI3NiBDMTQzLjEzMyw3MS4yNzYgMTQyLjExOCw3MC45NjkgMTQxLjI1Nyw3MC4zNjUgQzE0MS4yMzYsNzAuMzUxIDE0MS4yMTcsNzAuMzMyIDE0MS4yMDIsNzAuMzExIEMxNDAuMzA3LDY5LjA2NyAxMzkuODM1LDY3LjMzOSAxMzkuODM1LDY1LjMxNCBDMTM5LjgzNSw1OS4wNzMgMTQ0LjI2LDUxLjQzOSAxNDkuNyw0OC4yOTggQzE1MS4yNzMsNDcuMzkgMTUyLjc4NCw0Ni45MjkgMTU0LjE4OSw0Ni45MjkgQzE1NS4zMzIsNDYuOTI5IDE1Ni4zNDcsNDcuMjM2IDE1Ny4yMDgsNDcuODM5IEMxNTcuMjI5LDQ3Ljg1NCAxNTcuMjQ4LDQ3Ljg3MyAxNTcuMjYzLDQ3Ljg5NCBDMTU4LjE1Nyw0OS4xMzggMTU4LjYzLDUwLjg2NSAxNTguNjMsNTIuODkxIEMxNTguNjMsNTkuMTMyIDE1NC4yMDUsNjYuNzY2IDE0OC43NjUsNjkuOTA3IEMxNDcuMTkyLDcwLjgxNSAxNDUuNjgxLDcxLjI3NiAxNDQuMjc2LDcxLjI3NiBMMTQ0LjI3Niw3MS4yNzYgWiBNMTQxLjU1OCw3MC4xMDQgQzE0Mi4zMzEsNzAuNjM3IDE0My4yNDUsNzEuMDA1IDE0NC4yNzYsNzEuMDA1IEMxNDUuNTk4LDcxLjAwNSAxNDcuMDMsNzAuNDY3IDE0OC41MzIsNjkuNiBDMTUzLjg0Miw2Ni41MzQgMTU4LjE2Myw1OS4wMzMgMTU4LjE2Myw1Mi45MzkgQzE1OC4xNjMsNTEuMDMxIDE1Ny43MjksNDkuMzg1IDE1Ni45MDcsNDguMjIzIEMxNTYuMTMzLDQ3LjY5MSAxNTUuMjE5LDQ3LjQwOSAxNTQuMTg5LDQ3LjQwOSBDMTUyLjg2Nyw0Ny40MDkgMTUxLjQzNSw0Ny44NDIgMTQ5LjkzMyw0OC43MDkgQzE0NC42MjMsNTEuNzc1IDE0MC4zMDIsNTkuMjczIDE0MC4zMDIsNjUuMzY2IEMxNDAuMzAyLDY3LjI3NiAxNDAuNzM2LDY4Ljk0MiAxNDEuNTU4LDcwLjEwNCBMMTQxLjU1OCw3MC4xMDQgWiIgaWQ9IkZpbGwtMzUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUwLjcyLDY1LjM2MSBMMTUwLjM1Nyw2NS4wNjYgQzE1MS4xNDcsNjQuMDkyIDE1MS44NjksNjMuMDQgMTUyLjUwNSw2MS45MzggQzE1My4zMTMsNjAuNTM5IDE1My45NzgsNTkuMDY3IDE1NC40ODIsNTcuNTYzIEwxNTQuOTI1LDU3LjcxMiBDMTU0LjQxMiw1OS4yNDUgMTUzLjczMyw2MC43NDUgMTUyLjkxLDYyLjE3MiBDMTUyLjI2Miw2My4yOTUgMTUxLjUyNSw2NC4zNjggMTUwLjcyLDY1LjM2MSIgaWQ9IkZpbGwtMzYiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE1LjkxNyw4NC41MTQgTDExNS41NTQsODQuMjIgQzExNi4zNDQsODMuMjQ1IDExNy4wNjYsODIuMTk0IDExNy43MDIsODEuMDkyIEMxMTguNTEsNzkuNjkyIDExOS4xNzUsNzguMjIgMTE5LjY3OCw3Ni43MTcgTDEyMC4xMjEsNzYuODY1IEMxMTkuNjA4LDc4LjM5OCAxMTguOTMsNzkuODk5IDExOC4xMDYsODEuMzI2IEMxMTcuNDU4LDgyLjQ0OCAxMTYuNzIyLDgzLjUyMSAxMTUuOTE3LDg0LjUxNCIgaWQ9IkZpbGwtMzciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE0LDEzMC40NzYgTDExNCwxMzAuMDA4IEwxMTQsNzYuMDUyIEwxMTQsNzUuNTg0IEwxMTQsNzYuMDUyIEwxMTQsMTMwLjAwOCBMMTE0LDEzMC40NzYiIGlkPSJGaWxsLTM4IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDYyLjAwMDAwMCwgMC4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTkuODIyLDM3LjQ3NCBDMTkuODM5LDM3LjMzOSAxOS43NDcsMzcuMTk0IDE5LjU1NSwzNy4wODIgQzE5LjIyOCwzNi44OTQgMTguNzI5LDM2Ljg3MiAxOC40NDYsMzcuMDM3IEwxMi40MzQsNDAuNTA4IEMxMi4zMDMsNDAuNTg0IDEyLjI0LDQwLjY4NiAxMi4yNDMsNDAuNzkzIEMxMi4yNDUsNDAuOTI1IDEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQxLjM3MSBMMTIuMjQ1LDQxLjQxNCBMMTIuMjM4LDQxLjU0MiBDOC4xNDgsNDMuODg3IDUuNjQ3LDQ1LjMyMSA1LjY0Nyw0NS4zMjEgQzUuNjQ2LDQ1LjMyMSAzLjU3LDQ2LjM2NyAyLjg2LDUwLjUxMyBDMi44Niw1MC41MTMgMS45NDgsNTcuNDc0IDEuOTYyLDcwLjI1OCBDMS45NzcsODIuODI4IDIuNTY4LDg3LjMyOCAzLjEyOSw5MS42MDkgQzMuMzQ5LDkzLjI5MyA2LjEzLDkzLjczNCA2LjEzLDkzLjczNCBDNi40NjEsOTMuNzc0IDYuODI4LDkzLjcwNyA3LjIxLDkzLjQ4NiBMODIuNDgzLDQ5LjkzNSBDODQuMjkxLDQ4Ljg2NiA4NS4xNSw0Ni4yMTYgODUuNTM5LDQzLjY1MSBDODYuNzUyLDM1LjY2MSA4Ny4yMTQsMTAuNjczIDg1LjI2NCwzLjc3MyBDODUuMDY4LDMuMDggODQuNzU0LDIuNjkgODQuMzk2LDIuNDkxIEw4Mi4zMSwxLjcwMSBDODEuNTgzLDEuNzI5IDgwLjg5NCwyLjE2OCA4MC43NzYsMi4yMzYgQzgwLjYzNiwyLjMxNyA0MS44MDcsMjQuNTg1IDIwLjAzMiwzNy4wNzIgTDE5LjgyMiwzNy40NzQiIGlkPSJGaWxsLTEiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNODIuMzExLDEuNzAxIEw4NC4zOTYsMi40OTEgQzg0Ljc1NCwyLjY5IDg1LjA2OCwzLjA4IDg1LjI2NCwzLjc3MyBDODcuMjEzLDEwLjY3MyA4Ni43NTEsMzUuNjYgODUuNTM5LDQzLjY1MSBDODUuMTQ5LDQ2LjIxNiA4NC4yOSw0OC44NjYgODIuNDgzLDQ5LjkzNSBMNy4yMSw5My40ODYgQzYuODk3LDkzLjY2NyA2LjU5NSw5My43NDQgNi4zMTQsOTMuNzQ0IEw2LjEzMSw5My43MzMgQzYuMTMxLDkzLjczNCAzLjM0OSw5My4yOTMgMy4xMjgsOTEuNjA5IEMyLjU2OCw4Ny4zMjcgMS45NzcsODIuODI4IDEuOTYzLDcwLjI1OCBDMS45NDgsNTcuNDc0IDIuODYsNTAuNTEzIDIuODYsNTAuNTEzIEMzLjU3LDQ2LjM2NyA1LjY0Nyw0NS4zMjEgNS42NDcsNDUuMzIxIEM1LjY0Nyw0NS4zMjEgOC4xNDgsNDMuODg3IDEyLjIzOCw0MS41NDIgTDEyLjI0NSw0MS40MTQgTDEyLjI0NSw0MS4zNzEgQzEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQwLjkyNSAxMi4yNDMsNDAuNzkzIEMxMi4yNCw0MC42ODYgMTIuMzAyLDQwLjU4MyAxMi40MzQsNDAuNTA4IEwxOC40NDYsMzcuMDM2IEMxOC41NzQsMzYuOTYyIDE4Ljc0NiwzNi45MjYgMTguOTI3LDM2LjkyNiBDMTkuMTQ1LDM2LjkyNiAxOS4zNzYsMzYuOTc5IDE5LjU1NCwzNy4wODIgQzE5Ljc0NywzNy4xOTQgMTkuODM5LDM3LjM0IDE5LjgyMiwzNy40NzQgTDIwLjAzMywzNy4wNzIgQzQxLjgwNiwyNC41ODUgODAuNjM2LDIuMzE4IDgwLjc3NywyLjIzNiBDODAuODk0LDIuMTY4IDgxLjU4MywxLjcyOSA4Mi4zMTEsMS43MDEgTTgyLjMxMSwwLjcwNCBMODIuMjcyLDAuNzA1IEM4MS42NTQsMC43MjggODAuOTg5LDAuOTQ5IDgwLjI5OCwxLjM2MSBMODAuMjc3LDEuMzczIEM4MC4xMjksMS40NTggNTkuNzY4LDEzLjEzNSAxOS43NTgsMzYuMDc5IEMxOS41LDM1Ljk4MSAxOS4yMTQsMzUuOTI5IDE4LjkyNywzNS45MjkgQzE4LjU2MiwzNS45MjkgMTguMjIzLDM2LjAxMyAxNy45NDcsMzYuMTczIEwxMS45MzUsMzkuNjQ0IEMxMS40OTMsMzkuODk5IDExLjIzNiw0MC4zMzQgMTEuMjQ2LDQwLjgxIEwxMS4yNDcsNDAuOTYgTDUuMTY3LDQ0LjQ0NyBDNC43OTQsNDQuNjQ2IDIuNjI1LDQ1Ljk3OCAxLjg3Nyw1MC4zNDUgTDEuODcxLDUwLjM4NCBDMS44NjIsNTAuNDU0IDAuOTUxLDU3LjU1NyAwLjk2NSw3MC4yNTkgQzAuOTc5LDgyLjg3OSAxLjU2OCw4Ny4zNzUgMi4xMzcsOTEuNzI0IEwyLjEzOSw5MS43MzkgQzIuNDQ3LDk0LjA5NCA1LjYxNCw5NC42NjIgNS45NzUsOTQuNzE5IEw2LjAwOSw5NC43MjMgQzYuMTEsOTQuNzM2IDYuMjEzLDk0Ljc0MiA2LjMxNCw5NC43NDIgQzYuNzksOTQuNzQyIDcuMjYsOTQuNjEgNy43MSw5NC4zNSBMODIuOTgzLDUwLjc5OCBDODQuNzk0LDQ5LjcyNyA4NS45ODIsNDcuMzc1IDg2LjUyNSw0My44MDEgQzg3LjcxMSwzNS45ODcgODguMjU5LDEwLjcwNSA4Ni4yMjQsMy41MDIgQzg1Ljk3MSwyLjYwOSA4NS41MiwxLjk3NSA4NC44ODEsMS42MiBMODQuNzQ5LDEuNTU4IEw4Mi42NjQsMC43NjkgQzgyLjU1MSwwLjcyNSA4Mi40MzEsMC43MDQgODIuMzExLDAuNzA0IiBpZD0iRmlsbC0yIiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY2LjI2NywxMS41NjUgTDY3Ljc2MiwxMS45OTkgTDExLjQyMyw0NC4zMjUiIGlkPSJGaWxsLTMiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMjAyLDkwLjU0NSBDMTIuMDI5LDkwLjU0NSAxMS44NjIsOTAuNDU1IDExLjc2OSw5MC4yOTUgQzExLjYzMiw5MC4wNTcgMTEuNzEzLDg5Ljc1MiAxMS45NTIsODkuNjE0IEwzMC4zODksNzguOTY5IEMzMC42MjgsNzguODMxIDMwLjkzMyw3OC45MTMgMzEuMDcxLDc5LjE1MiBDMzEuMjA4LDc5LjM5IDMxLjEyNyw3OS42OTYgMzAuODg4LDc5LjgzMyBMMTIuNDUxLDkwLjQ3OCBMMTIuMjAyLDkwLjU0NSIgaWQ9IkZpbGwtNCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMy43NjQsNDIuNjU0IEwxMy42NTYsNDIuNTkyIEwxMy43MDIsNDIuNDIxIEwxOC44MzcsMzkuNDU3IEwxOS4wMDcsMzkuNTAyIEwxOC45NjIsMzkuNjczIEwxMy44MjcsNDIuNjM3IEwxMy43NjQsNDIuNjU0IiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTguNTIsOTAuMzc1IEw4LjUyLDQ2LjQyMSBMOC41ODMsNDYuMzg1IEw3NS44NCw3LjU1NCBMNzUuODQsNTEuNTA4IEw3NS43NzgsNTEuNTQ0IEw4LjUyLDkwLjM3NSBMOC41Miw5MC4zNzUgWiBNOC43Nyw0Ni41NjQgTDguNzcsODkuOTQ0IEw3NS41OTEsNTEuMzY1IEw3NS41OTEsNy45ODUgTDguNzcsNDYuNTY0IEw4Ljc3LDQ2LjU2NCBaIiBpZD0iRmlsbC02IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTI0Ljk4Niw4My4xODIgQzI0Ljc1Niw4My4zMzEgMjQuMzc0LDgzLjU2NiAyNC4xMzcsODMuNzA1IEwxMi42MzIsOTAuNDA2IEMxMi4zOTUsOTAuNTQ1IDEyLjQyNiw5MC42NTggMTIuNyw5MC42NTggTDEzLjI2NSw5MC42NTggQzEzLjU0LDkwLjY1OCAxMy45NTgsOTAuNTQ1IDE0LjE5NSw5MC40MDYgTDI1LjcsODMuNzA1IEMyNS45MzcsODMuNTY2IDI2LjEyOCw4My40NTIgMjYuMTI1LDgzLjQ0OSBDMjYuMTIyLDgzLjQ0NyAyNi4xMTksODMuMjIgMjYuMTE5LDgyLjk0NiBDMjYuMTE5LDgyLjY3MiAyNS45MzEsODIuNTY5IDI1LjcwMSw4Mi43MTkgTDI0Ljk4Niw4My4xODIiIGlkPSJGaWxsLTciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTMuMjY2LDkwLjc4MiBMMTIuNyw5MC43ODIgQzEyLjUsOTAuNzgyIDEyLjM4NCw5MC43MjYgMTIuMzU0LDkwLjYxNiBDMTIuMzI0LDkwLjUwNiAxMi4zOTcsOTAuMzk5IDEyLjU2OSw5MC4yOTkgTDI0LjA3NCw4My41OTcgQzI0LjMxLDgzLjQ1OSAyNC42ODksODMuMjI2IDI0LjkxOCw4My4wNzggTDI1LjYzMyw4Mi42MTQgQzI1LjcyMyw4Mi41NTUgMjUuODEzLDgyLjUyNSAyNS44OTksODIuNTI1IEMyNi4wNzEsODIuNTI1IDI2LjI0NCw4Mi42NTUgMjYuMjQ0LDgyLjk0NiBDMjYuMjQ0LDgzLjE2IDI2LjI0NSw4My4zMDkgMjYuMjQ3LDgzLjM4MyBMMjYuMjUzLDgzLjM4NyBMMjYuMjQ5LDgzLjQ1NiBDMjYuMjQ2LDgzLjUzMSAyNi4yNDYsODMuNTMxIDI1Ljc2Myw4My44MTIgTDE0LjI1OCw5MC41MTQgQzE0LDkwLjY2NSAxMy41NjQsOTAuNzgyIDEzLjI2Niw5MC43ODIgTDEzLjI2Niw5MC43ODIgWiBNMTIuNjY2LDkwLjUzMiBMMTIuNyw5MC41MzMgTDEzLjI2Niw5MC41MzMgQzEzLjUxOCw5MC41MzMgMTMuOTE1LDkwLjQyNSAxNC4xMzIsOTAuMjk5IEwyNS42MzcsODMuNTk3IEMyNS44MDUsODMuNDk5IDI1LjkzMSw4My40MjQgMjUuOTk4LDgzLjM4MyBDMjUuOTk0LDgzLjI5OSAyNS45OTQsODMuMTY1IDI1Ljk5NCw4Mi45NDYgTDI1Ljg5OSw4Mi43NzUgTDI1Ljc2OCw4Mi44MjQgTDI1LjA1NCw4My4yODcgQzI0LjgyMiw4My40MzcgMjQuNDM4LDgzLjY3MyAyNC4yLDgzLjgxMiBMMTIuNjk1LDkwLjUxNCBMMTIuNjY2LDkwLjUzMiBMMTIuNjY2LDkwLjUzMiBaIiBpZD0iRmlsbC04IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEzLjI2Niw4OS44NzEgTDEyLjcsODkuODcxIEMxMi41LDg5Ljg3MSAxMi4zODQsODkuODE1IDEyLjM1NCw4OS43MDUgQzEyLjMyNCw4OS41OTUgMTIuMzk3LDg5LjQ4OCAxMi41NjksODkuMzg4IEwyNC4wNzQsODIuNjg2IEMyNC4zMzIsODIuNTM1IDI0Ljc2OCw4Mi40MTggMjUuMDY3LDgyLjQxOCBMMjUuNjMyLDgyLjQxOCBDMjUuODMyLDgyLjQxOCAyNS45NDgsODIuNDc0IDI1Ljk3OCw4Mi41ODQgQzI2LjAwOCw4Mi42OTQgMjUuOTM1LDgyLjgwMSAyNS43NjMsODIuOTAxIEwxNC4yNTgsODkuNjAzIEMxNCw4OS43NTQgMTMuNTY0LDg5Ljg3MSAxMy4yNjYsODkuODcxIEwxMy4yNjYsODkuODcxIFogTTEyLjY2Niw4OS42MjEgTDEyLjcsODkuNjIyIEwxMy4yNjYsODkuNjIyIEMxMy41MTgsODkuNjIyIDEzLjkxNSw4OS41MTUgMTQuMTMyLDg5LjM4OCBMMjUuNjM3LDgyLjY4NiBMMjUuNjY3LDgyLjY2OCBMMjUuNjMyLDgyLjY2NyBMMjUuMDY3LDgyLjY2NyBDMjQuODE1LDgyLjY2NyAyNC40MTgsODIuNzc1IDI0LjIsODIuOTAxIEwxMi42OTUsODkuNjAzIEwxMi42NjYsODkuNjIxIEwxMi42NjYsODkuNjIxIFoiIGlkPSJGaWxsLTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMzcsOTAuODAxIEwxMi4zNyw4OS41NTQgTDEyLjM3LDkwLjgwMSIgaWQ9IkZpbGwtMTAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNi4xMyw5My45MDEgQzUuMzc5LDkzLjgwOCA0LjgxNiw5My4xNjQgNC42OTEsOTIuNTI1IEMzLjg2LDg4LjI4NyAzLjU0LDgzLjc0MyAzLjUyNiw3MS4xNzMgQzMuNTExLDU4LjM4OSA0LjQyMyw1MS40MjggNC40MjMsNTEuNDI4IEM1LjEzNCw0Ny4yODIgNy4yMSw0Ni4yMzYgNy4yMSw0Ni4yMzYgQzcuMjEsNDYuMjM2IDgxLjY2NywzLjI1IDgyLjA2OSwzLjAxNyBDODIuMjkyLDIuODg4IDg0LjU1NiwxLjQzMyA4NS4yNjQsMy45NCBDODcuMjE0LDEwLjg0IDg2Ljc1MiwzNS44MjcgODUuNTM5LDQzLjgxOCBDODUuMTUsNDYuMzgzIDg0LjI5MSw0OS4wMzMgODIuNDgzLDUwLjEwMSBMNy4yMSw5My42NTMgQzYuODI4LDkzLjg3NCA2LjQ2MSw5My45NDEgNi4xMyw5My45MDEgQzYuMTMsOTMuOTAxIDMuMzQ5LDkzLjQ2IDMuMTI5LDkxLjc3NiBDMi41NjgsODcuNDk1IDEuOTc3LDgyLjk5NSAxLjk2Miw3MC40MjUgQzEuOTQ4LDU3LjY0MSAyLjg2LDUwLjY4IDIuODYsNTAuNjggQzMuNTcsNDYuNTM0IDUuNjQ3LDQ1LjQ4OSA1LjY0Nyw0NS40ODkgQzUuNjQ2LDQ1LjQ4OSA4LjA2NSw0NC4wOTIgMTIuMjQ1LDQxLjY3OSBMMTMuMTE2LDQxLjU2IEwxOS43MTUsMzcuNzMgTDE5Ljc2MSwzNy4yNjkgTDYuMTMsOTMuOTAxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjMxNyw5NC4xNjEgTDYuMTAyLDk0LjE0OCBMNi4xMDEsOTQuMTQ4IEw1Ljg1Nyw5NC4xMDEgQzUuMTM4LDkzLjk0NSAzLjA4NSw5My4zNjUgMi44ODEsOTEuODA5IEMyLjMxMyw4Ny40NjkgMS43MjcsODIuOTk2IDEuNzEzLDcwLjQyNSBDMS42OTksNTcuNzcxIDIuNjA0LDUwLjcxOCAyLjYxMyw1MC42NDggQzMuMzM4LDQ2LjQxNyA1LjQ0NSw0NS4zMSA1LjUzNSw0NS4yNjYgTDEyLjE2Myw0MS40MzkgTDEzLjAzMyw0MS4zMiBMMTkuNDc5LDM3LjU3OCBMMTkuNTEzLDM3LjI0NCBDMTkuNTI2LDM3LjEwNyAxOS42NDcsMzcuMDA4IDE5Ljc4NiwzNy4wMjEgQzE5LjkyMiwzNy4wMzQgMjAuMDIzLDM3LjE1NiAyMC4wMDksMzcuMjkzIEwxOS45NSwzNy44ODIgTDEzLjE5OCw0MS44MDEgTDEyLjMyOCw0MS45MTkgTDUuNzcyLDQ1LjcwNCBDNS43NDEsNDUuNzIgMy43ODIsNDYuNzcyIDMuMTA2LDUwLjcyMiBDMy4wOTksNTAuNzgyIDIuMTk4LDU3LjgwOCAyLjIxMiw3MC40MjQgQzIuMjI2LDgyLjk2MyAyLjgwOSw4Ny40MiAzLjM3Myw5MS43MjkgQzMuNDY0LDkyLjQyIDQuMDYyLDkyLjg4MyA0LjY4Miw5My4xODEgQzQuNTY2LDkyLjk4NCA0LjQ4Niw5Mi43NzYgNC40NDYsOTIuNTcyIEMzLjY2NSw4OC41ODggMy4yOTEsODQuMzcgMy4yNzYsNzEuMTczIEMzLjI2Miw1OC41MiA0LjE2Nyw1MS40NjYgNC4xNzYsNTEuMzk2IEM0LjkwMSw0Ny4xNjUgNy4wMDgsNDYuMDU5IDcuMDk4LDQ2LjAxNCBDNy4wOTQsNDYuMDE1IDgxLjU0MiwzLjAzNCA4MS45NDQsMi44MDIgTDgxLjk3MiwyLjc4NSBDODIuODc2LDIuMjQ3IDgzLjY5MiwyLjA5NyA4NC4zMzIsMi4zNTIgQzg0Ljg4NywyLjU3MyA4NS4yODEsMy4wODUgODUuNTA0LDMuODcyIEM4Ny41MTgsMTEgODYuOTY0LDM2LjA5MSA4NS43ODUsNDMuODU1IEM4NS4yNzgsNDcuMTk2IDg0LjIxLDQ5LjM3IDgyLjYxLDUwLjMxNyBMNy4zMzUsOTMuODY5IEM2Ljk5OSw5NC4wNjMgNi42NTgsOTQuMTYxIDYuMzE3LDk0LjE2MSBMNi4zMTcsOTQuMTYxIFogTTYuMTcsOTMuNjU0IEM2LjQ2Myw5My42OSA2Ljc3NCw5My42MTcgNy4wODUsOTMuNDM3IEw4Mi4zNTgsNDkuODg2IEM4NC4xODEsNDguODA4IDg0Ljk2LDQ1Ljk3MSA4NS4yOTIsNDMuNzggQzg2LjQ2NiwzNi4wNDkgODcuMDIzLDExLjA4NSA4NS4wMjQsNC4wMDggQzg0Ljg0NiwzLjM3NyA4NC41NTEsMi45NzYgODQuMTQ4LDIuODE2IEM4My42NjQsMi42MjMgODIuOTgyLDIuNzY0IDgyLjIyNywzLjIxMyBMODIuMTkzLDMuMjM0IEM4MS43OTEsMy40NjYgNy4zMzUsNDYuNDUyIDcuMzM1LDQ2LjQ1MiBDNy4zMDQsNDYuNDY5IDUuMzQ2LDQ3LjUyMSA0LjY2OSw1MS40NzEgQzQuNjYyLDUxLjUzIDMuNzYxLDU4LjU1NiAzLjc3NSw3MS4xNzMgQzMuNzksODQuMzI4IDQuMTYxLDg4LjUyNCA0LjkzNiw5Mi40NzYgQzUuMDI2LDkyLjkzNyA1LjQxMiw5My40NTkgNS45NzMsOTMuNjE1IEM2LjA4Nyw5My42NCA2LjE1OCw5My42NTIgNi4xNjksOTMuNjU0IEw2LjE3LDkzLjY1NCBMNi4xNyw5My42NTQgWiIgaWQ9IkZpbGwtMTIiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4zMTcsNjguOTgyIEM3LjgwNiw2OC43MDEgOC4yMDIsNjguOTI2IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNi44MjksNzEuMjk0IDYuNDMzLDcxLjA2OSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIiBpZD0iRmlsbC0xMyIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjkyLDcxLjEzMyBDNi42MzEsNzEuMTMzIDYuNDMzLDcwLjkwNSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIEM3LjQ2LDY4LjkgNy41OTUsNjguODYxIDcuNzE0LDY4Ljg2MSBDOC4wMDMsNjguODYxIDguMjAyLDY5LjA5IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNy4xNzQsNzEuMDk0IDcuMDM5LDcxLjEzMyA2LjkyLDcxLjEzMyBNNy43MTQsNjguNjc0IEM3LjU1Nyw2OC42NzQgNy4zOTIsNjguNzIzIDcuMjI0LDY4LjgyMSBDNi42NzYsNjkuMTM4IDYuMjQ2LDY5Ljg3OSA2LjI0Niw3MC41MDggQzYuMjQ2LDcwLjk5NCA2LjUxNyw3MS4zMiA2LjkyLDcxLjMyIEM3LjA3OCw3MS4zMiA3LjI0Myw3MS4yNzEgNy40MTEsNzEuMTc0IEM3Ljk1OSw3MC44NTcgOC4zODksNzAuMTE3IDguMzg5LDY5LjQ4NyBDOC4zODksNjkuMDAxIDguMTE3LDY4LjY3NCA3LjcxNCw2OC42NzQiIGlkPSJGaWxsLTE0IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYuOTIsNzAuOTQ3IEM2LjY0OSw3MC45NDcgNi42MjEsNzAuNjQgNi42MjEsNzAuNTA4IEM2LjYyMSw3MC4wMTcgNi45ODIsNjkuMzkyIDcuNDExLDY5LjE0NSBDNy41MjEsNjkuMDgyIDcuNjI1LDY5LjA0OSA3LjcxNCw2OS4wNDkgQzcuOTg2LDY5LjA0OSA4LjAxNSw2OS4zNTUgOC4wMTUsNjkuNDg3IEM4LjAxNSw2OS45NzggNy42NTIsNzAuNjAzIDcuMjI0LDcwLjg1MSBDNy4xMTUsNzAuOTE0IDcuMDEsNzAuOTQ3IDYuOTIsNzAuOTQ3IE03LjcxNCw2OC44NjEgQzcuNTk1LDY4Ljg2MSA3LjQ2LDY4LjkgNy4zMTcsNjguOTgyIEM2LjgyOSw2OS4yNjUgNi40MzMsNjkuOTQ4IDYuNDMzLDcwLjUwOCBDNi40MzMsNzAuOTA1IDYuNjMxLDcxLjEzMyA2LjkyLDcxLjEzMyBDNy4wMzksNzEuMTMzIDcuMTc0LDcxLjA5NCA3LjMxNyw3MS4wMTIgQzcuODA2LDcwLjczIDguMjAyLDcwLjA0NyA4LjIwMiw2OS40ODcgQzguMjAyLDY5LjA5IDguMDAzLDY4Ljg2MSA3LjcxNCw2OC44NjEiIGlkPSJGaWxsLTE1IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTcuNDQ0LDg1LjM1IEM3LjcwOCw4NS4xOTggNy45MjEsODUuMzE5IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuOTI1IDcuNzA4LDg2LjI5MiA3LjQ0NCw4Ni40NDQgQzcuMTgxLDg2LjU5NyA2Ljk2Nyw4Ni40NzUgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IiBpZD0iRmlsbC0xNiIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik03LjIzLDg2LjUxIEM3LjA3NCw4Ni41MSA2Ljk2Nyw4Ni4zODcgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IEM3LjUyMSw4NS4zMDUgNy41OTQsODUuMjg0IDcuNjU4LDg1LjI4NCBDNy44MTQsODUuMjg0IDcuOTIxLDg1LjQwOCA3LjkyMSw4NS42MjIgQzcuOTIxLDg1LjkyNSA3LjcwOCw4Ni4yOTIgNy40NDQsODYuNDQ0IEM3LjM2Nyw4Ni40ODkgNy4yOTQsODYuNTEgNy4yMyw4Ni41MSBNNy42NTgsODUuMDk4IEM3LjU1OCw4NS4wOTggNy40NTUsODUuMTI3IDcuMzUxLDg1LjE4OCBDNy4wMzEsODUuMzczIDYuNzgxLDg1LjgwNiA2Ljc4MSw4Ni4xNzMgQzYuNzgxLDg2LjQ4MiA2Ljk2Niw4Ni42OTcgNy4yMyw4Ni42OTcgQzcuMzMsODYuNjk3IDcuNDMzLDg2LjY2NiA3LjUzOCw4Ni42MDcgQzcuODU4LDg2LjQyMiA4LjEwOCw4NS45ODkgOC4xMDgsODUuNjIyIEM4LjEwOCw4NS4zMTMgNy45MjMsODUuMDk4IDcuNjU4LDg1LjA5OCIgaWQ9IkZpbGwtMTciIGZpbGw9IiM4MDk3QTIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4yMyw4Ni4zMjIgTDcuMTU0LDg2LjE3MyBDNy4xNTQsODUuOTM4IDcuMzMzLDg1LjYyOSA3LjUzOCw4NS41MTIgTDcuNjU4LDg1LjQ3MSBMNy43MzQsODUuNjIyIEM3LjczNCw4NS44NTYgNy41NTUsODYuMTY0IDcuMzUxLDg2LjI4MiBMNy4yMyw4Ni4zMjIgTTcuNjU4LDg1LjI4NCBDNy41OTQsODUuMjg0IDcuNTIxLDg1LjMwNSA3LjQ0NCw4NS4zNSBDNy4xODEsODUuNTAyIDYuOTY3LDg1Ljg3MSA2Ljk2Nyw4Ni4xNzMgQzYuOTY3LDg2LjM4NyA3LjA3NCw4Ni41MSA3LjIzLDg2LjUxIEM3LjI5NCw4Ni41MSA3LjM2Nyw4Ni40ODkgNy40NDQsODYuNDQ0IEM3LjcwOCw4Ni4yOTIgNy45MjEsODUuOTI1IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuNDA4IDcuODE0LDg1LjI4NCA3LjY1OCw4NS4yODQiIGlkPSJGaWxsLTE4IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTc3LjI3OCw3Ljc2OSBMNzcuMjc4LDUxLjQzNiBMMTAuMjA4LDkwLjE2IEwxMC4yMDgsNDYuNDkzIEw3Ny4yNzgsNy43NjkiIGlkPSJGaWxsLTE5IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEwLjA4Myw5MC4zNzUgTDEwLjA4Myw0Ni40MjEgTDEwLjE0Niw0Ni4zODUgTDc3LjQwMyw3LjU1NCBMNzcuNDAzLDUxLjUwOCBMNzcuMzQxLDUxLjU0NCBMMTAuMDgzLDkwLjM3NSBMMTAuMDgzLDkwLjM3NSBaIE0xMC4zMzMsNDYuNTY0IEwxMC4zMzMsODkuOTQ0IEw3Ny4xNTQsNTEuMzY1IEw3Ny4xNTQsNy45ODUgTDEwLjMzMyw0Ni41NjQgTDEwLjMzMyw0Ni41NjQgWiIgaWQ9IkZpbGwtMjAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMjUuNzM3LDg4LjY0NyBMMTE4LjA5OCw5MS45ODEgTDExOC4wOTgsODQgTDEwNi42MzksODguNzEzIEwxMDYuNjM5LDk2Ljk4MiBMOTksMTAwLjMxNSBMMTEyLjM2OSwxMDMuOTYxIEwxMjUuNzM3LDg4LjY0NyIgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTIiIGZpbGw9IiM0NTVBNjQiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+");
},t.exports=r},{"./util.js":22}],17:[function(e,t,n){function r(e){this.kFilter=e,this.currentAccelMeasurement=new a,this.currentGyroMeasurement=new a,this.previousGyroMeasurement=new a,this.filterQ=new i.Quaternion(1,0,0,1),this.previousFilterQ=new i.Quaternion,this.accelQ=new i.Quaternion,this.isOrientationInitialized=!1,this.estimatedGravity=new i.Vector3,this.measuredGravity=new i.Vector3,this.gyroIntegralQ=new i.Quaternion}var a=e("./sensor-sample.js"),i=e("../math-util.js"),o=e("../util.js"),s=!1;r.prototype.addAccelMeasurement=function(e,t){this.currentAccelMeasurement.set(e,t)},r.prototype.addGyroMeasurement=function(e,t){this.currentGyroMeasurement.set(e,t);var n=t-this.previousGyroMeasurement.timestampS;o.isTimestampDeltaValid(n)&&this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},r.prototype.run_=function(){if(!this.isOrientationInitialized)return this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var e=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,t=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,e);this.gyroIntegralQ.multiply(t),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(t);var n=new i.Quaternion;n.copy(this.filterQ),n.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(n),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var r=new i.Quaternion;r.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),r.inverse(),s&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",i.radToDeg*o.getQuaternionAngle(r),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var a=new i.Quaternion;a.copy(this.filterQ),a.multiply(r),this.filterQ.slerp(a,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},r.prototype.getOrientation=function(){return this.filterQ},r.prototype.accelToQuaternion_=function(e){var t=new i.Vector3;t.copy(e),t.normalize();var n=new i.Quaternion;return n.setFromUnitVectors(new i.Vector3(0,0,(-1)),t),n.inverse(),n},r.prototype.gyroToQuaternionDelta_=function(e,t){var n=new i.Quaternion,r=new i.Vector3;return r.copy(e),r.normalize(),n.setFromAxisAngle(r,e.length()*t),n},t.exports=r},{"../math-util.js":14,"../util.js":22,"./sensor-sample.js":20}],18:[function(e,t,n){function r(){this.deviceId="webvr-polyfill:fused",this.deviceName="VR Position Device (webvr-polyfill:fused)",this.accelerometer=new s.Vector3,this.gyroscope=new s.Vector3,window.addEventListener("devicemotion",this.onDeviceMotionChange_.bind(this)),window.addEventListener("orientationchange",this.onScreenOrientationChange_.bind(this)),this.filter=new a(WebVRConfig.K_FILTER),this.posePredictor=new i(WebVRConfig.PREDICTION_TIME_S),this.touchPanner=new o,this.filterToWorldQ=new s.Quaternion,u.isIOS()?this.filterToWorldQ.setFromAxisAngle(new s.Vector3(1,0,0),Math.PI/2):this.filterToWorldQ.setFromAxisAngle(new s.Vector3(1,0,0),-Math.PI/2),this.inverseWorldToScreenQ=new s.Quaternion,this.worldToScreenQ=new s.Quaternion,this.originalPoseAdjustQ=new s.Quaternion,this.originalPoseAdjustQ.setFromAxisAngle(new s.Vector3(0,0,1),-window.orientation*Math.PI/180),this.setScreenTransform_(),u.isLandscapeMode()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new s.Quaternion,this.isFirefoxAndroid=u.isFirefoxAndroid(),this.isIOS=u.isIOS(),this.orientationOut_=new Float32Array(4)}var a=e("./complementary-filter.js"),i=e("./pose-predictor.js"),o=e("../touch-panner.js"),s=e("../math-util.js"),u=e("../util.js");r.prototype.getPosition=function(){return null},r.prototype.getOrientation=function(){var e=this.filter.getOrientation();this.predictedQ=this.posePredictor.getPrediction(e,this.gyroscope,this.previousTimestampS);var t=new s.Quaternion;return t.copy(this.filterToWorldQ),t.multiply(this.resetQ),WebVRConfig.TOUCH_PANNER_DISABLED||t.multiply(this.touchPanner.getOrientation()),t.multiply(this.predictedQ),t.multiply(this.worldToScreenQ),WebVRConfig.YAW_ONLY&&(t.x=0,t.z=0,t.normalize()),this.orientationOut_[0]=t.x,this.orientationOut_[1]=t.y,this.orientationOut_[2]=t.z,this.orientationOut_[3]=t.w,this.orientationOut_},r.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),u.isLandscapeMode()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ),WebVRConfig.TOUCH_PANNER_DISABLED||this.touchPanner.resetSensor()},r.prototype.onDeviceMotionChange_=function(e){var t=e.accelerationIncludingGravity,n=e.rotationRate,r=e.timeStamp/1e3;this.isFirefoxAndroid&&(r/=1e3);var a=r-this.previousTimestampS;return a<=u.MIN_TIMESTEP||a>u.MAX_TIMESTEP?(console.warn("Invalid timestamps detected. Time step between successive gyroscope sensor samples is very small or not monotonic"),void(this.previousTimestampS=r)):(this.accelerometer.set(-t.x,-t.y,-t.z),this.gyroscope.set(n.alpha,n.beta,n.gamma),(this.isIOS||this.isFirefoxAndroid)&&this.gyroscope.multiplyScalar(Math.PI/180),this.filter.addAccelMeasurement(this.accelerometer,r),this.filter.addGyroMeasurement(this.gyroscope,r),void(this.previousTimestampS=r))},r.prototype.onScreenOrientationChange_=function(e){this.setScreenTransform_()},r.prototype.setScreenTransform_=function(){switch(this.worldToScreenQ.set(0,0,0,1),window.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new s.Vector3(0,0,1),-Math.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new s.Vector3(0,0,1),Math.PI/2);break;case 180:}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},t.exports=r},{"../math-util.js":14,"../touch-panner.js":21,"../util.js":22,"./complementary-filter.js":17,"./pose-predictor.js":19}],19:[function(e,t,n){function r(e){this.predictionTimeS=e,this.previousQ=new a.Quaternion,this.previousTimestampS=null,this.deltaQ=new a.Quaternion,this.outQ=new a.Quaternion}var a=e("../math-util.js"),i=!1;r.prototype.getPrediction=function(e,t,n){if(!this.previousTimestampS)return this.previousQ.copy(e),this.previousTimestampS=n,e;var r=new a.Vector3;r.copy(t),r.normalize();var o=t.length();if(o<20*a.degToRad)return i&&console.log("Moving slowly, at %s deg/s: no prediction",(a.radToDeg*o).toFixed(1)),this.outQ.copy(e),this.previousQ.copy(e),this.outQ;var s=(n-this.previousTimestampS,o*this.predictionTimeS);return this.deltaQ.setFromAxisAngle(r,s),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(e),this.outQ},t.exports=r},{"../math-util.js":14}],20:[function(e,t,n){function r(e,t){this.set(e,t)}r.prototype.set=function(e,t){this.sample=e,this.timestampS=t},r.prototype.copy=function(e){this.set(e.sample,e.timestampS)},t.exports=r},{}],21:[function(e,t,n){function r(){window.addEventListener("touchstart",this.onTouchStart_.bind(this)),window.addEventListener("touchmove",this.onTouchMove_.bind(this)),window.addEventListener("touchend",this.onTouchEnd_.bind(this)),this.isTouching=!1,this.rotateStart=new a.Vector2,this.rotateEnd=new a.Vector2,this.rotateDelta=new a.Vector2,this.theta=0,this.orientation=new a.Quaternion}var a=e("./math-util.js"),i=e("./util.js"),o=.5;r.prototype.getOrientation=function(){return this.orientation.setFromEulerXYZ(0,0,this.theta),this.orientation},r.prototype.resetSensor=function(){this.theta=0},r.prototype.onTouchStart_=function(e){1==e.touches.length&&(this.rotateStart.set(e.touches[0].pageX,e.touches[0].pageY),this.isTouching=!0)},r.prototype.onTouchMove_=function(e){if(this.isTouching){this.rotateEnd.set(e.touches[0].pageX,e.touches[0].pageY),this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart),this.rotateStart.copy(this.rotateEnd),i.isIOS()&&(this.rotateDelta.x*=-1);var t=document.body;this.theta+=2*Math.PI*this.rotateDelta.x/t.clientWidth*o}},r.prototype.onTouchEnd_=function(e){this.isTouching=!1},t.exports=r},{"./math-util.js":14,"./util.js":22}],22:[function(e,t,n){var r=e("object-assign"),a=window.Util||{};a.MIN_TIMESTEP=.001,a.MAX_TIMESTEP=1,a.base64=function(e,t){return"data:"+e+";base64,"+t},a.clamp=function(e,t,n){return Math.min(Math.max(t,e),n)},a.lerp=function(e,t,n){return e+(t-e)*n},a.isIOS=function(){var e=/iPad|iPhone|iPod/.test(navigator.platform);return function(){return e}}(),a.isSafari=function(){var e=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);return function(){return e}}(),a.isFirefoxAndroid=function(){var e=navigator.userAgent.indexOf("Firefox")!==-1&&navigator.userAgent.indexOf("Android")!==-1;return function(){return e}}(),a.isLandscapeMode=function(){return 90==window.orientation||window.orientation==-90},a.isTimestampDeltaValid=function(e){return!isNaN(e)&&(!(e<=a.MIN_TIMESTEP)&&!(e>a.MAX_TIMESTEP))},a.getScreenWidth=function(){return Math.max(window.screen.width,window.screen.height)*window.devicePixelRatio},a.getScreenHeight=function(){return Math.min(window.screen.width,window.screen.height)*window.devicePixelRatio},a.requestFullscreen=function(e){if(e.requestFullscreen)e.requestFullscreen();else if(e.webkitRequestFullscreen)e.webkitRequestFullscreen();else if(e.mozRequestFullScreen)e.mozRequestFullScreen();else{if(!e.msRequestFullscreen)return!1;e.msRequestFullscreen()}return!0},a.exitFullscreen=function(){if(document.exitFullscreen)document.exitFullscreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else{if(!document.msExitFullscreen)return!1;document.msExitFullscreen()}return!0},a.getFullscreenElement=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},a.linkProgram=function(e,t,n,r){var a=e.createShader(e.VERTEX_SHADER);e.shaderSource(a,t),e.compileShader(a);var i=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(i,n),e.compileShader(i);var o=e.createProgram();e.attachShader(o,a),e.attachShader(o,i);for(var s in r)e.bindAttribLocation(o,r[s],s);return e.linkProgram(o),e.deleteShader(a),e.deleteShader(i),o},a.getProgramUniforms=function(e,t){for(var n={},r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),a="",i=0;i<r;i++){var o=e.getActiveUniform(t,i);a=o.name.replace("[0]",""),n[a]=e.getUniformLocation(t,a)}return n},a.orthoMatrix=function(e,t,n,r,a,i,o){var s=1/(t-n),u=1/(r-a),c=1/(i-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*s,e[13]=(a+r)*u,e[14]=(o+i)*c,e[15]=1,e},a.isMobile=function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e},a.extend=r,a.safariCssSizeWorkaround=function(e){if(a.isIOS()){var t=e.style.width,n=e.style.height;e.style.width=parseInt(t)+1+"px",e.style.height=parseInt(n)+"px",console.log("Resetting width to...",t),setTimeout(function(){console.log("Done. Width is now",t),e.style.width=t,e.style.height=n},100)}window.Util=a,window.canvas=e},t.exports=a},{"object-assign":1}],23:[function(e,t,n){function r(){try{this.selectedKey=localStorage.getItem(s)||o}catch(e){console.error("Failed to load viewer profile: %s",e)}this.dialog=this.createDialog_(i.Viewers),this.root=null}var a=e("./emitter.js"),i=(e("./util.js"),e("./device-info.js")),o="CardboardV1",s="WEBVR_CARDBOARD_VIEWER",u="webvr-polyfill-viewer-selector";r.prototype=new a,r.prototype.show=function(e){this.root=e,e.appendChild(this.dialog);var t=this.dialog.querySelector("#"+this.selectedKey);t.checked=!0,this.dialog.style.display="block"},r.prototype.hide=function(){this.root&&this.root.contains(this.dialog)&&this.root.removeChild(this.dialog),this.dialog.style.display="none"},r.prototype.getCurrentViewer=function(){return i.Viewers[this.selectedKey]},r.prototype.getSelectedKey_=function(){var e=this.dialog.querySelector("input[name=field]:checked");return e?e.id:null},r.prototype.onSave_=function(){if(this.selectedKey=this.getSelectedKey_(),!this.selectedKey||!i.Viewers[this.selectedKey])return void console.error("ViewerSelector.onSave_: this should never happen!");this.emit("change",i.Viewers[this.selectedKey]);try{localStorage.setItem(s,this.selectedKey)}catch(e){console.error("Failed to save viewer profile: %s",e)}this.hide()},r.prototype.createDialog_=function(e){var t=document.createElement("div");t.classList.add(u),t.style.display="none";var n=document.createElement("div"),r=n.style;r.position="fixed",r.left=0,r.top=0,r.width="100%",r.height="100%",r.background="rgba(0, 0, 0, 0.3)",n.addEventListener("click",this.hide.bind(this));var a=280,i=document.createElement("div"),r=i.style;r.boxSizing="border-box",r.position="fixed",r.top="24px",r.left="50%",r.marginLeft=-a/2+"px",r.width=a+"px",r.padding="24px",r.overflow="hidden",r.background="#fafafa",r.fontFamily="'Roboto', sans-serif",r.boxShadow="0px 5px 20px #666",i.appendChild(this.createH1_("Select your viewer"));for(var o in e)i.appendChild(this.createChoice_(o,e[o].label));return i.appendChild(this.createButton_("Save",this.onSave_.bind(this))),t.appendChild(n),t.appendChild(i),t},r.prototype.createH1_=function(e){var t=document.createElement("h1"),n=t.style;return n.color="black",n.fontSize="20px",n.fontWeight="bold",n.marginTop=0,n.marginBottom="24px",t.innerHTML=e,t},r.prototype.createChoice_=function(e,t){var n=document.createElement("div");n.style.marginTop="8px",n.style.color="black";var r=document.createElement("input");r.style.fontSize="30px",r.setAttribute("id",e),r.setAttribute("type","radio"),r.setAttribute("value",e),r.setAttribute("name","field");var a=document.createElement("label");return a.style.marginLeft="4px",a.setAttribute("for",e),a.innerHTML=t,n.appendChild(r),n.appendChild(a),n},r.prototype.createButton_=function(e,t){var n=document.createElement("button");n.innerHTML=e;var r=n.style;return r["float"]="right",r.textTransform="uppercase",r.color="#1094f7",r.fontSize="14px",r.letterSpacing=0,r.border=0,r.background="none",r.marginTop="16px",n.addEventListener("click",t),n},t.exports=r},{"./device-info.js":7,"./emitter.js":12,"./util.js":22}],24:[function(e,t,n){function r(){var e=document.createElement("video");e.addEventListener("ended",function(){e.play()}),this.request=function(){e.paused&&(e.src=o.base64("video/mp4","AAAAGGZ0eXBpc29tAAAAAG1wNDFhdmMxAAAIA21vb3YAAABsbXZoZAAAAADSa9v60mvb+gABX5AAlw/gAAEAAAEAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAdkdHJhawAAAFx0a2hkAAAAAdJr2/rSa9v6AAAAAQAAAAAAlw/gAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAQAAAAHAAAAAAAJGVkdHMAAAAcZWxzdAAAAAAAAAABAJcP4AAAAAAAAQAAAAAG3G1kaWEAAAAgbWRoZAAAAADSa9v60mvb+gAPQkAGjneAFccAAAAAAC1oZGxyAAAAAAAAAAB2aWRlAAAAAAAAAAAAAAAAVmlkZW9IYW5kbGVyAAAABodtaW5mAAAAFHZtaGQAAAABAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAAZHc3RibAAAAJdzdHNkAAAAAAAAAAEAAACHYXZjMQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAMABwASAAAAEgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABj//wAAADFhdmNDAWQAC//hABlnZAALrNlfllw4QAAAAwBAAAADAKPFCmWAAQAFaOvssiwAAAAYc3R0cwAAAAAAAAABAAAAbgAPQkAAAAAUc3RzcwAAAAAAAAABAAAAAQAAA4BjdHRzAAAAAAAAAG4AAAABAD0JAAAAAAEAehIAAAAAAQA9CQAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEALcbAAAAAHHN0c2MAAAAAAAAAAQAAAAEAAABuAAAAAQAAAcxzdHN6AAAAAAAAAAAAAABuAAADCQAAABgAAAAOAAAADgAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABMAAAAUc3RjbwAAAAAAAAABAAAIKwAAACt1ZHRhAAAAI6llbmMAFwAAdmxjIDIuMi4xIHN0cmVhbSBvdXRwdXQAAAAId2lkZQAACRRtZGF0AAACrgX//6vcRem95tlIt5Ys2CDZI+7veDI2NCAtIGNvcmUgMTQyIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTMgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MzoweDEzIG1lPWhleCBzdWJtZT03IHBzeT0xIHBzeV9yZD0xLjAwOjAuMDAgbWl4ZWRfcmVmPTEgbWVfcmFuZ2U9MTYgY2hyb21hX21lPTEgdHJlbGxpcz0xIDh4OGRjdD0xIGNxbT0wIGRlYWR6b25lPTIxLDExIGZhc3RfcHNraXA9MSBjaHJvbWFfcXBfb2Zmc2V0PS0yIHRocmVhZHM9MTIgbG9va2FoZWFkX3RocmVhZHM9MSBzbGljZWRfdGhyZWFkcz0wIG5yPTAgZGVjaW1hdGU9MSBpbnRlcmxhY2VkPTAgYmx1cmF5X2NvbXBhdD0wIGNvbnN0cmFpbmVkX2ludHJhPTAgYmZyYW1lcz0zIGJfcHlyYW1pZD0yIGJfYWRhcHQ9MSBiX2JpYXM9MCBkaXJlY3Q9MSB3ZWlnaHRiPTEgb3Blbl9nb3A9MCB3ZWlnaHRwPTIga2V5aW50PTI1MCBrZXlpbnRfbWluPTEgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD00MCByYz1hYnIgbWJ0cmVlPTEgYml0cmF0ZT0xMDAgcmF0ZXRvbD0xLjAgcWNvbXA9MC42MCBxcG1pbj0xMCBxcG1heD01MSBxcHN0ZXA9NCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAU2WIhAAQ/8ltlOe+cTZuGkKg+aRtuivcDZ0pBsfsEi9p/i1yU9DxS2lq4dXTinViF1URBKXgnzKBd/Uh1bkhHtMrwrRcOJslD01UB+fyaL6ef+DBAAAAFEGaJGxBD5B+v+a+4QqF3MgBXz9MAAAACkGeQniH/+94r6EAAAAKAZ5hdEN/8QytwAAAAAgBnmNqQ3/EgQAAAA5BmmhJqEFomUwIIf/+4QAAAApBnoZFESw//76BAAAACAGepXRDf8SBAAAACAGep2pDf8SAAAAADkGarEmoQWyZTAgh//7gAAAACkGeykUVLD//voEAAAAIAZ7pdEN/xIAAAAAIAZ7rakN/xIAAAAAOQZrwSahBbJlMCCH//uEAAAAKQZ8ORRUsP/++gQAAAAgBny10Q3/EgQAAAAgBny9qQ3/EgAAAAA5BmzRJqEFsmUwIIf/+4AAAAApBn1JFFSw//76BAAAACAGfcXRDf8SAAAAACAGfc2pDf8SAAAAADkGbeEmoQWyZTAgh//7hAAAACkGflkUVLD//voAAAAAIAZ+1dEN/xIEAAAAIAZ+3akN/xIEAAAAOQZu8SahBbJlMCCH//uAAAAAKQZ/aRRUsP/++gQAAAAgBn/l0Q3/EgAAAAAgBn/tqQ3/EgQAAAA5Bm+BJqEFsmUwIIf/+4QAAAApBnh5FFSw//76AAAAACAGePXRDf8SAAAAACAGeP2pDf8SBAAAADkGaJEmoQWyZTAgh//7gAAAACkGeQkUVLD//voEAAAAIAZ5hdEN/xIAAAAAIAZ5jakN/xIEAAAAOQZpoSahBbJlMCCH//uEAAAAKQZ6GRRUsP/++gQAAAAgBnqV0Q3/EgQAAAAgBnqdqQ3/EgAAAAA5BmqxJqEFsmUwIIf/+4AAAAApBnspFFSw//76BAAAACAGe6XRDf8SAAAAACAGe62pDf8SAAAAADkGa8EmoQWyZTAgh//7hAAAACkGfDkUVLD//voEAAAAIAZ8tdEN/xIEAAAAIAZ8vakN/xIAAAAAOQZs0SahBbJlMCCH//uAAAAAKQZ9SRRUsP/++gQAAAAgBn3F0Q3/EgAAAAAgBn3NqQ3/EgAAAAA5Bm3hJqEFsmUwIIf/+4QAAAApBn5ZFFSw//76AAAAACAGftXRDf8SBAAAACAGft2pDf8SBAAAADkGbvEmoQWyZTAgh//7gAAAACkGf2kUVLD//voEAAAAIAZ/5dEN/xIAAAAAIAZ/7akN/xIEAAAAOQZvgSahBbJlMCCH//uEAAAAKQZ4eRRUsP/++gAAAAAgBnj10Q3/EgAAAAAgBnj9qQ3/EgQAAAA5BmiRJqEFsmUwIIf/+4AAAAApBnkJFFSw//76BAAAACAGeYXRDf8SAAAAACAGeY2pDf8SBAAAADkGaaEmoQWyZTAgh//7hAAAACkGehkUVLD//voEAAAAIAZ6ldEN/xIEAAAAIAZ6nakN/xIAAAAAOQZqsSahBbJlMCCH//uAAAAAKQZ7KRRUsP/++gQAAAAgBnul0Q3/EgAAAAAgBnutqQ3/EgAAAAA5BmvBJqEFsmUwIIf/+4QAAAApBnw5FFSw//76BAAAACAGfLXRDf8SBAAAACAGfL2pDf8SAAAAADkGbNEmoQWyZTAgh//7gAAAACkGfUkUVLD//voEAAAAIAZ9xdEN/xIAAAAAIAZ9zakN/xIAAAAAOQZt4SahBbJlMCCH//uEAAAAKQZ+WRRUsP/++gAAAAAgBn7V0Q3/EgQAAAAgBn7dqQ3/EgQAAAA5Bm7xJqEFsmUwIIf/+4AAAAApBn9pFFSw//76BAAAACAGf+XRDf8SAAAAACAGf+2pDf8SBAAAADkGb4EmoQWyZTAgh//7hAAAACkGeHkUVLD//voAAAAAIAZ49dEN/xIAAAAAIAZ4/akN/xIEAAAAOQZokSahBbJlMCCH//uAAAAAKQZ5CRRUsP/++gQAAAAgBnmF0Q3/EgAAAAAgBnmNqQ3/EgQAAAA5BmmhJqEFsmUwIIf/+4QAAAApBnoZFFSw//76BAAAACAGepXRDf8SBAAAACAGep2pDf8SAAAAADkGarEmoQWyZTAgh//7gAAAACkGeykUVLD//voEAAAAIAZ7pdEN/xIAAAAAIAZ7rakN/xIAAAAAPQZruSahBbJlMFEw3//7B"),e.play())},this.release=function(){e.pause(),e.src=""}}function a(){var e=null;this.request=function(){e||(e=setInterval(function(){window.location=window.location,setTimeout(window.stop,0)},3e4))},this.release=function(){e&&(clearInterval(e),e=null)}}function i(){var e=navigator.userAgent||navigator.vendor||window.opera;return e.match(/iPhone/i)||e.match(/iPod/i)?a:r}var o=e("./util.js");t.exports=i()},{"./util.js":22}],25:[function(e,t,n){function r(){this.displays=[],this.devices=[],this.devicesPopulated=!1,this.nativeWebVRAvailable=this.isWebVRAvailable(),this.nativeLegacyWebVRAvailable=this.isDeprecatedWebVRAvailable(),this.nativeLegacyWebVRAvailable||(this.nativeWebVRAvailable||this.enablePolyfill(),WebVRConfig.ENABLE_DEPRECATED_API&&this.enableDeprecatedPolyfill())}var a=e("./cardboard-vr-display.js"),i=e("./mouse-keyboard-vr-display.js"),o=e("./base.js").VRDisplay,s=e("./base.js").HMDVRDevice,u=e("./base.js").PositionSensorVRDevice,c=e("./display-wrappers.js").VRDisplayHMDDevice,l=e("./display-wrappers.js").VRDisplayPositionSensorDevice;r.prototype.isWebVRAvailable=function(){return"getVRDisplays"in navigator},r.prototype.isDeprecatedWebVRAvailable=function(){return"getVRDevices"in navigator||"mozGetVRDevices"in navigator},r.prototype.populateDevices=function(){if(!this.devicesPopulated){var e=null;this.isCardboardCompatible()&&(e=new a,this.displays.push(e),WebVRConfig.ENABLE_DEPRECATED_API&&(this.devices.push(new c(e)),this.devices.push(new l(e)))),this.isMobile()||WebVRConfig.MOUSE_KEYBOARD_CONTROLS_DISABLED||(e=new i,this.displays.push(e),WebVRConfig.ENABLE_DEPRECATED_API&&(this.devices.push(new c(e)),this.devices.push(new l(e)))),this.devicesPopulated=!0}},r.prototype.enablePolyfill=function(){navigator.getVRDisplays=this.getVRDisplays.bind(this),window.VRDisplay=o},r.prototype.enableDeprecatedPolyfill=function(){navigator.getVRDevices=this.getVRDevices.bind(this),window.HMDVRDevice=s,window.PositionSensorVRDevice=u},r.prototype.getVRDisplays=function(){this.populateDevices();var e=this.displays;return new Promise(function(t,n){try{t(e)}catch(r){n(r)}})},r.prototype.getVRDevices=function(){console.warn("getVRDevices is deprecated. Please update your code to use getVRDisplays instead.");var e=this;return new Promise(function(t,n){try{if(!e.devicesPopulated){if(e.nativeWebVRAvailable)return navigator.getVRDisplays(function(n){for(var r=0;r<n.length;++r)e.devices.push(new c(n[r])),e.devices.push(new l(n[r]));e.devicesPopulated=!0,t(e.devices)},n);if(e.nativeLegacyWebVRAvailable)return(navigator.getVRDDevices||navigator.mozGetVRDevices)(function(n){for(var r=0;r<n.length;++r)n[r]instanceof s&&e.devices.push(n[r]),n[r]instanceof u&&e.devices.push(n[r]);e.devicesPopulated=!0,t(e.devices)},n)}e.populateDevices(),t(e.devices)}catch(r){n(r)}})},r.prototype.isMobile=function(){return/Android/i.test(navigator.userAgent)||/iPhone|iPad|iPod/i.test(navigator.userAgent)},r.prototype.isCardboardCompatible=function(){return this.isMobile()||WebVRConfig.FORCE_ENABLE_VR},t.exports=r},{"./base.js":2,"./cardboard-vr-display.js":5,"./display-wrappers.js":8,"./mouse-keyboard-vr-display.js":15}]},{},[13])}]);
//# sourceMappingURL=eclipse.js.map