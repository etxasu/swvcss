"use strict";tm.add("trg.loader.simple.type.AjaxLoader",function(e,a,t){a.onLoad=function(a){tm.setContent({alias:t.alias,content:a,name:t.url,queue:t.queue}),t.queue.done(e)},e.setup=function(a){t.alias=a.alias,t.url=a.url,t.queue=a.queue,e.load()},e.getLoadInfo=function(){return t.info},e.getUrl=function(){return t.url},e.load=function(n){$.ajax({url:t.url}).done(function(e){a.onLoad(e)}).fail(function(){var a;a={message:"Unable to load file: "+t.url,url:t.url},console.error(a.message),t.queue.done(e,a)})}}),tm.add("trg.loader.simple.type.HandleBars",["trg.loader.simple.type.AjaxLoader"],function(e,a,t){a.override({onLoad:function(e,a){var n,o;t.info=("\x3c!--"===(n=a).substring(0,4)&&n.indexOf("--\x3e")>-1?(o=(o=n.substring(0,n.indexOf("--\x3e")+3)).replace("\x3c!--","").replace("--\x3e","").trim(),n=n.substring(n.indexOf("--\x3e")+3).trim()):o=t.url,{id:o,template:n}),tm.addHtml(t.info.id,t.info.template),e(a)}})}),tm.add("trg.loader.simple.type.Text",["trg.loader.simple.type.AjaxLoader"],function(e,a,t){}),tm.add("trg.loader.simple.Cache",function(e,a,t){e.setup=function(){t.cache={},t.alias={}},e.setContent=function(e){var a,n;n=e.queue,void 0===t.cache[e.name]||-1===t.cache[e.name]?(t.cache[e.name]=e.content,e.alias&&(t.alias[e.alias]?(a={message:'File alias "'+e.alias+'" for the file "'+e.name+'" is already in used. Alias will be ignored.',url:e.name,alias:e.alias},n&&n.addError(a),console.error(a.message)):t.alias[e.alias]=e.content)):(a={message:"File content already loaded for: "+e.name,url:e.name,alias:e.alias},n&&n.addError(a),console.error(a.message))},e.getContent=function(e){var a;return(a=t.cache[e])||(a=t.alias[e]),a}}),tm.add("trg.loader.simple.LoadByType",function(e,a,t){a.loadEachType=function(){var n,o,l,r,i,d,s,u,c,m;for(o=(d=t.loadData.nonJsList).length,r=0;r<o;r++){if(u=i=d[r],"Object"===tm.getType(i)&&(u=i.url),i.alias&&(n=i.alias),i.as&&(n=i.as),l=u.substring(u.lastIndexOf(".")+1),!(s=t.extensionMap[l]))throw new Error("Loader unable to load an handle unknown file type: "+l+". Please see if a loader file type exists for it.");void 0===tm.getContent(u)?(tm.setContent({name:u,content:-1}),c=tm.new(s,{alias:n,queue:e,url:u}),m=void 0,m=c.getUrl(),t.manifest[m]||(t.manifest[m]={status:"loading",item:c})):console.warn("Already tried to load file: "+u)}a.allDone()},e.setup=function(){t.extensionMap={hbs:"trg.loader.simple.type.HandleBars",txt:"trg.loader.simple.type.Text"}}}),tm.add("trg.loader.simple.LoaderQueue",["trg.loader.simple.LoadByType"],function(e,a,t){a.allDone=function(){var e;t.loadCount>=Object.keys(t.manifest).length&&(t.loadData.contentQueue=t.manifest,e=t.doneCallback,Array.isArray(e)?e.forEach(function(e){e(t.loadData)}):e(t.loadData))},e.setup=function(){t.manifest={},t.loadCount=0,t.doneCallback=null},e.addError=function(e){t.loadData.errorList.push(e)},e.done=function(e,n){var o,l;l=e.getUrl(),(o=t.manifest[l])&&o.item==e&&"done"!==o.status&&(o.status="done",t.loadCount++,n?t.loadData.errorList.push(n):t.loadData.loaded[l]=!0),a.allDone()},e.load=function(e){t.loadData=e,t.doneCallback=t.loadData.done,t.loadData.done=null,delete t.loadData.done,t.loadData.nonJsList.length?a.loadEachType():a.allDone()}}),tm.add("trg.loader.simple.Loader",["trg.loader.simple.Cache"],function(e,a,t){e.setup=function(){t.loadList=[]},e.load=function(e){var a;(a=tm.new("trg.loader.simple.LoaderQueue")).load(e),t.loadList.push(a)}}),tm.start(function(){tm.load({setLoader:!0,list:[],done:function(){console.log("- Using the Tamed Simple Loader."),tm.setLoader(tm.new("trg.loader.simple.Loader"))}})});