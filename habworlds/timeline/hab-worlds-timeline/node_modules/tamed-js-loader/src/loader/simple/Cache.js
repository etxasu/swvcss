'use strict';
tm.add ('trg.loader.simple.Cache', function (o, p, d) {
    o.setup = function () {
        d.cache = {};
        d.alias = {};
    }

    o.setContent = function (data) {
        var error, queue;

        queue = data.queue;
        if (d.cache [data.name] === undefined || d.cache [data.name] === -1) {
            d.cache [data.name] = data.content;

            if (data.alias) {
                if (!d.alias [data.alias]) {
                    d.alias [data.alias] = data.content;
                }
                else {
                    error = {
                        message: 'File alias "' + data.alias + '" for the file "' + data.name + '" is already in used. Alias will be ignored.',
                        url: data.name,
                        alias: data.alias,
                    }
                    if (queue) { queue.addError (error); }
                    console.error (error.message);
                }
            }
        }
        else {
            error = {
                message: 'File content already loaded for: ' + data.name,
                url: data.name,
                alias: data.alias,
            }
            if (queue) { queue.addError (error); }
            console.error (error.message);
        }
    }

    o.getContent = function (name) {
        var item;
        item = d.cache [name];
        if (!item) {
            item = d.alias [name];
        }
        return item;
    }
})
