Options +FollowSymLinks
RewriteEngine on

RewriteCond %{HTTP:Accept-encoding} gzip
RewriteCond %{REQUEST_FILENAME}gz -f
RewriteRule ^(.*)\.js$ $1\.jsgz [L]

RewriteCond %{HTTP:Accept-encoding} gzip
RewriteCond %{REQUEST_FILENAME}gz -f
RewriteRule ^(.*)\.data$ $1\.datagz [L]

RewriteCond %{HTTP:Accept-encoding} gzip
RewriteCond %{REQUEST_FILENAME}gz -f
RewriteRule ^(.*)\.mem$ $1\.memgz [L]

RewriteCond %{HTTP:Accept-encoding} gzip
RewriteCond %{REQUEST_FILENAME}gz -f
RewriteRule ^(.*)\.unity3d$ $1\.unity3dgz [L]

AddEncoding gzip .jsgz
AddEncoding gzip .datagz
AddEncoding gzip .memgz
AddEncoding gzip .unity3dgz

location ~* ^/Release/.+\.(js|data|mem|unity3d) 
{
    add_header Content-Encoding gzip;
    gzip_static on;

    rewrite (.*)Release(.*)\.js $1Compressed$2.jsgz break;
    rewrite (.*)Release(.*)\.data $1Compressed$2.datagz break;
    rewrite (.*)Release(.*)\.mem $1Compressed$2.memgz break;
    rewrite (.*)Release(.*)\.unity3d $1Compressed$2.unity3dgz break;
}